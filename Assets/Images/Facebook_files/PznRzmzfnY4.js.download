if (self.CavalryLogger) { CavalryLogger.start_js(["58lTU"]); }

__d('UFICommercialBreakAdapter',['Map','SubscriptionsHandler','UFIInstanceAction','UFISharedDispatcher'],(function a(b,c,d,e,f,g){'use strict';function h(j,k){var l=new (c('SubscriptionsHandler'))();l.addSubscriptions(k.addListener('commercialBreak/hideUFI',function(){return c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').toggleCommercialBreak(j,true));}),k.addListener('commercialBreak/showUFI',function(){return c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').toggleCommercialBreak(j,false));}));return l;}var i=new (c('Map'))();f.exports={start:function j(k,l){var m=k.instanceid;if(i.get(m))return;i.set(m,h(k,l));},stop:function j(k){var l=i.get(k);if(!l)return;l.release();i['delete'](k);}};}),null);
__d('UFIDomRootAdapter',['csx','DOMQuery','Parent','UFIRootRegistry'],(function a(b,c,d,e,f,g,h){function i(j,k){'use strict';this.$UFIDomRootAdapter2=null;this.$UFIDomRootAdapter3=null;this.$UFIDomRootAdapter5=null;this.$UFIDomRootAdapter4=j;this.$UFIDomRootAdapter1=k;}i.prototype.getParentForm=function(){'use strict';if(!this.$UFIDomRootAdapter2)this.$UFIDomRootAdapter2=c('Parent').byTag(this.$UFIDomRootAdapter4,'form');return this.$UFIDomRootAdapter2;};i.prototype.getHeadRoot=function(){'use strict';if(!this.$UFIDomRootAdapter3){var j=c('UFIRootRegistry').isSnowliftNode(this.$UFIDomRootAdapter1.rootid),k=j?"^.fbPhotosSnowliftFeedback ._37uu":"^form ._37uu",l=c('DOMQuery').scry(this.$UFIDomRootAdapter4,k);this.$UFIDomRootAdapter3=l&&l[0]||null;}return this.$UFIDomRootAdapter3;};i.prototype.getSnowliftActionRoot=function(){'use strict';if(!this.$UFIDomRootAdapter5){var j=c('DOMQuery').scry(this.$UFIDomRootAdapter4,"^wliftPayloadRoot ._29qf ._37uu");this.$UFIDomRootAdapter5=j&&j[0]||null;}return this.$UFIDomRootAdapter5;};f.exports=i;}),null);
__d("PinnedCommentEventCreateSubscriptionWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"889113924557064",queryID:"889113957890394"});}),null);
__d('LivePinnedCommentEventCreateSubscription',['BaseGraphQLSubscription','PinnedCommentEventCreateSubscriptionWebGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/pinned_comment_event_create_subscribe/video_id_'+j;},_getQueryID:function i(){return c('PinnedCommentEventCreateSubscriptionWebGraphQLSubscription').getLegacyQueryID();},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),video_id:j})};},_getSubscriptionCallName:function i(){return 'pinned_comment_event_create_subscribe';}});f.exports=h;}),null);
__d('ReactDOMForUFI',['ReactDOMInstrumentationFB','ReactDOM-core','ReactGK'],(function a(b,c,d,e,f,g){var h=c('ReactGK').domIsFiberInUFI&&c('ReactGK').DOMFiber?c('ReactGK').DOMFiber:c('ReactDOM-core');f.exports=c('ReactDOMInstrumentationFB').patchedReactDOM(h);}),null);
__d('FbFeedCommentUFIScroller',['DOMScroll','containsNode','ge','ifRequired'],(function a(b,c,d,e,f,g){var h={reveal:function i(j){if(j){var k=c('ge')('content');if(k&&c('containsNode')(k,j)){c('DOMScroll').ensureVisible(j,null,60,250);}else c('ifRequired')('ScrollableArea',function(l){var m=l.getInstance(j);if(m)m.scrollIntoView(j);});}}};f.exports=h;}),null);
__d('UFIAddCommentLink.react',['cx','fbt','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=c('joinClasses')("UFIRow"+(' '+"UFIAddCommentLink")+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),o;if(this.props.isQAndA){o=i._("Ask a question...");}else o=i._("Write a comment...");return (c('React').createElement('div',{className:n,'data-ft':this.props['data-ft']},c('React').createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},o)));};function m(){j.apply(this,arguments);}m.propTypes={'data-ft':l.string,isFirstCommentComponent:l.bool,isFirstComponent:l.bool,isLastCommentComponent:l.bool,isLastComponent:l.bool,isQAndA:l.bool,onClick:l.func};f.exports=m;}),null);
__d('UFIAnimatedCommentList.react',['cx','React','ifRequired'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PureComponent;i=babelHelpers.inherits(l,k);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.node=null,n;}l.prototype.render=function(){return (c('React').createElement('div',{ref:function(m){return this.node=m;}.bind(this),className:"UFIAnimatedCommentList"},this.props.children));};l.prototype.componentWillEnter=function(m){var n=this.node;if(!n||this.props.isLatestCommentLocal){m();return;}c('ifRequired')('CSSAnimationBuilder',function(o){var p=this.props.isStreamingFromBottom?n.lastChild.clientHeight:-n.firstChild.clientHeight;o.keyframeAnimation(n).defineKeyframes({'0%':{transform:'translateY('+p+'px)'},'100%':{transform:'translateY(0px)'}}).setTimingFunction('ease-in-out').setDuration(.25).setMemoize(false).setIterationCount(1).setFinishedCallback(m).start();}.bind(this));};f.exports=l;}),null);
__d('UFICommentDisabledNotice.react',['cx','React','TextWithEntities.react','linkifyEntityRange'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.feedback,n=m.commentdisablednotice,o=c('React').createElement('div',{className:'UFINotice'},c('React').createElement(c('TextWithEntities.react'),{interpolator:c('linkifyEntityRange'),ranges:n.ranges,aggregatedranges:n.aggregated_ranges,text:n.text}));return (c('React').createElement('div',{className:"UFIRow _4204 _2o9m _4oep"},o));};function l(){i.apply(this,arguments);}l.propTypes={feedback:k.object.isRequired};f.exports=l;}),null);
__d('UFICommentFilters',['UFIConstants'],(function a(b,c,d,e,f,g){'use strict';var h={getAuthors:function i(j){return j.reduce(function(k,l){if(l.author)k=k.concat(l.author);if(l.socialcontext)k=k.concat(l.socialcontext.topmutualid);if(l.replyauthors&&l.replyauthors.length)k=k.concat(l.replyauthors);return k;},[]);},isDeleted:function i(j){return j.status===c('UFIConstants').UFIStatus.DELETED;},isSpam:function i(j){return j.status===c('UFIConstants').UFIStatus.SPAM;},collectSpamBuckets:function i(j,k){var l=j.reduce(function(m,n){if(h.isSpam(n)){if(m.spamBucket){m.spamBucket.spamCommentIDs.push(n.id);m.collected.push(null);}else{m.spamBucket={status:c('UFIConstants').UFIStatus.SPAM,id:n.id,spamCommentIDs:[n.id]};m.collected.push(m.spamBucket);}}else if(k[n.author]){m.spamBucket=null;m.collected.push(n);}return m;},{spamBucket:null,collected:[]});return l.collected;}};f.exports=h;}),null);
__d('UFICommentHeader.react',['cx','fbt','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){return (c('React').createElement('h6',babelHelpers['extends']({},this.props,{className:"accessible_elem"}),i._("Comments")));};function l(){j.apply(this,arguments);}f.exports=l;}),null);
__d('UFICommentListVisibilityTracker.react',['cx','Arbiter','DOMQuery','OnVisible.react','React','ReactDOM','SubscriptionsHandler','UFICommentVPVD','UFIConfig','UFIInstanceAction','UFISharedDispatcher','UFIVisibility'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').Children,l=c('React').Component,m=c('React').PropTypes,n=c('UFIConfig').commentVPVD;i=babelHelpers.inherits(o,l);j=i&&i.prototype;function o(p){j.constructor.call(this,p);this.state={isVisible:false};this.onVisible=function(){if(this.$UFICommentListVisibilityTracker2())this.setState({isVisible:true});c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').changeCommentListVisibility(this.props.contextArgs,c('UFIVisibility').VISIBLE));}.bind(this);this.onHidden=function(){if(this.$UFICommentListVisibilityTracker2())this.setState({isVisible:false});c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').changeCommentListVisibility(this.props.contextArgs,c('UFIVisibility').HIDDEN));}.bind(this);this.$UFICommentListVisibilityTracker1=new (c('SubscriptionsHandler'))();}o.prototype.componentDidMount=function(){if(this.$UFICommentListVisibilityTracker2()&&this.props.contextArgs.location==='conversation_nub')this.$UFICommentListVisibilityTracker1.addSubscriptions(c('Arbiter').subscribe('ConversationNubUtils/recheckTabVisibility',function(p,q){var r=q||{},s=r.tab,t=s&&s.getRootDOM(),u=this.refs.onVisibleRoot,v=u&&c('ReactDOM').findDOMNode(u);if(t&&u&&v&&c('DOMQuery').contains(t,v))u.check();}.bind(this)));};o.prototype.componentWillUnmount=function(){this.$UFICommentListVisibilityTracker1.release();};o.prototype.shouldComponentUpdate=function(p,q){if(!n.debug_html&&this.state.isVisible!==q.isVisible)return false;return true;};o.prototype.$UFICommentListVisibilityTracker2=function(){return !!c('UFIConfig').enableCommentListVisibilityTracking||c('UFICommentVPVD').enableVPVDLogging(this.props.contextArgs);};o.prototype.render=function(){var p=k.only(this.props.children);if(!this.$UFICommentListVisibilityTracker2())return p;var q=n.debug_html;return c('React').createElement('div',{'data-debugstate':q?this.state.isVisible?'partially visible':'hidden':null,className:"_3b-9"+(q?' '+"_3b-a":'')+(q&&this.state.isVisible?' '+"_3b-b":'')+(q&&!this.state.isVisible?' '+"_3b-c":'')},c('React').createElement(c('OnVisible.react'),{ref:'onVisibleRoot',onVisible:this.onVisible,onHidden:this.onHidden,considerZeroedElemsAsHidden:true},p));};o.propTypes={contextArgs:m.shape({instanceid:m.string.isRequired,location:m.string}).isRequired};f.exports=o;}),null);
__d('UFICommentScrollableArea.react',['React','ScrollableArea.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').Children,k=c('React').PropTypes;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;l.prototype.render=function(){var m=this.props,n=m.children,o=m.scrollcomments,p=m.scrollwidth;if(o&&p)return (c('React').createElement(c('ScrollableArea.react'),{width:p},j.only(n)));return j.only(n);};function l(){h.apply(this,arguments);}l.propTypes={scrollcomments:k.bool.isRequired,scrollwidth:k.number.isRequired};f.exports=l;}),null);
__d('CommentsTimeSpentTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:CommentsTimeSpentLoggerConfig',this.$CommentsTimeSpentTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:CommentsTimeSpentLoggerConfig',this.$CommentsTimeSpentTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$CommentsTimeSpentTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$CommentsTimeSpentTypedLogger1=babelHelpers['extends']({},this.$CommentsTimeSpentTypedLogger1,j);return this;};h.prototype.setEndTime=function(j){this.$CommentsTimeSpentTypedLogger1.end_time=j;return this;};h.prototype.setOrderingMode=function(j){this.$CommentsTimeSpentTypedLogger1.ordering_mode=j;return this;};h.prototype.setPostFbid=function(j){this.$CommentsTimeSpentTypedLogger1.post_fbid=j;return this;};h.prototype.setStartTime=function(j){this.$CommentsTimeSpentTypedLogger1.start_time=j;return this;};h.prototype.setTimeSpentID=function(j){this.$CommentsTimeSpentTypedLogger1.time_spent_id=j;return this;};h.prototype.setViewerHasInteracted=function(j){this.$CommentsTimeSpentTypedLogger1.viewer_has_interacted=j;return this;};var i={end_time:true,ordering_mode:true,post_fbid:true,start_time:true,time_spent_id:true,viewer_has_interacted:true};f.exports=h;}),null);
__d('CommentsTimeSpentTracker.react',['invariant','Banzai','CommentsTimeSpentTypedLogger','Event','OnVisible.react','React','SubscriptionsHandler','UFIOrderingModeStore','UserActivity','pageID','setTimeout'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'CommentsTimeSpentTracker',firstVisibleTime:0,listeners:new (c('SubscriptionsHandler'))(),propTypes:{contextArgs:i.object.isRequired,targetFBID:i.string.isRequired,viewerHasInteracted:i.bool.isRequired,timeToConsiderViewerInactiveMillis:i.number,pollViewerActivityIntervalMillis:i.number},getDefaultProps:function k(){return {timeToConsiderViewerInactiveMillis:30000,pollViewerActivityIntervalMillis:1000};},render:function k(){return (c('React').createElement(c('OnVisible.react'),{ref:'onVisibleElement',onVisible:this.startInterval,onHidden:this.finishInterval},this.props.children));},startInterval:function k(){if(this.firstVisibleTime===0){this.firstVisibleTime=this._getTimeInSeconds();this._checkForIdleViewer();}},finishInterval:function k(){var l=c('UFIOrderingModeStore').getState().get(this.props.contextArgs.instanceid);if(this.firstVisibleTime&&this.isMounted()){var m=this._getTimeInSeconds();if(m>this.firstVisibleTime)new (c('CommentsTimeSpentTypedLogger'))().setViewerHasInteracted(this.props.viewerHasInteracted).setOrderingMode(l).setPostFbid(this.props.targetFBID).setStartTime(this.firstVisibleTime).setEndTime(m).setTimeSpentID(c('pageID')).log();this.firstVisibleTime=0;}},componentWillReceiveProps:function k(){this.finishInterval();},componentDidMount:function k(){this.listeners.addSubscriptions(c('Banzai').subscribe(c('Banzai').SHUTDOWN,this.finishInterval),c('Event').listen(window,'blur',this.finishInterval),c('Event').listen(window,'focus',this._checkVisibility));},componentWillUnmount:function k(){this.finishInterval();this.listeners.release();},componentDidUpdate:function k(){this._checkVisibility();},_getTimeInSeconds:function k(){return Math.floor(Date.now()/1000);},_checkVisibility:function k(){if(this.isMounted()){this.refs.onVisibleElement!==null||h(0);this.refs.onVisibleElement.reset();}},_checkForIdleViewer:function k(){if(this.firstVisibleTime===0)return;if(c('UserActivity').isActive(this.props.timeToConsiderViewerInactiveMillis)){c('setTimeout')(function(){this._checkForIdleViewer();}.bind(this),this.props.pollViewerActivityIntervalMillis);}else{this.finishInterval();c('UserActivity').subscribeOnce(function(){if(this.isMounted())this._checkVisibility();}.bind(this));}}});f.exports=j;}),null);
__d('UFISeenTracker.react',['BanzaiODS','OnVisible.react','React','setTimeout'],(function a(b,c,d,e,f,g){'use strict';var h,i;function j(l){var m=false;return function(){if(!m){l();m=true;}};}h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.state={seen:false};this.$UFISeenTracker1=j(this.logSeen.bind(this));}k.prototype.render=function(){if(this.state.seen)return this.props.children;return (c('React').createElement(c('OnVisible.react'),{onVisible:this.$UFISeenTracker1},this.props.children));};k.prototype.logSeen=function(){c('setTimeout')(function(){return this.setState({seen:true});}.bind(this),100);c('BanzaiODS').bumpEntityKey('unsampled_feedback','rendered_ufi_client');};k.defaultProps={children:null};f.exports=k;}),null);
__d('UFIComponentLogger.react',['CommentsTimeSpentTracker.react','React','UFISeenTracker.react','UFIConfig'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=this.props,m=l.children,n=l.contextArgs,o=l.feedback,p=l.hasComments,q=l.isPermalink,r=l.viewerHasInteractedWithComments;if(!m)return null;var s=c('React').createElement('div',null,m);if(p&&c('UFIConfig').logCommentsTimespent){var t=r||q;s=c('React').createElement(c('CommentsTimeSpentTracker.react'),{contextArgs:n,viewerHasInteracted:t,targetFBID:o.commentstargetfbid},s);}if(c('UFIConfig').logWhetherUFISeen)s=c('React').createElement(c('UFISeenTracker.react'),null,s);return s;};function k(){h.apply(this,arguments);}k.propTypes={contextArgs:j.object.isRequired,feedback:j.object.isRequired,hasComments:j.bool.isRequired,isPermalink:j.bool.isRequired,viewerHasInteractedWithComments:j.bool.isRequired};k.defaultProps={children:null};f.exports=k;}),null);
__d('UFIComponents',['React','UFICommentFilters'],(function a(b,c,d,e,f,g){'use strict';var h=function k(l){if(!l)return false;if(l.props.comment&&c('UFICommentFilters').isDeleted(l.props.comment))return false;return true;},i=function k(l,m,n){var o=void 0,p=n?l.length-1:0,q=n?-1:l.length,r=n?-1:1;for(o=p;o!=q;o+=r)if(h(l[o])){m(l,o);return l;}return l;},j={applyToUFIComponents:function k(l,m,n){l=i(l,function(o,p){o[p]=c('React').cloneElement(o[p],m);},false);l=i(l,function(o,p){o[p]=c('React').cloneElement(o[p],n);},true);return l;}};f.exports=j;}),null);
__d("XUFICommentTooltipController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}});}),null);
__d('UFICommentCount.react',['cx','fbt','ActorURI','NumberFormat','React','UFIConfig','XUFICommentTooltipController'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.$UFICommentCount1=function(){var n=this.props.commentCount,o=n==1;if(typeof n==='number'){var p=c('UFIConfig').numberDelimiter;n=c('NumberFormat').formatIntegerWithDelimiter(n,p);}return i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i.param('count',n),i['enum'](o?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})]);};m.prototype.render=function(){var n=this.props.feedback,o=n.entidentifier,p=n.actorforpost,q=this.$UFICommentCount1(),r="fcg",s=null;if(o&&p)s=c('ActorURI').create(c('XUFICommentTooltipController').getURIBuilder().setString('ft_ent_identifier',o).getURI(),p);if(s){return (c('React').createElement('span',{'aria-live':'polite',className:r,'data-hover':'tooltip','data-tooltip-uri':s},q));}else return c('React').createElement('span',{className:r},q);};function m(){j.apply(this,arguments);}m.propTypes={commentCount:l.oneOfType([l.number,l.string]).isRequired,feedback:l.object.isRequired};f.exports=m;}),null);
__d('UFILikeSentenceText.react',['cx','ActorURI','HovercardLinkInterpolator','ProfileBrowserLink','ProfileBrowserTypes','React','TextWithEntities.react','URI','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;function l(n,o,p,q){if(q.count!=null){var r=c('ProfileBrowserTypes').LIKES,s={id:n.targetfbid,actorid:n.actorid},t=[],u;for(var v=0;v<o.length;v++)if(!o[v].count){u=o[v];var w=u.entity;t.push(w.id);}var x=new (c('URI'))('/ajax/like/tooltip.php').setQueryData({comment_fbid:n.targetfbid,comment_from:n.actorforpost,seen_user_fbids:t.length?t:true});x=c('ActorURI').create(x,n.actorforpost);var y,z;if(n.displayreactions){y=c('XUFIReactionProfileDialogController').getURIBuilder().setString('ft_ent_identifier',n.entidentifier).getURI();y=c('ActorURI').create(y,n.actorforpost);z=c('XUFIReactionProfileBrowserController').getURIBuilder().setString('ft_ent_identifier',n.entidentifier).getURI();z=c('ActorURI').create(z,n.actorforpost);}else{y=c('ProfileBrowserLink').constructDialogURI(r,s).toString();z=c('ProfileBrowserLink').constructPageURI(r,s).toString();}return (c('React').createElement('a',{'data-testid':'n_other_people_link',className:"_375l",rel:'dialog',ajaxify:y,href:z,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':x.toString(),role:'button'},p));}else{var aa={source_feedback_owner_id:n.ownerid,source_feedback_identifier:n.entidentifier};return c('HovercardLinkInterpolator')(p,q,null,null,'ufi',aa);}}i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.render=function(){var n=this.props.feedback,o=this.props.likeSentenceData,p,q=o.aggregatedranges||o.aggregated_ranges;p=l;p=p.bind(null,n,o.ranges);return (c('React').createElement(c('TextWithEntities.react'),{interpolator:p,ranges:Object.values(o.ranges),aggregatedRanges:q,text:o.text}));};function m(){i.apply(this,arguments);}m.propTypes={contextArgs:k.object.isRequired,feedback:k.object.isRequired,likeSentenceData:k.object.isRequired};f.exports=m;}),null);
__d("XUFIReactionsSocialSentenceTooltipController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/reaction\/sentence\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},user_count:{type:"Int"}});}),null);
__d('UFIReactionsFacepile.react',['ix','cx','ActorURI','Bootloader','Image.react','React','TooltipLink.react','UFIConfig','UFIConstants','UFIReactionIconImpl.react','UFIReactionsProfileBrowserUtils','XUFIReactionTooltipController','XUFIReactionsSocialSentenceTooltipController','fbglyph'],(function a(b,c,d,e,f,g,h,i){var j,k,l=11,m=7,n=32,o='16';j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(q,r){'use strict';k.constructor.call(this,q,r);this.onSentenceClick=this.onSentenceClick.bind(this);}p.prototype.componentWillMount=function(){'use strict';var q=this.props.context.source,r=c('UFIConstants').UFIFeedbackSourceType.PHOTOS_SNOWLIFT;if(q===r){this.$UFIReactionsFacepile2=m;}else this.$UFIReactionsFacepile2=l;};p.prototype.$UFIReactionsFacepile3=function(q){'use strict';var r=q.actorforpost,s=q.entidentifier,t=c('UFIConfig').reactionsHasTooltipBreakdown?c('XUFIReactionsSocialSentenceTooltipController'):c('XUFIReactionTooltipController');return {'data-hover':'tooltip','data-tooltip-uri':c('ActorURI').create(t.getURIBuilder().setString('ft_ent_identifier',s).getURI(),r)};};p.prototype.onSentenceClick=function(event){'use strict';var q=this.props.feedback,r=c('UFIReactionsProfileBrowserUtils').getDialogURI(q).toString();c('Bootloader').loadModules(["AsyncDialog"],function(s){s.bootstrap(r,event.currentTarget,'dialog');},'UFIReactionsFacepile.react');event.preventDefault();};p.prototype.renderFacepile=function(){'use strict';var q=this.props.feedback,r=q.reactioncount,s=q.reactors;if(s===null)return null;var t=s;if(r>this.$UFIReactionsFacepile2)t=s.slice(0,this.$UFIReactionsFacepile2-1);return t.map(function(u){return (c('React').createElement(c('TooltipLink.react'),{href:c('UFIReactionsProfileBrowserUtils').getPageURI(q),key:u.profilepicsrc,onClick:this.onSentenceClick,position:'above',rel:'ignore',tooltip:u.name},c('React').createElement('div',null,c('React').createElement('div',{className:"_44l5"},c('React').createElement(c('Image.react'),{height:n,src:u.profilepicsrc,width:n}),c('React').createElement('div',{className:"_44l6"},c('React').createElement(c('UFIReactionIconImpl.react'),{reaction:u.reaction,size:o}))))));}.bind(this));};p.prototype.renderMoreLink=function(){'use strict';var q=this.props.feedback,r=q.reactioncount,s=q.reactors,t=q.viewerreaction;if(s===null||r<=this.$UFIReactionsFacepile2)return null;var u=s[this.$UFIReactionsFacepile2-1],v=void 0;if(c('UFIConfig').reactionsHasTooltipBreakdown){v=r>1;}else v=t?r>3:r>2;var w=null;if(v)w=this.$UFIReactionsFacepile3(q);return (c('React').createElement('a',{className:"_44l5 _19sm",href:c('UFIReactionsProfileBrowserUtils').getPageURI(q),onClick:this.onSentenceClick,rel:'ignore'},c('React').createElement('span',babelHelpers['extends']({},w,{className:"_44l7"}),c('React').createElement('div',{className:"_3vbb"},c('React').createElement(c('Image.react'),{height:n,src:u.profilepicsrc,width:n})),c('React').createElement('div',{className:"_44l8"},c('React').createElement(c('Image.react'),{height:o,src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/3-dots-h_20_fig-white.png"),width:o})))));};p.prototype.render=function(){'use strict';return (c('React').createElement('li',{className:"_44l9"},this.renderFacepile(),this.renderMoreLink()));};f.exports=p;}),null);
__d('UFIReactionsSocialSentence.react',['cx','fbt','ActorURI','Bootloader','BanzaiLogger','React','UFIConfig','UFIReactionsBlingTokens.react','UFIReactionsFacepile.react','UFIReactionsProfileBrowserUtils','XUFIReactionTooltipController','XUFIReactionsSocialSentenceTooltipController'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.onSentenceClick=function(event){var r=this.props.feedback,s=c('UFIReactionsProfileBrowserUtils').getDialogURI(r).toString();c('BanzaiLogger').log('WebReactionsBlingLoggerConfig',{feedback_id:this.props.feedback.entidentifier,'interface':'www',action:'click',target_type:'social_sentence'});c('Bootloader').loadModules(["AsyncDialog"],function(t){t.bootstrap(s,event.currentTarget,'dialog');},'UFIReactionsSocialSentence.react');event.preventDefault();}.bind(this),n;}l.prototype.$UFIReactionsSocialSentence1=function(m){'use strict';var n=m.actorforpost,o=m.entidentifier,p=c('UFIConfig').reactionsHasTooltipBreakdown?c('XUFIReactionsSocialSentenceTooltipController'):c('XUFIReactionTooltipController');return {'data-hover':'tooltip','data-tooltip-uri':c('ActorURI').create(p.getURIBuilder().setString('ft_ent_identifier',o).getURI(),n)};};l.prototype.render=function(){'use strict';var m=this.props.feedback,n=this.props.contextArgs,o=m.likesentences,p=m.reactors,q=m.reactioncount,r=m.reactioncountreduced,s=m.reactionsentences,t=m.showblingbarfeedback,u=m.viewerreaction,v=u?q>3:q>2;if(c('UFIConfig').reactionsHasTooltipBreakdown)v=q>1;var w=null;if(v)w=this.$UFIReactionsSocialSentence1(m);var x=null;if(s&&s.current){x=s.current.text;}else if(o&&o.current){x=o.current.text;}else x=r;var y=m!==null&&t&&n.isPermalink,z=null;if(x)z=c('React').createElement('span',{className:"_4arz"},c('React').createElement('span',w,x));var aa=null,ba=null;if(q){if(y&&!z)ba=i._("people reacted to this");aa=c('React').createElement('span',{'aria-hidden':!!z,className:"_1g5v"},c('React').createElement('span',w,r,' ',ba));}var ca=c('React').createElement('a',{className:"_2x4v",href:c('UFIReactionsProfileBrowserUtils').getPageURI(m),onClick:this.onSentenceClick,rel:'ignore'},aa,z),da=null,ea=null;if(y&&p){da=c('React').createElement(c('UFIReactionsFacepile.react'),{feedback:m,context:n});}else{var fa=c('UFIConfig').reactionsDirectReactTokensModule?c('UFIConfig').reactionsDirectReactTokensModule:c('UFIReactionsBlingTokens.react');ea=c('React').createElement(fa,{className:"_4ar- _ipn",contextArgs:n,showCounts:c('UFIConfig').reactionsHasDirectReactTokensCounts,feedback:m,max:3},ca);}return (c('React').createElement('div',null,da,c('React').createElement('div',{className:"_ipp"},y?ca:ea)));};f.exports=l;}),null);
__d("XUFIGroupSeenByProfileBrowserController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/group\/seenby\/profile\/browser\/",{id:{type:"Int",required:true}});}),null);
__d("XUFIGroupSeenByProfileDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/group\/seenby\/profile\/dialog\/",{id:{type:"Int",required:true},__asyncDialog:{type:"Int"}});}),null);
__d('UFILikeSentence.react',['cx','invariant','fbt','ActorURI','Bootloader','LeftRight.react','React','UFICommentCount.react','UFILikeSentenceText.react','UFIReactionsSocialSentence.react','URI','XUFIGroupSeenByProfileBrowserController','XUFIGroupSeenByProfileDialogController','isEmpty','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=null;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.state={bootloadedSelectorModule:false,hasSelectorModule:!!n},this.$UFILikeSentence1=function(u){if(u.showOrderingModeSelector&&!this.state.bootloadedSelectorModule){!u.contextArgs.entstream||i(0);c('Bootloader').loadModules(["UFIOrderingModeSelectorContainer.react"],function(v){n=v;this.setState({hasSelectorModule:true});}.bind(this),'UFILikeSentence.react');this.setState({bootloadedSelectorModule:true});}}.bind(this),this.$UFILikeSentence2=function(){var u=this.props.feedback,v=u.likesentences,w=v||{},x=w.current;return x||{};}.bind(this),this.$UFILikeSentence3=function(){var u=this.props,v=u.feedback,w=u.contextArgs;if(!this.constructor.rendersSocialSentence(u))return null;if(w.hasReactions)return (c('React').createElement(c('UFIReactionsSocialSentence.react'),{feedback:v,contextArgs:w}));var x=this.$UFILikeSentence2();if(x&&x.text)return (c('React').createElement('div',{className:"UFILikeSentenceText"},c('React').createElement(c('UFILikeSentenceText.react'),{contextArgs:w,feedback:v,likeSentenceData:x})));return null;}.bind(this),q;}o.rendersSocialSentence=function(p){var q=p.feedback,r=q.likesentences,s=q.reactionsentences;return r&&!c('isEmpty')(r.current)||s&&s.current&&s.current.text;};o.prototype.componentWillMount=function(){this.$UFILikeSentence1(this.props);};o.prototype.componentWillReceiveProps=function(p){this.$UFILikeSentence1(p);};o.prototype.renderOrderingModeSelector=function(){if(!this.props.showOrderingModeSelector||!this.state.hasSelectorModule||!n)return null;return (c('React').createElement(n,{key:'orderingmodeselector',contextArgs:this.props.contextArgs,feedback:this.props.feedback}));};o.prototype.renderSeenState=function(){var p=this.props.feedback;if(!p.seencount||p.seencount===0||this.props.contextArgs.entstream)return null;var q=null;if(p.seenbyall){q=j._("Seen by everyone");}else q=p.seencount==1?j._("Seen by 1"):j._("Seen by {count}",[j.param('count',p.seencount)]);var r=new (c('URI'))('/ajax/ufi/seen_list_hovercard.php').setQueryData({id:p.entidentifier}),s=c('ActorURI').create(c('XUFIGroupSeenByProfileDialogController').getURIBuilder().setInt('id',p.entidentifier).getURI(),p.actorforpost),t=c('ActorURI').create(c('XUFIGroupSeenByProfileBrowserController').getURIBuilder().setInt('id',p.entidentifier).getURI(),p.actorforpost);return (c('React').createElement('a',{key:'seenstate',rel:'dialog',ajaxify:s,href:t,'data-hovercard':r.toString(),className:"UFISeenCount"+(' '+"UFISeenCountRight")},c('React').createElement('span',{className:'UFISeenCountIcon'}),q));};o.prototype.render=function(){var p=this.$UFILikeSentence3(this.props),q=[this.renderSeenState(),this.renderOrderingModeSelector()].filter(function(t){return t!==null;}),r=null;if(q.length===1){r=q[0];}else if(q.length>1)r=c('React').createElement('div',{className:"_oql"},q);if(r)if(!p)p=c('React').createElement('div',null);var s=null;if(p){s=c('React').createElement(c('LeftRight.react'),{direction:c('LeftRight.react').DIRECTION.right},p,r);}else s=r;return (c('React').createElement('div',{className:c('joinClasses')("UFIRow"+(this.props.feedback.likesentences.isunseen?' '+"UFIUnseenItem":'')+(' '+"UFILikeSentence")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')+(this.props.contextArgs.hasReactions?' '+"_4_dr":''))},s));};o.propTypes={contextArgs:m.object.isRequired,feedback:m.object.isRequired,isFirstComponent:m.bool,isLastComponent:m.bool,onOrderingModeChange:m.func,showOrderingModeSelector:m.bool};o.contextTypes={dispatch:m.func};f.exports=o;}),null);
__d('UFILiveTypingIndicatorContainer.react',['BootloadOnRender.react','FluxContainer','JSResource','LazyComponent.react','React','UFIConfig','UFILiveTypingStore'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').Component;h=babelHelpers.inherits(k,j);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.state={everHadTyping:false,hasTyping:false,friendTyping:false};}k.getStores=function(){return [c('UFILiveTypingStore')];};k.calculateState=function(){var l=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],m=arguments[1];if(!c('UFIConfig').typingIndicator.showInline)return {everHadTyping:false,hasTyping:false,friendTyping:false};var n=!!c('UFILiveTypingStore').getState()[m.feedbackTargetID];return {everHadTyping:l.everHadTyping||n,hasTyping:n,friendTyping:c('UFILiveTypingStore').isFriendTyping(m.feedbackTargetID)};};k.prototype.shouldComponentUpdate=function(l,m){return l.feedbackTargetID!=this.props.feedbackTargetID||m.everHadTyping!=this.state.everHadTyping||m.hasTyping!=this.state.hasTyping;};k.prototype.render=function(){if(this.state.everHadTyping)return (c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('UFILiveTypingIndicator.react').__setRef('UFILiveTypingIndicatorContainer.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),babelHelpers['extends']({},this.props,this.state))}));return null;};f.exports=c('FluxContainer').create(k,{pure:true,withProps:true});}),null);
__d('UFIPager.react',['cx','LeftRight.react','React','UFIImageBlock.react','XUISpinner.react','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.onPagerClick=function(r){!this.props.isLoading&&this.props.onPagerClick&&this.props.onPagerClick();r.nativeEvent.prevent();}.bind(this),n;}l.prototype.render=function(){var m=this.onPagerClick,n=c('joinClasses')("UFIRow"+(this.props.isUnseen?' '+"UFIUnseenItem":'')+(' '+"UFIPagerRow")+(' '+"_4oep")+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),o=null;if(this.props.isLoading)o=c('React').createElement(c('XUISpinner.react'),{className:'mls',background:'light',size:'small'});var p=c('React').createElement('a',{className:'UFIPagerLink',onClick:m,href:'#',role:'button'},this.props.pagerLabel,o),q="fcg"+(' '+"UFIPagerCount"),r=c('React').createElement('span',{className:q},this.props.countSentence),s;if(this.props.contextArgs.entstream||!this.props.isReply){s=c('React').createElement(c('LeftRight.react'),{direction:c('LeftRight.react').DIRECTION.right},p,r);}else s=c('React').createElement(c('UFIImageBlock.react'),null,c('React').createElement('a',{className:'UFIPagerIcon',onClick:m,href:'#',role:'button'}),p,r);return (c('React').createElement('div',{className:n,'data-ft':this.props['data-ft']},s));};l.propTypes={contextArgs:k.object.isRequired,pagerLabel:k.string.isRequired,'data-ft':k.string,countSentence:k.string,isFirstCommentComponent:k.bool,isFirstComponent:k.bool,isLastCommentComponent:k.bool,isLastComponent:k.bool,isLoading:k.bool,isReply:k.bool,isUnseen:k.bool,onPagerClick:k.func};f.exports=l;}),null);
__d('UFIPagerLabel',['fbt','intlList','NumberFormat','UFIConfig'],(function a(b,c,d,e,f,g,h){'use strict';function i(k){return c('NumberFormat').formatIntegerWithDelimiter(k.count,c('UFIConfig').numberDelimiter);}var j={VIEW_ONE:'view_one',VIEW_ONE_MORE:'view_one_more',VIEW_ALL:'view_all',VIEW_MORE_EXPLICIT:'view_more_explicit',VIEW_MORE:'view_more',VIEW_PREVIOUS:'view_previous',VIEW_PREVIOUS_EXPLICIT:'view_previous_explicit',_getReplyLabel:function k(l,m){switch(l){case j.VIEW_ONE:return h._("View 1 reply");case j.VIEW_ONE_MORE:return h._("View 1 more reply");case j.VIEW_ALL:return h._({"*":"View all {count} replies"},[h.param('count',i(m),[0,m.count])]);case j.VIEW_MORE_EXPLICIT:return h._({"*":{"*":"View {count} more replies","268435456":"View {count} more reply"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count)]);case j.VIEW_MORE:return h._("View more replies");case j.VIEW_PREVIOUS:return h._("View previous replies");case j.VIEW_PREVIOUS_EXPLICIT:return h._({"*":{"*":"View {count} previous replies","268435456":"View {count} previous reply"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count)]);default:return null;}},_getCommentLabel:function k(l,m){switch(l){case j.VIEW_ONE:return h._("View 1 comment");case j.VIEW_ONE_MORE:return h._("View 1 more comment");case j.VIEW_ALL:return h._({"*":"View all {count} comments"},[h.param('count',i(m),[0,m.count])]);case j.VIEW_MORE_EXPLICIT:return h._({"*":{"*":"View {count} more comments","268435456":"View {count} more comment"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count)]);case j.VIEW_MORE:return h._("View more comments");case j.VIEW_PREVIOUS_EXPLICIT:return h._({"*":{"*":"View {count} previous comments","268435456":"View {count} previous comment"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count)]);case j.VIEW_PREVIOUS:return h._("View previous comments");default:return null;}},_getCommentLabelWithCommentSentence:function k(l,m){var n=c('intlList')(m.commenters),o=m.othersCount,p=c('NumberFormat').formatIntegerWithDelimiter(o,c('UFIConfig').numberDelimiter);switch(l){case j.VIEW_ONE:return h._("View 1 comment from {names}",[h.param('names',n)]);case j.VIEW_ONE_MORE:return h._("View 1 more comment from {names}",[h.param('names',n)]);case j.VIEW_ALL:switch(o){case 0:return h._({"*":"View all {count} comments from {names}"},[h.param('count',i(m),[0,m.count]),h.param('names',n)]);case 1:return h._({"*":"View all {count} comments from {names} and 1 other person"},[h.param('count',i(m),[0,m.count]),h.param('names',n)]);default:return h._({"*":{"*":"View all {count} comments from {names} and {othersCount} others"}},[h.param('count',i(m),[0,m.count]),h.param('names',n),h.param('othersCount',p,[0,o])]);}case j.VIEW_MORE_EXPLICIT:case j.VIEW_MORE:switch(o){case 0:return h._("View more comments from {names}",[h.param('names',n)]);case 1:return h._("View more comments from {names} and 1 other person",[h.param('names',n)]);default:return h._({"*":"View more comments from {names} and {othersCount} others"},[h.param('names',n),h.param('othersCount',p,[0,o])]);}case j.VIEW_PREVIOUS:case j.VIEW_PREVIOUS_EXPLICIT:switch(o){case 0:return h._("View previous comments from {names}",[h.param('names',n)]);case 1:return h._("View previous comments from {names} and 1 other person",[h.param('names',n)]);default:return h._({"*":"View previous comments from {names} and {othersCount} others"},[h.param('names',n),h.param('othersCount',p,[0,o])]);}default:return null;}},_getQuestionLabel:function k(l,m){switch(l){case j.VIEW_ONE:return h._("View 1 question");case j.VIEW_ONE_MORE:return h._("View 1 more question");case j.VIEW_ALL:return h._({"*":"View all {count} questions"},[h.param('count',i(m),[0,m.count])]);case j.VIEW_MORE_EXPLICIT:return h._({"*":{"*":"View {count} more questions","268435456":"View {count} more question"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count)]);case j.VIEW_MORE:return h._("View more questions");case j.VIEW_PREVIOUS:return h._("View previous questions");case j.VIEW_PREVIOUS_EXPLICIT:return h._({"*":{"*":"View {count} previous questions","268435456":"View {count} previous question"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count)]);default:return null;}},getLabel:function k(l,m,n,o){if(m){return j._getReplyLabel(l,o);}else if(n){return j._getQuestionLabel(l,o);}else{if(o.commenters)return this._getCommentLabelWithCommentSentence(l,o);return j._getCommentLabel(l,o);}}};f.exports=j;}),null);
__d('UFIPagerGenerator',['fbt','NumberFormat','React','TrackingNodes','UFICommentOrdering','UFIConfig','UFIConstants','UFIPager.react','UFIPagerLabel','UFIRange'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('UFIConstants').UFIPaging,j={isBottomPager:function k(l,m){return c('UFICommentOrdering').inverted(m)&&!l;},needsStartOfRangePager:function k(l){return l>0;},renderPagers:function k(l){var m,n,o,p=l.commentCount,q=l.contextArgs,r=l.currentLength,s=l.currentOffset,t=l.deletedCount,u=l.feedback,v=l.onPageCallback,w=l.orderingMode,x=l.range,y=l.targetID,z=p-t,aa=r-t,ba=y!==q.ftentidentifier,ca=this.isBottomPager(ba,w),da={topPager:null,bottomPager:null},ea=x.isLoadingPrev(),fa=x.isLoadingNext(),ga={count:0},ha=u.commentsentenceinfo;if(ha){ga.commenters=ha.explicit_commenter_names;ga.othersCount=ha.other_commenter_count;}var ia=s+r==p;if(p<q.pagesize&&ia||aa===0){var ja,m=function(){var ma=Math.min(p,q.pagesize);ja=function ra(){return v(ca?i.BOTTOM:i.TOP,new (c('UFIRange'))(p-ma,ma));};var na=void 0;if(aa===0){if(z==1){na=c('UFIPagerLabel').VIEW_ONE;}else{ga.count=z;na=c('UFIPagerLabel').VIEW_ALL;}}else if(z-aa==1){na=c('UFIPagerLabel').VIEW_ONE_MORE;}else{na=c('UFIPagerLabel').VIEW_MORE_EXPLICIT;ga.count=z-aa;}var oa=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.VIEW_ALL_COMMENTS),pa=c('UFIPagerLabel').getLabel(na,ba,u.isqanda,ga),qa=c('React').createElement(c('UFIPager.react'),{key:'allPager'+y,ref:ca?'topLevelBottomPager':null,contextArgs:q,isUnseen:u.hasunseencollapsed,isLoading:ca?fa:ea,isReply:ba,pagerLabel:pa,onPagerClick:ja,'data-ft':oa});if(ca){da.bottomPager=qa;}else da.topPager=qa;return {v:da};}();if(typeof m==="object")return m.v;}var ka=c('UFIPagerLabel').getLabel(c('UFIPagerLabel').VIEW_MORE,ba,u.isqanda,ga),la=c('UFIPagerLabel').getLabel(c('UFIPagerLabel').VIEW_PREVIOUS,ba,u.isqanda,ga);if(this.needsStartOfRangePager(s))(function(){var ma=Math.max(s-q.pagesize,0),na=s+r-ma,oa=void 0;if(!ba||aa>1){var pa=c('NumberFormat').formatIntegerWithDelimiter(aa,c('UFIConfig').numberDelimiter),qa=c('NumberFormat').formatIntegerWithDelimiter(z,c('UFIConfig').numberDelimiter);oa=h._("{countshown} of {totalcount}",[h.param('countshown',pa),h.param('totalcount',qa)]);}var ra=function sa(){return v(ca?i.BOTTOM:i.TOP,new (c('UFIRange'))(ma,na));};if(ca){da.bottomPager=c('React').createElement(c('UFIPager.react'),{key:'bottomPager'+y,ref:!ba?'topLevelBottomPager':null,contextArgs:q,isLoading:ea,isReply:ba,pagerLabel:ka,onPagerClick:ra,countSentence:oa});}else da.topPager=c('React').createElement(c('UFIPager.react'),{key:'topPager'+y,contextArgs:q,isLoading:ea,isReply:ba,pagerLabel:la,onPagerClick:ra,countSentence:oa});})();if(s+r<p)(function(){var ma=Math.min(r+q.pagesize,p-s),na=function oa(){return v(ca?i.TOP:i.BOTTOM,new (c('UFIRange'))(s,ma));};if(ca){da.topPager=c('React').createElement(c('UFIPager.react'),{key:'topPager'+y,contextArgs:q,isLoading:fa,isReply:ba,pagerLabel:la,onPagerClick:na});}else da.bottomPager=c('React').createElement(c('UFIPager.react'),{key:'bottomPager',ref:!ba?'topLevelBottomPager':null,contextArgs:q,isLoading:fa,isReply:ba,pagerLabel:ka,onPagerClick:na});})();return da;}};f.exports=j;}),null);
__d('UFIReplySocialSentence.react',['cx','fbt','Badge.react','Image.react','LiveTimer','React','Timestamp.react','UFIConfig','UFIImageBlock.react','Middot.react','NumberFormat','WebCommentViewOption','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=43200;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;n.prototype.render=function(){var o=this.props.isLoading?"UFIReplySocialSentenceLoading":'',p=c('joinClasses')("UFIRow"+(' '+"UFIReplySocialSentenceRow")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),q,r,s=c('NumberFormat').formatIntegerWithDelimiter(this.props.replies,c('UFIConfig').numberDelimiter);if(this.props.isExpanded){q=this.props.replies>1?i._({"*":"Hide {count} Replies"},[i.param('count',s,[0,this.props.replies])]):i._("Hide 1 Reply");}else{q=this.props.replies>1?i._({"*":"{count} Replies"},[i.param('count',s,[0,this.props.replies])]):i._("1 Reply");if(this.props.timestamp){var t=c('LiveTimer').getApproximateServerTime()/1000-this.props.timestamp.time;if(t<m||this.props.orderingMode==c('WebCommentViewOption').RECENT_ACTIVITY)r=c('React').createElement('span',{className:"fcg"},c('React').createElement(c('Middot.react'),{key:'middot-timestamp'}),c('React').createElement(c('Timestamp.react'),{shorten:this.props.contextArgs.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose}));}}var u=this.props.author,v=u&&!this.props.isExpanded,w=null,x;if(v){w=c('React').createElement(c('Image.react'),{alt:'',src:u.thumbSrc,className:"img UFIActorImage _54ru"});var y=null;if(this.props.showVerified)y=c('React').createElement(c('Badge.react'),{size:'xsmall',type:'verified'});if(u.i18nGender){x=[i._({"*":"{author}{verified_badge} replied"},[i.param('author',u.name,[1,u.i18nGender]),i.param('verified_badge',y)])];}else x=[i._("{author}{verified_badge} replied",[i.param('author',u.name),i.param('verified_badge',y)])];x.push(c('React').createElement(c('Middot.react'),{key:'middot-author'}),q);}else x=q;return (c('React').createElement('div',{className:p,'data-ft':this.props['data-ft']},c('React').createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},c('React').createElement(c('UFIImageBlock.react'),null,c('React').createElement('div',{className:(v?"UFIReplyActorPhotoWrapper":'')+(v?' '+"UFIReplyActor":'')},c('React').createElement('i',{className:(!this.props.isExpanded?"UFIPagerIcon":'')+(this.props.isExpanded?' '+"UFICollapseIcon":'')+(v?' '+"UFIIconWithActor":'')}),w),c('React').createElement('span',{className:o},c('React').createElement('span',{className:"UFIReplySocialSentenceLinkText"+(this.props.showVerified?' '+"UFIReplySocialSentenceVerified":'')},x),r)))));};function n(){j.apply(this,arguments);}n.propTypes={author:l.object,contextArgs:l.object.isRequired,'data-ft':l.string,isExpanded:l.bool,isFirstComponent:l.bool,isLastComponent:l.bool,isLoading:l.bool,onClick:l.func,orderingMode:l.string,replies:l.number,showVerified:l.bool,timestamp:l.object};f.exports=n;}),null);
__d("XUFIShareTooltipController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/share\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}});}),null);
__d('UFIShareRow.react',['cx','fbt','ActorURI','Layout.react','NumberFormat','React','UFICommentCount.react','UFIConfig','XUFIShareTooltipController','URI','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('Layout.react').Column,m=c('Layout.react').FillColumn,n=c('React').PropTypes;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.$UFIShareRow1=function(){var u=this.props,v=u.feedback,w=u.shownCommentCount;if(w&&w!=0)return (c('React').createElement(c('UFICommentCount.react'),{feedback:v,commentCount:w}));return null;}.bind(this),q;}o.prototype.render=function(){var p=this.props.feedback.sharefbid||this.props.feedback.targetfbid,q=new (c('URI'))('/ajax/shares/view').setQueryData({target_fbid:p}),r=new (c('URI'))('/shares/view').setSubdomain('www').setQueryData({id:p}),s=this.props.contextArgs.loggedOutLinkConfig;if(s&&s.showShareLink)q=s.shareAjaxifyURI;var t;if(this.props.feedback.sharecount>1){var u=c('NumberFormat').formatIntegerWithDelimiter(this.props.feedback.sharecount,c('UFIConfig').numberDelimiter);t=i._({"*":"{count} shares"},[i.param('count',u,[0,this.props.feedback.sharecount])]);}else t=i._("1 share");var v=c('joinClasses')("UFIRow"+(' '+"UFIShareRow")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),w=c('ActorURI').create(c('XUFIShareTooltipController').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost),x=c('React').createElement('a',{className:'UFIShareLink',rel:'dialog','data-hover':'tooltip','data-tooltip-uri':w,ajaxify:q.toString(),href:r.toString()},t),y=this.$UFIShareRow1();if(y)x=c('React').createElement(c('Layout.react'),null,c('React').createElement(m,null,x),c('React').createElement(l,null,y));return (c('React').createElement('div',{className:v},x));};o.propTypes={contextArgs:n.object.isRequired,feedback:n.object.isRequired,isFirstComponent:n.bool,isLastComponent:n.bool,shownCommentCount:n.oneOfType([n.number,n.string])};f.exports=o;}),null);
__d('UFISpamPlaceholder.react',['fbt','React','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){if(this.props.isLoading)return (c('React').createElement('div',{className:'UFIRow'},c('React').createElement('span',{className:'UFISpamCommentWrapper'},c('React').createElement(c('XUISpinner.react'),{className:'mls',background:'light',size:'small'}))));return (c('React').createElement('div',{className:'UFIRow'},c('React').createElement('a',{href:'#',role:'button',className:'UFISpamCommentLink',onClick:this.props.onClick,'aria-label':h._("Show comments marked as spam")},c('React').createElement('span',{'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':h._({"*":"{count} hidden"},[h.param('count',this.props.numHidden,[0])]),className:'UFISpamCommentWrapper'},c('React').createElement('i',{className:'placeholderIcon'})))));};function l(){i.apply(this,arguments);}l.propTypes={numHidden:k.number.isRequired,isLoading:k.bool,onClick:k.func};f.exports=l;}),null);
__d('UFISpamPlaceholderContainer.react',['FluxContainer','React','UFISharedDispatcher','UFISpamPlaceholder.react','UFISpamStore','UFIStoryAction'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.state={isLoading:true,numHidden:0,onClick:function p(){return null;}},l;}j.getStores=function(){return [c('UFISpamStore')];};j.calculateState=function(k,l){var m=l.contextArgs,n=l.viewas,o=l.comment,p=l.parentCommentID;return {isLoading:!!c('UFISpamStore').getState()[o.id],numHidden:o.spamCommentIDs.length,onClick:function q(){return c('UFISharedDispatcher').dispatch(c('UFIStoryAction').spamFetched(m,n,o.spamCommentIDs,p));}};};j.prototype.shouldComponentUpdate=function(k,l){return k.contextArgs!=this.props.contextArgs||k.viewas!=this.props.viewas||k.parentCommentID!=this.props.parentCommentID||l.isLoading!=this.state.isLoading||l.numHidden!=this.state.numHidden;};j.prototype.render=function(){return c('React').createElement(c('UFISpamPlaceholder.react'),this.state);};f.exports=c('FluxContainer').create(j,{pure:true,withProps:true});}),null);
__d('UFITranslateAllRow.react',['cx','ContentTranslationStrings','Link.react','React','UFIInstanceAction','UFISharedDispatcher'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$UFITranslateAllRow1=function(){c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').translateAll(this.props.contextArgs));}.bind(this),m;}k.prototype.render=function(){return c('React').createElement('div',{className:"UFIRow"},c('React').createElement('div',{className:"_4upo"},c('React').createElement(c('Link.react'),{onClick:this.$UFITranslateAllRow1},c('ContentTranslationStrings').TRANSLATE_ALL_TEXT)));};f.exports=k;}),null);
__d('StaticUFI.react',['csx','cx','invariant','Arbiter','BlueBar','BootloadOnRender.react','CommentPrelude','DOM','Event','FbFeedCommentUFIScroller','FBFeedLocations','JSResource','LazyComponent.react','LogHistory','Parent','React','ReactDOM','SearchableEntry','SubscriptionsHandler','TrackingNodes','UFIAddComment.react','UFIAddCommentLink.react','UFIAnimatedCommentList.react','UFIComment.react','UFICommentDisabledNotice.react','UFICommentEditIDStore','UFICommentFilters','UFICommentHeader.react','UFICommentListVisibilityTracker.react','UFICommentOrdering','UFIComments','UFICommentScrollableArea.react','UFIComponentLogger.react','UFIComponents','UFIConstants','UFIContainer.react','UFIInstanceState','UFIInteractionStore','UFILikeSentence.react','UFILivePinnedCommentStore','UFILiveTypingIndicatorContainer.react','UFIOrderingModeStore','UFIPagerGenerator','UFIReplySocialSentence.react','UFIShareRow.react','UFISpamPlaceholderContainer.react','UFIStoryAction','UFITranslateAllRow.react','URI','XUISpinner.react','distinctArrayBy','emptyFunction','getElementPosition','getElementRect','getUnboundedScrollPosition','ifRequired','shallowEqual','throttle'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('UFIConstants').UFIFeedbackSourceType,n=c('UFIConstants').UFIPayloadSourceType,o=c('UFIConstants').UFIStatus,p=c('React').PropTypes,q=c('React').createElement('div',{className:"UFICommentsLoadingSpinnerContainer _48pi UFIRow"},c('React').createElement(c('XUISpinner.react'),{size:'large'})),r=c('React').createElement('div',{className:"_xtv",role:'presentation'},c('React').createElement('i',null));k=babelHelpers.inherits(s,c('React').Component);l=k&&k.prototype;function s(t){l.constructor.call(this,t);this.loadMoreComments=function(){if(this.$StaticUFI1&&this.refs.topLevelBottomPager&&!(this.props.contextArgs.ftentidentifier in this.props.isActiveLoading)){var v=c('ReactDOM').findDOMNode(this.refs.topLevelBottomPager),w=c('getUnboundedScrollPosition')(window).y,x=w+document.documentElement.clientHeight+c('UFIConstants').infiniteScrollRangeForQANDAPermalinks;if(v.offsetHeight&&v.offsetTop<x)this.refs.topLevelBottomPager.props.onPagerClick();}}.bind(this);this.onComment=function(){var v=null;if(this.refs.toplevelcomposer){this.refs.toplevelcomposer.focus();v=c('ReactDOM').findDOMNode(this.refs.toplevelcomposer);}else{var w=c('ReactDOM').findDOMNode(this),x=c('Parent').byTag(w,'form');v=this.$StaticUFI31(x);if(!v){var y=c('Parent').bySelector(w,"._3g6d");v=y&&this.$StaticUFI31(y);}v&&v.focus();}c('FbFeedCommentUFIScroller').reveal(v);}.bind(this);var u=this.props.focusReply;this.state={focusReply:u,viewerHasClickedCommentComposer:false,viewerHasClickedSeeMore:false,editcommentid:c('UFICommentEditIDStore').getForInstance(this.props.contextArgs.instanceid)};}s.prototype.componentDidMount=function(){this.$StaticUFI1=true;c('Arbiter').inform('UFI/displayDone-'+this.props.contextArgs.instanceid);this.$StaticUFI2=new (c('SubscriptionsHandler'))();if(this.props.feedback.isqanda&&this.props.feedback.infinitescroll){var t=c('throttle')(this.loadMoreComments,20);this.$StaticUFI2.addSubscriptions(c('Event').listen(window,'scroll',t),c('Event').listen(window,'resize',t));}this.$StaticUFI3();this.$StaticUFI2.addSubscriptions(c('UFICommentEditIDStore').addListener(function(){this.setState({editcommentid:c('UFICommentEditIDStore').getForInstance(this.props.contextArgs.instanceid)});}.bind(this)));};s.prototype.componentWillReceiveProps=function(t){if(this.props.focusReply!==t.focusReply)this.setState({focusReply:t.focusReply});};s.prototype.componentWillUnmount=function(){this.$StaticUFI1=false;this.$StaticUFI2&&this.$StaticUFI2.release();};s.prototype.shouldComponentUpdate=function(t,u){var v=this.props,w=this.state;return !c('shallowEqual')(w,u)||!c('shallowEqual')(w.loadingSpamIDs,u.loadingSpamIDs)||!c('shallowEqual')(v,t)||!c('shallowEqual')(v.feedback,t.feedback)||!c('shallowEqual')(v.repliesMap,t.repliesMap)||!c('shallowEqual')(v.commentCounts,t.commentCounts)||!c('shallowEqual')(v.deletedCounts,t.deletedCounts)||!c('shallowEqual')(v.availableComments,t.availableComments)||!c('shallowEqual')(v.ranges,t.ranges)||!c('shallowEqual')(v.authorProfiles,t.authorProfiles)||!c('shallowEqual')(v.commentPermalinks,t.commentPermalinks)||!c('shallowEqual')(v.canAddCommentMap,t.canAddCommentMap)||!c('shallowEqual')(v.canReplyMap,t.canReplyMap)||!c('shallowEqual')(v.isActiveLoading,t.isActiveLoading)||!c('shallowEqual')(v.repliesExpandedMap,t.repliesExpandedMap)||!c('shallowEqual')(v.loadingTranslationsMap,t.loadingTranslationsMap);};s.prototype.componentWillUpdate=function(t,u){this.$StaticUFI4=this.$StaticUFI4||!this.$StaticUFI5(this.props.payloadSource)&&this.props.source===m.NEWS_FEED&&c('BlueBar').hasFixedBlueBar();if(this.$StaticUFI4&&!this.$StaticUFI6)this.$StaticUFI6=c('getElementRect')(c('ReactDOM').findDOMNode(this));};s.prototype.componentDidUpdate=function(t,u){this.$StaticUFI3(t);if(this.$StaticUFI4&&this.$StaticUFI6){var v=this.$StaticUFI7(this.$StaticUFI6);if(v!==null)c('Arbiter').inform('ufi/didUpdate',{offsetY:v});this.$StaticUFI4=false;this.$StaticUFI6=null;}};s.prototype.$StaticUFI5=function(t){return t===n.UNKNOWN||t===n.INITIAL_SERVER||t===n.USER_ACTION||t===n.COLLAPSE_ACTION;};s.prototype.$StaticUFI7=function(t){var u=c('getElementPosition')(c('BlueBar').getMaybeFixedRoot());if(t.bottom<u.height){var v=t.bottom-t.top;return c('ReactDOM').findDOMNode(this).offsetHeight-v;}return null;};s.prototype.$StaticUFI8=function(){var t=this.props,u=t.contextArgs,v=t.commentCounts,w=t.deletedCounts,x=t.feedback,y=x.commentcountreduced,z=u.ftentidentifier,aa=null;if(this.$StaticUFI9())if(y&&isNaN(y)){aa=y;}else aa=v[z]-w[z];return aa;};s.prototype.$StaticUFI3=function(t){if(this.props.loadingComments)return;if(this.props.commentsToggling){c('CommentPrelude').expand(c('ReactDOM').findDOMNode(this),false,'ufi.react');this.onComment();c('UFIInstanceState').updateState(this.props.contextArgs.instanceid,'commentsToggling',false);}if(this.state.focusReply){var u=this.state.focusReply,v=u.replyID,w=u.initiatorComment;if(!(v in this.refs))return;var x=this.refs[v]&&this.refs[v].refs&&this.refs[v].refs.mentionsinput;if(!x)return;x.focus();c('FbFeedCommentUFIScroller').reveal(c('ReactDOM').findDOMNode(x));this.setState({focusReply:null});if(!w)return;var y=x.hasEnteredText(),z=w.author===this.props.feedback.actorforpost,aa=!!w.parentcommentid;if(!y&&!z&&aa)x.insertMention(this.$StaticUFI10(w.author));}};s.prototype.$StaticUFI10=function(t){var u=this.props.authorProfiles[t],v=u.type;return new (c('SearchableEntry'))({uniqueID:u.id,title:u.name,type:v==='friend'?'user':v});};s.prototype.$StaticUFI11=function(){return this.props.source===m.ADS;};s.prototype.$StaticUFI12=function(){return this.props.source===m.LIVE_VIDEO;};s.prototype.$StaticUFI13=function(){var t=this.props.contextArgs,u=t.feedcontext&&JSON.parse(t.feedcontext);return !!(u&&u.is_snowlift);};s.prototype.$StaticUFI14=function(){var t=this.props,u=t.hideOrderingModeSelector,v=t.feedback,w=t.commentCounts,x=t.contextArgs;return !u&&v.orderingmodes&&w[x.ftentidentifier]>=c('UFIConstants').minCommentsForOrderingModeSelector;};s.prototype.$StaticUFI15=function(){var t=this.props,u=t.contextArgs,v=t.ranges,w=u.ftentidentifier,x=v[w].getLength();return this.$StaticUFI16(w,x);};s.prototype.$StaticUFI16=function(t,u){var v=this.props.commentCounts;return v[t]==u;};s.prototype.$StaticUFI17=function(){var t=this.props,u=t.contextArgs,v=t.feedback;return v.seencount>0&&!u.entstream;};s.prototype.$StaticUFI18=function(){return c('UFILikeSentence.react').rendersSocialSentence(this.props);};s.prototype.$StaticUFI19=function(){var t=this.props,u=t.contextArgs,v=t.feedback;return this.$StaticUFI11()||this.$StaticUFI12()||u.search||this.hasReactions(v,u);};s.prototype.$StaticUFI20=function(){if(this.$StaticUFI19())return false;return this.$StaticUFI18()||this.$StaticUFI17()||this.$StaticUFI14();};s.prototype.$StaticUFI21=function(){var t=this.props,u=t.contextArgs,v=t.feedback;if(this.$StaticUFI11())return false;return u.showshares&&v.sharecount&&!this.hasReactions(v,u);};s.prototype.$StaticUFI22=function(){return this.$StaticUFI21()&&!this.props.contextArgs.entstream;};s.prototype.$StaticUFI9=function(){if(this.$StaticUFI11())return false;var t=this.props.availableComments;return !!(t&&t.length);};s.prototype.$StaticUFI23=function(){var t=this.props,u=t.canAddCommentMap,v=t.contextArgs,w=t.feedback;return w.cancomment&&v.showaddcomment&&w.actorforpost&&u[v.ftentidentifier];};s.prototype.$StaticUFI24=function(){return this.$StaticUFI23()&&this.$StaticUFI25()&&this.props.hasPagedToplevel;};s.prototype.$StaticUFI26=function(){var t=this.props.feedback;return t.arecommentsdisabled===true&&t.cancomment===false;};s.prototype.$StaticUFI27=function(){if(!this.$StaticUFI22())return false;var t=this.props.contextArgs.isPermalink,u=t?this.$StaticUFI8():null;return u&&u!='0';};s.prototype.$StaticUFI28=function(){if(!this.$StaticUFI22())return null;var t=this.props,u=t.contextArgs,v=t.feedback,w=this.$StaticUFI27()?this.$StaticUFI8():null;return c('React').createElement(c('UFIShareRow.react'),{contextArgs:u,feedback:v,shownCommentCount:w});};s.prototype.$StaticUFI29=function(){var t=this.props,u=t.feedback,v=t.contextArgs;if(this.$StaticUFI20())return c('React').createElement(c('UFILikeSentence.react'),{contextArgs:v,feedback:u,showOrderingModeSelector:this.$StaticUFI14(),key:'ufi_like_sentence'});return null;};s.prototype.render=function(){var t=this.props,u=t.feedback,v=t.contextArgs,w=this.$StaticUFI26(),x=this.$StaticUFI21(),y=this.$StaticUFI29(),z=!!y,aa=w?c('React').createElement(c('UFICommentDisabledNotice.react'),{feedback:t.feedback}):null,ba=this.$StaticUFI28();if(t.loadingComments)return c('React').createElement(c('UFIContainer.react'),null,y,ba,q);var ca=this.$StaticUFI9(),da=t.ranges[v.ftentidentifier],ea=t.loggingOffset-da.getOffset(),fa=u.targetiscomment,ga=ca?this.renderCommentArray(t.availableComments,ea,fa,null):null,ha=null,ia=null,ja=u.cancomment,ka=z||x||ca||ja,la=null,ma=c('UFILivePinnedCommentStore').getPinnedCommentID(v.ftentidentifier);if(ma&&v.enableViewPinnedComments){var na=c('UFIComments').getComment(ma);la=this.renderComment(na,0,false,false,false,false,true,!!this.props.loadingTranslationsMap[na.id]);}var oa=ka?c('React').createElement(c('UFICommentHeader.react'),null):null;if(this.$StaticUFI23()||v.loggedOutLinkConfig&&v.loggedOutLinkConfig.showAddComment){var pa=this.$StaticUFI30(v,ca);if(pa){ha=c('React').createElement(c('UFILiveTypingIndicatorContainer.react'),{contextArgs:v,feedbackTargetID:u.targetfbid});var qa=c('UFIOrderingModeStore').isLiveStreaming(v.instanceid);ia=c('React').createElement(c('UFIAddComment.react'),{viewerActorID:u.actorforpost,replyCommentID:null,targetID:u.ownerid,initialData:null,ref:'toplevelcomposer',withoutSeparator:null,editingComment:{},isEditing:false,mentionsDataSource:u.mentionsdatasource,showSendOnEnterTip:u.showsendonentertip,multiCompanyGroupsCount:u.multicompanygroupscount,allowVideoAttachments:u.allowvideoattachments&&!qa,allowPhotoAttachments:u.allowphotoattachments&&!qa,allowStickerAttachments:u.allowstickerattachments&&!qa,allowGifAttachments:u.allowgifattachments&&!qa,allowTipJar:u.istipjarenabled&&qa,contextArgs:v,subtitle:u.subtitle,isQAndA:u.isqanda,markViewerHasInteracted:this.state.viewerHasClickedCommentComposer?c('emptyFunction'):function(){return this.setState({viewerHasClickedCommentComposer:true});}.bind(this),allowCommentMarkdown:u.iscommentmarkdowneligible,keepFocus:qa});}}var ra=this.renderPagers(v.ftentidentifier,false,t.ranges[v.ftentidentifier].getOffset(),t.ranges[v.ftentidentifier].getLength()),sa=ra.topPager,ta=ra.bottomPager,ua=this.$StaticUFI25()?ha:null,va=this.$StaticUFI25()?null:ha,wa=c('UFIComponents').applyToUFIComponents([ua,sa].concat(ga,[ta,va]),{isFirstCommentComponent:true},{isLastCommentComponent:true}),xa=wa.slice(0,2);ua=xa[0];sa=xa[1];var ya=wa.slice(-2);ta=ya[0];va=ya[1];ga=wa.slice(2,-2);var za=this.$StaticUFI25()?ia:null,ab=this.$StaticUFI25()?null:ia,bb=this.$StaticUFI24()?c('React').createElement(c('UFIAddCommentLink.react'),{onClick:this.onComment,isQAndA:u.isqanda}):null,cb=true,db=null;if(v.showCommentNuxForGroupMallAds)db=c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('UFICommentNuxForGroupMallAds.react').__setRef('StaticUFI.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{commentNuxContent:v.groupMallAdsCommentNuxContent})});wa=c('UFIComponents').applyToUFIComponents([y,ba,za,sa].concat(ga,[ta,ab,bb]),{isFirstComponent:cb},{isLastComponent:true});var eb=wa.slice(0,4);y=eb[0];ba=eb[1];za=eb[2];sa=eb[3];var fb=wa.slice(-3);ta=fb[0];ab=fb[1];bb=fb[2];ga=wa.slice(4,-3);var gb=!!c('UFIInteractionStore').getValueFor(v.instanceid);if(v.enableFacecastAnimatedComments&&c('UFIOrderingModeStore').isLiveStreaming(v.instanceid))ga=c('ifRequired')('ReactTransitionGroup',function(hb){if(!t.availableComments||!t.availableComments.length)return ga;var ib=v.isBroadcasterUFI,jb=ib?t.availableComments[t.availableComments.length-1]:t.availableComments[0];return c('React').createElement(hb,{component:'div',className:"_3s3y"},c('React').createElement(c('UFIAnimatedCommentList.react'),{key:c('UFIComments').getRenderKey(jb.id),isLatestCommentLocal:Boolean(jb.islocal),isStreamingFromBottom:ib},ga));},function(){return ga;});return c('React').createElement(c('UFIContainer.react'),null,v.shownub&&ka?r:null,y,ba,oa,db,za,c('React').createElement(c('UFICommentListVisibilityTracker.react'),{contextArgs:v},c('React').createElement(c('UFICommentScrollableArea.react'),{scrollcomments:!!v.scrollcomments,scrollwidth:v.scrollwidth||0},c('React').createElement(c('UFIComponentLogger.react'),{contextArgs:v,feedback:u,hasComments:ca,isPermalink:v.isPermalink,viewerHasInteractedWithComments:gb||this.state.viewerHasClickedCommentComposer||this.state.viewerHasClickedSeeMore},ua,sa,v.isBroadcasterUFI?null:la,ga,v.isBroadcasterUFI?la:null,ta,va))),ab,bb,aa);};s.prototype.$StaticUFI30=function(t){if(this.state.editcommentid!==null)return false;if(this.$StaticUFI9())return true;var u=c('UFIInstanceState').getKeyForInstance(t.instanceid,'addCommentInput'),v=u&&u.expanded;if(v)return true;if(t.feedcontext)var w=JSON.parse(t.feedcontext).location_type;return w!==c('FBFeedLocations').REVIEWS_FEED;};s.prototype.renderCommentArray=function(t,u,v,w){var x=this.props,y=x.contextArgs,z=this.props.feedback;if(!t.length)return [];t=c('distinctArrayBy')(t,function(ba){return ba.id;});var aa=c('UFICommentFilters').collectSpamBuckets(t,x.authorProfiles);return aa.reduce(function(ba,ca,da){if(!ca)return ba;if(c('UFICommentFilters').isSpam(ca)){ba.push(c('React').createElement(c('UFISpamPlaceholderContainer.react'),{key:'spam'+ca.id,contextArgs:y,viewas:y.viewas,comment:ca,parentCommentID:w}));}else{if(ca.id==this.state.editcommentid){ba.push(this.renderEditCommentBox(ca));}else{var ea=Math.max(u-da,0),fa=da===0,ga=da===aa.length-1,ha=!v&&!z.arecommentsdisabled,ia=v&&!fa;ba.push(this.renderComment(ca,ea,fa,ga,ha,ia,false,!!this.props.loadingTranslationsMap[ca.id]));var ja=c('UFIInstanceState').getKeyForInstance(y.instanceid,'translateallcommentid');if(ca.id==ja&&!c('UFIOrderingModeStore').isLiveStreaming(y.instanceid))ba.push(c('React').createElement(c('UFITranslateAllRow.react'),{key:'translateAll'+ca.id,contextArgs:y}));}if(!v&&!c('UFICommentFilters').isDeleted(ca)&&!c('UFIOrderingModeStore').isLiveStreaming(y.instanceid)){var ka=this.renderReplyContainer(ca);if(ka)ba.push(ka);}}return ba;}.bind(this),[]);};s.prototype.renderReplyContainer=function(t){var u=this.props,v=u.commentCounts[t.id],w=u.repliesExpandedMap[t.id],x=!w&&t.interestingReplyId,y=u.ranges[t.id],z=void 0,aa=void 0;if(w||t.interestingReplyId){z=u.repliesMap[t.id];aa=y.getOffset();if(x){var ba=z.filter(function(wa){return wa.id===t.interestingReplyId;});if(ba.length!==1){c('LogHistory').getInstance('ufi').error('comment '+t.id+' claims to have an interesting reply, '+'but there is not exactly 1 comment with that id in the reply '+'list.');z=null;}else{z=ba;aa=t.interestingReplyOffset;}}}var ca=void 0;if(z){var da=y.getOffset(),ea=y.getLength();if(x){da=aa;ea=1;}var fa=this.renderPagers(t.id,true,da,ea),ga=fa.topPager,ha=fa.bottomPager,ia=u.loggingOffset-aa;ca=this.renderCommentArray(z,ia,true,t.id);}var ja=Math.max(v-t.spamreplycount,0),ka=void 0;if(!c('UFIOrderingModeStore').isLiveStreaming(this.props.contextArgs.instanceid)&&ja&&(w&&z&&z.length>u.replySocialSentenceMaxReplies||!w&&!z)){var la=y.isLoadingPrev()||y.isLoadingNext(),ma=w&&!ga&&la,na=null;if(t.replyauthors&&t.replyauthors.length)na=u.authorProfiles[t.replyauthors[0]];ka=c('React').createElement(c('UFIReplySocialSentence.react'),{contextArgs:u.contextArgs,author:na,replies:w?z.length:ja,timestamp:t.recentreplytimestamp,onClick:function(){return this.context.dispatch(c('UFIStoryAction').toggleReplies(u.contextArgs,t.id));}.bind(this),isLoading:ma,isExpanded:w,showVerified:u.feedback.showfeaturedreplies,orderingMode:u.orderingMode});}var oa=void 0;if(w)if(t.cancomment&&u.canAddCommentMap[t.id]){var pa=false;if(ca)for(var qa=ca.length-1;qa>=0;qa--)if(ca[qa]){pa=ca[qa].props.isAuthorReply;break;}oa=this.renderReplyComposer(t,!pa);}var ra=void 0;if(ka||ga||ca||ha||oa){var sa=c('UFIComponents').applyToUFIComponents([ka,ga].concat(ca,[ha,oa]),{isFirstComponent:true},{isLastComponent:true}),ta=sa.slice(0,2);ka=ta[0];ga=ta[1];var ua=sa.slice(-2);ha=ua[0];oa=ua[1];ca=sa.slice(2,-2);var va=t.status===o.LIVE_DELETED;ra=c('React').createElement(c('UFIContainer.react'),{key:'replies'+t.id,isParentLiveDeleted:va,isReplyList:true},ka,ga,ca,ha,oa);}return ra;};s.prototype.renderReplyComposer=function(t,u){var v=this.props,w=v.contextArgs,x=v.feedback,y=this.state.editcommentid!==null,z=y&&!t.id;if(z)return null;var aa=c('UFIOrderingModeStore').isLiveStreaming(w.instanceid);return c('React').createElement(c('UFIAddComment.react'),{viewerActorID:x.actorforpost,replyCommentID:t.id,targetID:x.ownerid,initialData:null,ref:'replycomposer-'+t.id,withoutSeparator:u,editingComment:{},isEditing:false,mentionsDataSource:x.mentionsdatasource,showSendOnEnterTip:false,allowVideoAttachments:x.allowvideoattachments&&!aa,allowPhotoAttachments:x.allowphotoattachments&&!aa,allowStickerAttachments:x.allowstickerattachments&&!aa,allowGifAttachments:x.allowgifattachments&&!aa,allowCommentMarkdown:x.iscommentmarkdowneligible,contextArgs:w,subtitle:x.subtitle,isQAndA:x.isqanda});};s.prototype.renderEditCommentBox=function(t){var u=this.props,v=u.contextArgs,w=u.feedback,x=babelHelpers['extends']({},v);delete x.addcommentautoflip;delete x.collapseaddcomment;delete x.hideActorPhoto;delete x.issnowlift;delete x.loggedOutLinkConfig;delete x.monitorHeight;delete x.sht;delete x.viewoptionstypeobjects;delete x.viewoptionstypeobjectsorder;return c('React').createElement(c('UFIAddComment.react'),{key:'editing_comment'+t.id,viewerActorID:w.actorforpost,targetID:w.ownerid,mentionsDataSource:w.mentionsdatasource,contextArgs:x,isEditing:true,editingComment:t,allowVideoAttachments:w.allowvideoattachments,allowPhotoAttachments:w.allowphotoattachments,allowStickerAttachments:w.allowstickerattachments,allowGifAttachments:w.allowgifattachments,isQAndA:w.isqanda});};s.prototype.renderComment=function(t,u,v,w,x,y,z,aa){var ba=this.props,ca=ba.feedback,da=ca.actorforpost===t.author,ea=c('UFIInstanceState').getKeyForInstance(ba.contextArgs.instanceid,'locallycomposed'),fa=t.islocal||ea&&ea[t.id],ga=ca.showremovemenu||ca.viewerid===t.author,ha=ca.canremoveall&&ca.isownerpage&&!da,ia=ba.source!=m.INTERN,ja=!!t.parentcommentid,ka=true;if(ja&&t.parentcommentid in this.props.canReplyMap&&this.props.canReplyMap[t.parentcommentid]!==null)ka=this.props.canReplyMap[t.parentcommentid];var la=!!t.isfeatured,ma=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.COMMENT,u),na=new (c('URI'))(ba.commentPermalinks[t.id]).addQueryData({comment_tracking:ma}).toString();return c('React').createElement(c('UFIComment.react'),{key:c('UFIComments').getRenderKey(t.id),isFirst:v,isLast:w,showReplyLink:x,hasPartialBorder:y,comment:t,authorProfiles:ba.authorProfiles,viewerIsAuthor:da,feedback:ca,'data-ft':ma,contextArgs:ba.contextArgs,hideAsSpamForPageAdmin:ha,isLocallyComposed:fa,isFeatured:la,parentCanComment:ka,permalink:na,showPermalink:ia,showRemoveReportMenu:ga,focusOnMount:t.id===ba.commentIDToFocusOnMount,orderingMode:ba.orderingMode,featuredCommentIDs:ba.featuredCommentIDs,markViewerHasInteracted:this.state.viewerHasClickedSeeMore?c('emptyFunction'):function(){return this.setState({viewerHasClickedSeeMore:true});}.bind(this),isLivePinnedComment:z,showTranslation:aa||!!t.translationdata});};s.prototype.renderPagers=function(t,u,v,w){var x=this.props;if(this.$StaticUFI16(t,w)||this.$StaticUFI11()||!u&&x.hideToplevelPager)return {topPager:null,bottomPager:null};Number.isInteger(x.commentCounts[t])||j(0);Number.isInteger(x.deletedCounts[t])||j(0);Number.isInteger(w)||j(0);return c('UFIPagerGenerator').renderPagers({commentCount:x.commentCounts[t],contextArgs:x.contextArgs,currentLength:w,currentOffset:v,deletedCount:x.deletedCounts[t],feedback:x.feedback,onPageCallback:function(y,z){this.context.dispatch(c('UFIStoryAction').pageInComments(x.contextArgs,t,y,z));}.bind(this),orderingMode:x.orderingMode,range:x.ranges[t],targetID:t});};s.prototype.$StaticUFI31=function(t){return c('DOM').scry(t,'[name="add_comment_text_text"]').concat(c('DOM').scry(t,'[name="add_comment_text"]')).find(function(u){return !c('Parent').byClass(u,'UFIReplyList');});};s.prototype.$StaticUFI25=function(){return c('UFICommentOrdering').inverted(this.props.orderingMode);};s.prototype.hasReactions=function(t,u){return (t.displayreactions&&u.hasReactions&&(u.feedbackMode==='none'||u.feedbackMode==='toggle'));};s.contextTypes={dispatch:p.func};s.defaultProps={commentIDToFocusOnMount:null,focusReply:null,canReplyMap:{},isActiveLoading:{},repliesExpandedMap:{},hasPagedToplevel:false,loadingSpamIDs:{},loadingTranslationsMap:{}};f.exports=s;}),null);
__d('CommercialBreakUFIOverlay.react',['ix','cx','fbt','Image.react','React','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:"_29y7"},c('React').createElement(c('Image.react'),{className:"_247x",src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/heart_16_fig-light-30.png")}),' ',j._("Watch ads to support {video owner name}",[j.param('video owner name',' '+this.props.ownerName)])));};function n(){'use strict';k.apply(this,arguments);}n.propTypes={ownerName:m.string.isRequired};f.exports=n;}),null);
__d('UFIBlingBox.react',['cx','fbt','NumberFormat','React','UFIBlingItem.react','UFIConfig','UFIReactionTypes'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=[],o='',p=this.props,q=p.likes,r=p.likesreduced,s=p.reactionCount,t=p.reactionCountMap,u=p.reactionCountReduced;if(q||s){var v=t&&t[c('UFIReactionTypes').LIKE]['default']!==s;n.push(c('React').createElement(c('UFIBlingItem.react'),{className:n.length>0?"mls":'',contextArgs:this.props.contextArgs,count:v?s:q,countreduced:v?u:r,iconClassName:'UFIBlingBoxLikeIcon',itemKey:v?'reaction':'like',key:'like'}));o+=this.props.likes==1?i._("1 like"):i._({"*":"{count} likes"},[i.param('count',this.props.likes,[0])]);o+=' ';}if(this.props.comments){var w=this.props.commentsreduced;if(this.props.contextArgs.islivestreaming)w=c('NumberFormat').formatIntegerWithDelimiter(this.props.comments,c('UFIConfig').numberDelimiter);n.push(c('React').createElement(c('UFIBlingItem.react'),{className:n.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:w,iconClassName:'UFIBlingBoxCommentIcon',itemKey:'comment',key:'comment'}));o+=this.props.comments==1?i._("1 comment"):i._({"*":"{count} comments"},[i.param('count',this.props.comments,[0])]);o+=' ';}if(this.props.reshares){n.push(c('React').createElement(c('UFIBlingItem.react'),{className:n.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:'UFIBlingBoxReshareIcon',itemKey:'reshare',key:'reshare'}));o+=this.props.reshares==1?i._("1 share"):i._({"*":"{count} shares"},[i.param('count',this.props.reshares,[0])]);}if(this.props.readOnly){return (c('React').createElement('span',{'aria-label':o},n));}else{var x=this.props.contextArgs.commentajaxify;return (c('React').createElement('a',{ajaxify:x,href:this.props.permalink,'data-ft':this.props['data-ft'],'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'aria-label':o,onClick:this.props.onClick,rel:x?'dialog':'ignore'},n));}};function m(){j.apply(this,arguments);}m.propTypes={contextArgs:l.object.isRequired,'data-ft':l.string,'data-comment-prelude-ref':l.string,comments:l.number,commentsreduced:l.string,likes:l.number,likesreduced:l.string,nfb:l.number,onClick:l.func,permalink:l.string,reactionCount:l.number,reactionCountMap:l.object,reactionCountReduced:l.string,reshares:l.number,resharesreduced:l.string,readOnly:l.bool};f.exports=m;}),null);
__d('UFIReactionsBlingSocialSentence.react',['cx','fbt','ActorURI','BanzaiLogger','Bootloader','NumberFormat','PagesPrivateReplyConstants','ProfileBrowserLink','ProfileBrowserTypes','React','Tooltip.react','UFIPrivateReplyIndicator.react','UFIReactionsSocialSentence.react','UFIConfig','URI','XUFICommentTooltipController','XUFIGroupSeenByProfileDialogController','XUFIGroupSeenByProfileBrowserController','XUFIShareTooltipController','XUIText.react'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.onCommentsClick=function(event){var r=this.props.contextArgs.commentajaxify;if(r){if(this.props.contextArgs.showtheaterforcomment){this.launchSnowlift(r,event.currentTarget);}else this.launchDialog(r,event.currentTarget);}else if(this.props.onCommentClick)this.props.onCommentClick(event);this.logCountAction('comments','click');event.preventDefault();}.bind(this),this.onSeensClick=function(event){var r=this.props.feedback,s=c('XUFIGroupSeenByProfileDialogController').getURIBuilder().setInt('id',r.entidentifier).getURI();s=c('ActorURI').create(s,r.actorforpost);this.launchDialog(s.toString(),event.currentTarget);this.logCountAction('seens','click');event.preventDefault();}.bind(this),this.onSharesClick=function(event){var r=this.props.feedback,s=r.sharefbid||r.targetfbid,t=c('ActorURI').create(new (c('URI'))('/ajax/shares/view').setQueryData({target_fbid:s}),r.actorforpost);this.launchDialog(t.toString(),event.currentTarget);this.logCountAction('shares','click');event.preventDefault();}.bind(this),this.onViewsClick=function(event){this.logCountAction('views','click');}.bind(this),this.onViewsHover=function(event){if(this.canSeeConsolidatedTooltip())this.logCountAction('views','hover');}.bind(this),this.launchSnowlift=function(r,s){c('Bootloader').loadModules(["PhotoSnowlift"],function(t){t.bootstrap(r,s);},'UFIReactionsBlingSocialSentence.react');},this.launchDialog=function(r,s){c('Bootloader').loadModules(["AsyncDialog"],function(t){t.bootstrap(r,s,'dialog');},'UFIReactionsBlingSocialSentence.react');},this.logCountAction=function(r,s){c('BanzaiLogger').log('WebReactionsBlingLoggerConfig',{feedback_id:this.props.feedback.entidentifier,'interface':'www',action:s,target_type:'count',target_subtype:r});}.bind(this),this.renderComments=function(){var r=this.props.contextArgs.islivestreaming;if(!this.props.commentCount||this.props.contextArgs.feedbackMode==='expanded'&&!r)return null;var s=isNaN(this.props.feedback.commentcountreduced)&&!r?this.props.feedback.commentcountreduced:c('NumberFormat').formatIntegerWithDelimiter(this.props.commentCount,c('UFIConfig').numberDelimiter),t=c('ActorURI').create(c('XUFICommentTooltipController').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return (c('React').createElement('a',{'aria-live':'polite',className:"_ipm",'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-uri':t,href:this.props.href,onClick:this.onCommentsClick,role:'button'},this.props.children,i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i.param('count',s),i['enum'](this.props.commentCount===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})])));}.bind(this),this.renderSeens=function(){if(this.props.contextArgs.entstream||!this.props.feedback.seencount)return null;var r=this.props.feedback,s=r.seencount,t=void 0;if(r.seenbyall){t=i._("Seen by everyone");}else if(s===1){t=i._("Seen by 1");}else t=i._("Seen by {count}",[i.param('count',s)]);var u=new (c('URI'))('/ajax/ufi/seen_list_hovercard.php').setQueryData({id:r.entidentifier}),v=c('XUFIGroupSeenByProfileBrowserController').getURIBuilder().setInt('id',r.entidentifier).getURI();v=c('ActorURI').create(v,r.actorforpost);return (c('React').createElement('span',{ref:'seen_by_text'},c('React').createElement('a',{href:v,'data-hovercard':u.toString(),className:"_ipm",onClick:this.onSeensClick},t)));}.bind(this),this.renderShares=function(){if(!this.props.feedback.sharecount)return null;var r=this.props.feedback.sharefbid||this.props.feedback.targetfbid,s=c('ActorURI').create(new (c('URI'))('/shares/view').setSubdomain('www').setQueryData({id:r}),this.props.feedback.actorforpost),t=c('ActorURI').create(c('XUFIShareTooltipController').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return (c('React').createElement('a',{'aria-live':'polite',className:"_ipm",'data-hover':'tooltip','data-tooltip-uri':t,href:s,onClick:this.onSharesClick,role:'button'},i._({"Share":"{count} Share","Shares":"{count} Shares"},[i.param('count',this.props.feedback.sharecountreduced),i['enum'](this.props.feedback.sharecount===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})])));}.bind(this),this.renderViews=function(){var r=this.props.contextArgs.viewCount,s=null;if(this.canSeeConsolidatedTooltip())s=this.renderViewsTooltip();if(!r)return null;return (c('React').createElement(c('Tooltip.react'),{tooltip:s,'data-hover':'tooltip','data-tooltip-alignh':'left','data-tooltip-position':'above','aria-live':'polite',className:"_ipm",onClick:this.onViewsClick,onMouseOver:this.onViewsHover},i._({"View":"{count} View","Views":"{count} Views"},[i.param('count',this.props.contextArgs.viewCountReduced),i['enum'](r==='1'?'View':'Views',{View:'View',Views:'Views'})])));}.bind(this),this.canSeeConsolidatedTooltip=function(){var r=this.props.contextArgs.postViewCount,s=this.props.contextArgs.totalPosts,t=this.props.contextArgs.otherPostsViewCount;return !!s&&s>1&&!!r&&!!t;}.bind(this),this.renderViewsTooltip=function(){var r=this.props.contextArgs.totalPosts,s=this.props.contextArgs.postViewCount,t=this.props.contextArgs.otherPostsViewCount,u=r-1;return (c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{weight:'bold'},i._("Video Posted {number of posts} Times",[i.param('number of posts',r)])),c('React').createElement('br',null),i._({"view":"{post views} view from this post","views":"{post views} views from this post"},[i.param('post views',s),i['enum'](s==='1'?'view':'views',{view:'view',views:'views'})]),c('React').createElement('br',null),i._({"view":{"post":"{total views} view from {posts count} other post","posts":"{total views} view from {posts count} other posts"},"views":{"post":"{total views} views from {posts count} other post","posts":"{total views} views from {posts count} other posts"}},[i.param('total views',t),i['enum'](t==='1'?'view':'views',{view:'view',views:'views'}),i.param('posts count',u),i['enum'](u===1?'post':'posts',{post:'post',posts:'posts'})])));}.bind(this),this.renderPrivateReply=function(){var r=this.props.feedback.messagereplycontext;if(!r||r.status!==c('PagesPrivateReplyConstants').Status.ALREADY_REPLIED)return null;return (c('React').createElement('span',{className:"_ipm"},c('React').createElement(c('UFIPrivateReplyIndicator.react'),{replyStatus:r.status})));}.bind(this),n;}l.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:"_ipn clearfix"},c('React').createElement('div',{className:"_ipo"},c('React').createElement('div',{className:"_36_q"},this.renderComments()),c('React').createElement('div',{className:"_36_q"},this.renderShares()),c('React').createElement('div',{className:"_36_q"},this.renderSeens()),c('React').createElement('div',{className:"_36_q"},this.renderViews()),c('React').createElement('div',{className:"_36_q"},this.renderPrivateReply())),c('React').createElement(c('UFIReactionsSocialSentence.react'),{feedback:this.props.feedback,contextArgs:this.props.contextArgs})));};f.exports=l;}),null);
__d('UFIBling.react',['CommentPrelude','React','TrackingNodes','UFIBlingBox.react','UFIInstanceState','UFIReactionsBlingSocialSentence.react','UFIToplevelPagedCommentList','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k,l){i.constructor.call(this,k,l);}j.prototype.render=function(){var k=this.props.contextArgs,l=this.props.feedbackTarget,m=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.BLINGBOX),n=l.permalink;if(k.showtheaterforcomment&&k.commentredirecturi){n=k.commentredirecturi;k=Object.freeze(babelHelpers['extends']({},k,{commentajaxify:k.commentredirecturi}));}var o=new (c('URI'))(n).addQueryData({comment_tracking:m}).toString(),p=c('UFIToplevelPagedCommentList').getCommentList(k.ftentidentifier,l.defaultcommentorderingmode).getDisplayedCommentCount(),q=(k.feedbackMode==='none'||k.feedbackMode==='toggle')&&k.hasReactions&&l.displayreactions,r=function(event){event.preventDefault();if(q&&k.feedbackMode==='expanded'){this.$UFIBling1();}else{c('CommentPrelude').onBlingboxClick(event.currentTarget);if(!k.disableinlinetoggle)this.props.onCommentVisibilityChanged&&this.props.onCommentVisibilityChanged();}}.bind(this);if(q){return (c('React').createElement(c('UFIReactionsBlingSocialSentence.react'),{commentCount:p,contextArgs:k,'data-comment-prelude-ref':'action_link_bling','data-ft':m,feedback:l,href:o,onCommentClick:r}));}else{var s=void 0,t=void 0,u=void 0;if(k.hasReactions){s=l.reactioncount;t=l.reactioncountmap;u=l.reactioncountreduced;}return (c('React').createElement(c('UFIBlingBox.react'),{comments:p,commentsreduced:l.commentcountreduced,contextArgs:k,'data-comment-prelude-ref':'action_link_bling','data-ft':m,likes:l.likecount,likesreduced:l.likecountreduced,nfb:l.nfbcount,onClick:r,permalink:o,reactionCount:s,reactionCountMap:t,reactionCountReduced:u,reshares:l.sharecount,resharesreduced:l.sharecountreduced,readOnly:k.readonly}));}};j.prototype.$UFIBling1=function(){c('UFIInstanceState').updateState(this.props.contextArgs.instanceid,'commentsToggling',true);};f.exports=j;}),null);
__d('UFICommentActionLink.react',['React','UFICommentLink.react','UFISharedDispatcher','UFIStoryAction'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=this.props.contextArgs,m=l.commentajaxify,n=l.commentredirecturi,o=l.showtheaterforcomment,p=l.loggedOutLinkConfig;if(!m&&p&&p.showCommentLink)m=p.commentAjaxifyURI;if(m){return (c('React').createElement(c('UFICommentLink.react'),{ajaxify:m,rel:o?'theater':'dialog'}));}else if(n)return (c('React').createElement(c('UFICommentLink.react'),{href:n,rel:o?'theater':''}));return (c('React').createElement(c('UFICommentLink.react'),{onClick:function(event){event.preventDefault();c('UFISharedDispatcher').dispatch(c('UFIStoryAction').showComments(this.props.contextArgs));}.bind(this)}));};function k(){h.apply(this,arguments);}k.propTypes={contextArgs:j.object.isRequired};f.exports=k;}),null);
__d('UFILikeActionLink.react',['React','UFILikeLink.react','UFIReactionsLinkImpl.react','UFIReactionTypes','UFIStoryAction'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.onClick=function(event){event.preventDefault();var q=this.props.feedback.hasviewerliked;this.context.dispatch(c('UFIStoryAction').changeReaction(this.props.contextArgs,q?c('UFIReactionTypes').NONE:c('UFIReactionTypes').LIKE,event.target));}.bind(this),m;}k.prototype.render=function(){var l=this.props,m=l.contextArgs,n=l.feedback;if(!m.showLikeNuxForGroupMallAds&&m.hasReactions&&n.canviewerreact&&c('UFIReactionsLinkImpl.react')){return (c('React').createElement(c('UFIReactionsLinkImpl.react'),{contextArgs:m,nuxConfig:m.reactionsNuxConfig,reaction:n.viewerreaction,suggestedReaction:n.suggestedreaction,supportedReactions:n.supportedreactions}));}else{var o=m.loggedOutLinkConfig,p=null;if(o&&o.showLikeLink)p=o.likeAjaxifyURI;return (c('React').createElement(c('UFILikeLink.react'),{ajaxify:p,likeAction:!n.hasviewerliked,onClick:this.onClick,rel:p?'dialog':null,forcelegacyrendering:m.forcelegacyrendering,showLikeNuxForGroupMallAds:m.showLikeNuxForGroupMallAds,likeNuxContent:m.groupMallAdsCommentNuxContent}));}};k.contextTypes={dispatch:j.func};k.propTypes={feedback:j.object.isRequired,contextArgs:j.object.isRequired};f.exports=k;}),null);
__d('UFIShareActionLink.react',['ActorURI','Bootloader','React','UFIShareNowMenuBootloader.react','UFIShareLink.react','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={confirmed:false,openOnInitOverride:false},m;}k.prototype.render=function(){var l=this.state,m=l.confirmed,n=l.openOnInitOverride,o=this.props,p=o.shareURI,q=o.shareRel,r=o.shareNowMenuURI,s=o.feedbackReferrer,t=o.feedbackSource,u=o.feedbackTarget,v=o.misinformationConfirmDialogURI;if(v&&!m)return (c('React').createElement(c('UFIShareLink.react'),{href:'#',onClick:function(){return (this.$UFIShareActionLink1(v));}.bind(this)}));var w={feedback_referrer:s,feedback_source:t},x=u&&u.actorforpost;if(x){p=p&&c('ActorURI').create(p,x);r=r&&new (c('URI'))(r).addQueryData('actor_id',x).toString();}return r?c('React').createElement(c('UFIShareNowMenuBootloader.react'),{endpoint:r,endpointData:w,openOnInitOverride:n}):c('React').createElement(c('UFIShareLink.react'),{href:new (c('URI'))(p).addQueryData(w),rel:q,openOnInit:n});};k.prototype.$UFIShareActionLink1=function(l){var m='MISINFORMATION_RESHARE_ALERT_FUNNEL';c('Bootloader').loadModules(["AsyncDialog","AsyncRequest","FunnelLogger"],function(n,o,p){p.startFunnel(m);n.send(new o(l),function(q){q.subscribe('confirm',function(){this.setState({confirmed:true,openOnInitOverride:true});p.appendAction(m,'continue');p.endFunnel(m);q.hide();}.bind(this));q.subscribe('cancel',function(){p.appendAction(m,'cancel');p.endFunnel(m);q.hide();});}.bind(this));}.bind(this),'UFIShareActionLink.react');};k.propTypes={feedbackTarget:j.object,shareURI:j.string,shareRel:j.string,shareNowMenuURI:j.string,shareLinkHref:j.string,feedbackReferrer:j.string,feedbackSource:j.number,misinformationConfirmDialogURI:j.string};f.exports=k;}),null);
__d('UFIActionLinks.react',['cx','fbt','BanzaiODS','BootloadedComponent.react','FBFeedLocations','FeedbackSourceType','JSResource','OnVisible','Parent','React','UFIBling.react','UFICommentActionLink.react','UFIConfig','UFIInstanceAction','UFILikeActionLink.react','UFIPrivateReplyLink.react','UFIShareActionLink.react','UFISharedDispatcher','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l='ufi-share-link.render';j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.componentDidMount=function(){var n=this.$UFIActionLinks2();c('BanzaiODS').bumpEntityKey('feedback',n);if(n===l)this.$UFIActionLinks1=new (c('OnVisible'))(this.refs.root,function(){c('BanzaiODS').bumpEntityKey('feedback','ufi-share-link.rendered-vpv');if(this.$UFIActionLinks1){this.$UFIActionLinks1.remove();this.$UFIActionLinks1=null;}}.bind(this),true);};m.prototype.componentWillUnmount=function(){if(this.$UFIActionLinks1){this.$UFIActionLinks1.remove();this.$UFIActionLinks1=null;}};m.prototype.renderActorSelector=function(){if(this.props.hideActorSelector)return null;var n=this.props.contextArgs,o=n.actorSelectorConfig,p=n.hasReactions;if(!o)return null;var q=o.module;return (c('React').createElement('div',{className:"_40yk"+(p?' '+"_pbn":'')},c('React').createElement(q,babelHelpers['extends']({},o.props,{nuxHoverContext:c('Parent').byTag(this.refs.root,'form')}))));};m.prototype.renderActionList=function(){var n=[this.renderLikeLink(),this.renderCommentLink(),this.renderShareLink(),this.renderPrivateReplyLink(),this.renderEmbedLink()].filter(function(r){return r;}).map(function(r,s){return (c('React').createElement('span',{key:s},r));}),o=null;if(this.props.contextArgs.quickFeedback){var p=this.props.contextArgs.quickFeedback,q=p.UFIQuickFeedbackLink;o=c('React').createElement(q,p);}if(n.length||o){return (c('React').createElement('div',{className:"_42nr"},n,o));}else return null;};m.prototype.renderBling=function(){if(this.props.contextArgs.showBling)return (c('React').createElement(c('UFIBling.react'),{contextArgs:this.props.contextArgs,feedbackTarget:this.props.feedbacktarget,onCommentVisibilityChanged:function(){return (c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').toggleComments(this.props.contextArgs)));}.bind(this)}));return null;};m.prototype.renderLikeLink=function(){var n=this.props,o=n.contextArgs,p=n.feedbacktarget,q=o.loggedOutLinkConfig;if(!p.hasviewerliked&&!p.viewercanlike&&!(q&&q.showLikeLink))return null;return (c('React').createElement(c('UFILikeActionLink.react'),{feedback:p,contextArgs:o}));};m.prototype.renderCommentLink=function(){var n=this.props.contextArgs.loggedOutLinkConfig;if(!this.props.feedbacktarget.cancomment&&!(n&&n.showCommentLink)){var o=this.props.contextArgs.disabledCommentTooltip;if(o)return (c('React').createElement('span',null,c('React').createElement('span',{className:"_1ysv",'data-hover':'tooltip','data-tooltip-content':o},i._("Comment"))));return null;}return (c('React').createElement(c('UFICommentActionLink.react'),{contextArgs:this.props.contextArgs}));};m.prototype.$UFIActionLinks2=function(){var n=this.props.contextArgs.shareLinkConfig;if(!n)return 'ufi-share-link.unavailable';var o=this.props.contextArgs.loggedOutLinkConfig;if(o&&o.showShareLink)return 'ufi-share-link.loggedout';return l;};m.prototype.renderShareLink=function(){var n=this.props.contextArgs.shareLinkConfig;if(!n)return null;var o=this.props.contextArgs.loggedOutLinkConfig;if(o&&o.showShareLink)n.shareURI=o.shareAjaxifyURI;return (c('React').createElement(c('UFIShareActionLink.react'),babelHelpers['extends']({feedbackTarget:this.props.feedbacktarget,feedbackReferrer:this.props.contextArgs.feedbackReferrer,feedbackSource:this.props.contextArgs.source},n)));};m.prototype.renderPrivateReplyLink=function(){var n=this.props,o=n.contextArgs,p=n.feedbacktarget,q=p.actorforpost,r=p.messagereplycontext;if(!c('UFIPrivateReplyLink.react').willRender(r,q))return null;return (c('React').createElement(c('UFIPrivateReplyLink.react'),{actorID:q,activityID:o.ftentidentifier,context:r,seeResponseLabel:false}));};m.prototype.renderEmbedLink=function(){var n=this.props.contextArgs.shareLinkConfig;if(!n||!n.embedURI)return null;return (c('React').createElement('a',{href:n.embedURI,rel:'dialog',className:"_2g1w"},i._("Embed")));};m.prototype.renderSearchFeedback=function(){var n=this.props.contextArgs.inlineSearchFeedbackConfig;if(!n)return null;return (c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('InlineFeedback.react').__setRef('UFIActionLinks.react')},n)));};m.prototype.renderCommentOrderingModeSelector=function(){if(!this.props.showCommentOrderingModeSelector)return null;return (c('React').createElement('div',{className:"_3csb"},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('UFIOrderingModeSelectorContainer.react').__setRef('UFIActionLinks.react'),contextArgs:this.props.contextArgs,feedback:this.props.feedbacktarget})));};m.prototype.renderCrowdsourceLabelingContainer=function(){if(!c('UFIConfig').showUFICrowdsource)return null;return (c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('UFICrowdsourceLabelingContainer.react').__setRef('UFIActionLinks.react'),feedback:this.props.feedbacktarget,contextArgs:this.props.contextArgs}));};m.prototype.renderLayout=function(n,o,p){o=o.map(function(q,r){return q&&c('React').createElement('div',{className:"_3m9g",key:r},q);}).filter(function(q){return q;});if(!n&&o.length===0)return null;return (c('React').createElement('div',{className:c('joinClasses')("_3399",p)},o,c('React').createElement('div',{className:"_524d"},n)));};m.prototype.shouldRenderActionButtons=function(){var n=null,o=this.props.contextArgs.source;if(this.props.contextArgs.feedcontext)try{n=JSON.parse(this.props.contextArgs.feedcontext).location_type;}catch(p){}if(n===c('FBFeedLocations').GOODWILL_THROWBACK_PERMALINK||n===c('FBFeedLocations').GOODWILL_THROWBACK_PROMOTION||n===c('FBFeedLocations').GOODWILL_THROWBACK_SHARE||n===c('FBFeedLocations').GROUP_SUGGESTIONS_WITH_STORY||o===c('FeedbackSourceType').LIVE_WWW_BROADCASTING)return false;return true;};m.prototype.hasCounts=function(){return this.props.feedbacktarget.commentcountreduced||this.props.feedbacktarget.sharecountreduced||this.props.feedbacktarget.seencount||this.props.contextArgs.viewCount;};m.prototype.render=function(){var n=this.renderActorSelector(),o=this.renderSearchFeedback(),p=[],q=[],r=null,s=this.renderBling();if(s){q.push(n);if(this.hasCounts()){r=this.renderLayout(null,[o],"_1f6t");}else q.push(o);}else{p.push(n);p.push(o);}p.push(this.renderCommentOrderingModeSelector());var t="_1f6t"+(this.props.contextArgs.hasReactions?' '+"_4_dr":''),u=this.shouldRenderActionButtons()?this.renderLayout(this.renderActionList(),p,"_a7s clearfix"):null,v=this.renderCrowdsourceLabelingContainer();return (c('React').createElement('div',{ref:'root'},r,this.renderLayout(s,q,t),u,v));};function m(){j.apply(this,arguments);}f.exports=m;}),null);
__d('UFIActionHeader.react',['CommercialBreakUFIOverlay.react','FluxContainer','React','UFIActionLinks.react','UFICommercialBreakStore','UFIDispatcherContext.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.state={inCommercialBreak:false},l;}j.getStores=function(){return [c('UFICommercialBreakStore')];};j.calculateState=function(k,l){var m=l.contextArgs.instanceid;return {inCommercialBreak:c('UFICommercialBreakStore').getValueFor(m)};};j.prototype.render=function(){var k=this.props,l=k.contextArgs,m=k.dispatcher,n=k.feedbacktarget,o=k.showCommentOrderingModeSelector,p=k.stores;if(this.state.inCommercialBreak){return (c('React').createElement(c('CommercialBreakUFIOverlay.react'),{ownerName:l.ownerName}));}else return (c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:m,stores:p},c('React').createElement(c('UFIActionLinks.react'),{contextArgs:l,feedbacktarget:n,showCommentOrderingModeSelector:o})));};f.exports=c('FluxContainer').create(j,{withProps:true,pure:false});}),null);
__d("CommentLikeWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"910567955744994",queryID:"910567959078327"});}),null);
__d('UFICommentLikeSubscription',['CommentLikeWebGraphQLSubscription','BaseGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/comment_like_subscribe/top_level_feedback_id_'+j;},_getQueryID:function i(){return c('CommentLikeWebGraphQLSubscription').getLegacyQueryID();},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),top_level_feedback_id:j})};},_getSubscriptionCallName:function i(){return 'comment_like_subscribe';}});f.exports=h;}),null);
__d("CommentCreateWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"889113921223731",queryID:"889113954557061"});}),null);
__d('UFICommentSubscription',['CommentCreateWebGraphQLSubscription','BaseGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/comment_create_subscribe/top_level_feedback_id_'+j;},_getQueryID:function i(){return c('CommentCreateWebGraphQLSubscription').getLegacyQueryID();},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:j})};},_getSubscriptionCallName:function i(){return 'comment_create_subscribe';}});f.exports=h;}),null);
__d('UFIFeaturedReplyCommentListImpl',['UFIReplyCommentListImpl','WebCommentViewOption'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIReplyCommentListImpl'));i=h&&h.prototype;function j(k,l,m,n){i.constructor.call(this,k,l,c('WebCommentViewOption').FEATURED);var o=0,p=m.length;this.updateCommentCount(p);this.addCommentIDs(o,p,m);var q={};n.forEach(function(r){if(r.id)q[r.id]=r;});m.forEach(function(r){this.addOrUpdateComment(q[r]);}.bind(this));}j.prototype.fetchComments=function(k,l,m){};f.exports=j;}),null);
__d('UFIFeaturedToplevelCommentListImpl',['UFIToplevelPagedCommentListImpl','WebCommentViewOption'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIToplevelPagedCommentListImpl'));i=h&&h.prototype;function j(k,l,m){i.constructor.call(this,k,c('WebCommentViewOption').FEATURED);var n=0,o=l.length;this.updateCommentCount(o);this.addCommentIDs(n,o,l);var p={};m.forEach(function(q){if(q.id)p[q.id]=q;});l.forEach(function(q){this.addOrUpdateComment(p[q]);}.bind(this));}j.prototype.fetchComments=function(k,l,m){};f.exports=j;}),null);
__d('UFIFeedbackFilters',[],(function a(b,c,d,e,f,g){'use strict';var h={getRequestedIDs:function i(j){var k=[];if(j.reactorids)k=k.concat(j.reactorids);if(j.actorforpost)k=k.concat(j.actorforpost);return k;}};f.exports=h;}),null);
__d('UFIFetcher',['Promise','ShortProfiles','UFIRange'],(function a(b,c,d,e,f,g){'use strict';var h={fetchShortProfiles:function i(j){return new (c('Promise'))(function(k,l){return (c('ShortProfiles').getMulti(j,k));});},fetchComments:function i(j,k,l){return new (c('Promise'))(function(m,n){return (j.getComments(k.getOffset(),k.getLength(),l,m));}).then(function(m){return Object.values(m);});},fetchCommentsOrThrow:function i(j,k,l){return Object.values(j.getCommentsOrThrow(k,l));}};f.exports=h;}),null);
__d("FeedbackLikeWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"836675696467554",queryID:"865890153546108"});}),null);
__d('UFILikeSubscription',['FeedbackLikeWebGraphQLSubscription','BaseGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/feedback_like_subscribe/feedback_id_'+j;},_getQueryID:function i(){return c('FeedbackLikeWebGraphQLSubscription').getLegacyQueryID();},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:j})};},_getSubscriptionCallName:function i(){return 'feedback_like_subscribe';}});f.exports=h;}),null);
__d('FacecastStreamingCommentDelayTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:FacecastStreamingCommentDelayLoggerConfig',this.$FacecastStreamingCommentDelayTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:FacecastStreamingCommentDelayLoggerConfig',this.$FacecastStreamingCommentDelayTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$FacecastStreamingCommentDelayTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$FacecastStreamingCommentDelayTypedLogger1=babelHelpers['extends']({},this.$FacecastStreamingCommentDelayTypedLogger1,j);return this;};h.prototype.setCommentID=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.comment_id=j;return this;};h.prototype.setEvent=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.event=j;return this;};h.prototype.setProtocol=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.protocol=j;return this;};h.prototype.setServerTimestamp=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.server_timestamp=j;return this;};h.prototype.setVC=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.vc=j;return this;};var i={comment_id:true,event:true,protocol:true,server_timestamp:true,vc:true};f.exports=h;}),null);
__d('FacecastStreamingCommentHealthTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:FacecastStreamingCommentHealthLoggerConfig',this.$FacecastStreamingCommentHealthTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:FacecastStreamingCommentHealthLoggerConfig',this.$FacecastStreamingCommentHealthTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$FacecastStreamingCommentHealthTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$FacecastStreamingCommentHealthTypedLogger1=babelHelpers['extends']({},this.$FacecastStreamingCommentHealthTypedLogger1,j);return this;};h.prototype.setCommentID=function(j){this.$FacecastStreamingCommentHealthTypedLogger1.comment_id=j;return this;};h.prototype.setGqlsContext=function(j){this.$FacecastStreamingCommentHealthTypedLogger1.gqls_context=j;return this;};h.prototype.setProtocol=function(j){this.$FacecastStreamingCommentHealthTypedLogger1.protocol=j;return this;};h.prototype.setSessionID=function(j){this.$FacecastStreamingCommentHealthTypedLogger1.session_id=j;return this;};h.prototype.setVC=function(j){this.$FacecastStreamingCommentHealthTypedLogger1.vc=j;return this;};var i={comment_id:true,gqls_context:true,protocol:true,session_id:true,vc:true};f.exports=h;}),null);
__d("LiveVideoCommentCreateWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"889113927890397",queryID:"889113951223728"});}),null);
__d('UFILiveVideoCommentSubscription',['LiveVideoCommentCreateWebGraphQLSubscription','BaseGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/live_video_comment_create_subscribe/feedback_id_'+j;},_getQueryID:function i(){return c('LiveVideoCommentCreateWebGraphQLSubscription').getLegacyQueryID();},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:j})};},_getSubscriptionCallName:function i(){return 'live_video_comment_create_subscribe';}});f.exports=h;}),null);
__d("XLiveStreamingCommentsAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videos\/livecomments\/",{eft_id:{type:"String",required:true}});}),null);
__d("XLiveStreamingRankingExperimentAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videos\/livecomments\/exp\/",{eft_id:{type:"String",required:true}});}),null);
__d('UFILiveStreamingComments',['fbt','invariant','Arbiter','AsyncRequest','BanzaiODS','CurrentUser','FacecastStreamingCommentDelayTypedLogger','FacecastStreamingCommentHealthTypedLogger','Map','Set','StreamingReactionsTrayEvents','UFICentralUpdates','UFIConfig','UFIConstants','UFIFeedbackTargets','UFILiveVideoCommentSubscription','UFISubscriptionUpdates','UFIToplevelStreamedCommentList','XLiveStreamingCommentsAsyncController','XLiveStreamingRankingExperimentAsyncController','clearInterval','setInterval','uuid'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=new (c('Map'))(),k=10000,l=10000,m=2000;c('BanzaiODS').setEntitySample('feedback',.0001);function n(o,p,q,r){var s,t=this,u;this.eftID=o;this.totalCommentCount=p;this.tailCommentFBID=q;this.streamingMode=r;this.queue=[];this.ufiPayloadBuffer=[];this.fireworksAnimating=false;this.localCommentBodies=new (c('Set'))();this.errorCount=0;this.mayShortCircuitRendering=false;this.loggedComments=new (c('Set'))();this.mayLogExposure=true;if(this.streamingMode==='Polling'){this.interval=c('setInterval')(function(){if(this.queue.length>c('UFIConfig').facecastWWWCommentQueueThreshold){this.renderNextComment();return;}new (c('AsyncRequest'))().setURI(this.getNextURI()).setHandler(function(v){switch(v.payload.status){case 'streaming':this.$UFILiveStreamingComments1(v.payload);this.renderNextComment();this.errorCount=0;return;case 'not-streaming':this.stopStream();return;case 'transient-error':return;case 'error':this.renderNextComment();this.errorCount+=1;if(this.errorCount===1)c('BanzaiODS').bumpEntityKey('streaming_comments','first_streaming_comments_error');if(this.errorCount===5){c('BanzaiODS').bumpEntityKey('streaming_comments','too_many_streaming_comments_errors');this.stopStream();return;}break;}}.bind(this)).send();}.bind(this),m);this.subscription=null;}else if(this.streamingMode==='Subscription'){(function(){t.interval=c('setInterval')(function(){return this.renderNextComment();}.bind(t),m);var v=Date.now();c('UFIFeedbackTargets').getFeedbackTarget(t.eftID,function(w){this.subscription=c('UFILiveVideoCommentSubscription').subscribe(w.targetfbid,function(x){c('UFISubscriptionUpdates').handleLiveStreamingComment(this.eftID,x.live_video_comment_create_subscribe,Date.now()-v);}.bind(this));}.bind(t));})();}else throw new Error('Invalid streamingMode');if(c('UFIConfig').shouldLogFacecastStreamingCommentDelay)(function(){var v=c('uuid')();t.healthLoggerInterval=c('setInterval')(function(){var w=new (c('FacecastStreamingCommentHealthTypedLogger'))().setCommentID(this.tailCommentFBID).setProtocol(this.streamingMode).setSessionID(v);if(this.subscription)w.setGqlsContext(this.subscription.getContext().transformContext);w.log();}.bind(t),l);})();c('UFICentralUpdates').subscribe('update-comments',function(v,w){if(w.comments&&w.comments.length)w.comments.forEach(function(x){if(x.parentcommentid)return;if(x.islocal)this.trackLocalComment(x);}.bind(this));}.bind(this));c('Arbiter').subscribe(c('StreamingReactionsTrayEvents').FireworksAnimating,function(v,w){this.fireworksAnimating=w;if(this.fireworksAnimating){clearTimeout(this.timeoutID);this.timeoutID=setTimeout(function(){if(this.fireworksAnimating){this.fireworksAnimating=false;c('BanzaiODS').bumpEntityKey('streaming_comments','comment_fetching_unpause_failure');}}.bind(this),k);}else this.backFillComments();}.bind(this));}n.prototype.enqueueSubscribedComment=function(o,p){this.$UFILiveStreamingComments2(o);this.$UFILiveStreamingComments3(p);};n.prototype.enqueueSubscribedTipJarEvent=function(o,p){this.$UFILiveStreamingComments2({comments:[this.$UFILiveStreamingComments4(o,p)],isstreaming:true,priority:0});};n.prototype.$UFILiveStreamingComments4=function(o,p){var q=p.tip_jar_tip_event_subscribe.tip_jar_transaction;return {author:q.tip_giver.id,body:{text:h._("sent {The amount of the gift money}",[h.param('The amount of the gift money','$'+parseInt(q.amount_received.amount,10)+'!')])},cancomment:false,ftentidentifier:o.targetfbid,id:o.targetfbid+'_'+q.id,fbid:q.id,tipjarAmount:q.amount_received.amount};};n.prototype.$UFILiveStreamingComments2=function(o){this.streamingMode==='Subscription'||i(0);if(this.resemblesLocalComment(o.comments[0]))return;this.tailCommentFBID=o.comments[0].fbid;this.queue.push(o);this.queue=n.pruneQueue(this.queue);if(this.queue.length===1&&this.mayShortCircuitRendering){c('BanzaiODS').bumpEntityKey('streaming_comments','short_circuit_render');c('clearInterval')(this.interval);this.renderNextComment();this.interval=c('setInterval')(function(){return this.renderNextComment();}.bind(this),m);}};n.prototype.$UFILiveStreamingComments1=function(o){this.streamingMode==='Polling'||i(0);if(!o.ufipayloads||isNaN(o.commentcount))return;var p=o.ufipayloads.filter(function(r){return !this.resemblesLocalComment(r.comments[0]);}.bind(this)),q=-1;if(this.tailCommentFBID!==null)q=p.findIndex(function(r){return r.comments[0].fbid===this.tailCommentFBID;}.bind(this),this);if(q===-1){this.queue=[];}else p=p.slice(q+1);if(c('UFIConfig').shouldLogFacecastStreamingCommentDelay)p.forEach(function(r){return this.logDelayInfo(r.comments[0].fbid,'poll','Polling');}.bind(this));this.queue=this.queue.concat(p);if(this.queue.length>0)this.tailCommentFBID=this.queue[this.queue.length-1].comments[0].fbid;this.$UFILiveStreamingComments3(o.commentcount);};n.prototype.$UFILiveStreamingComments3=function(o){var p=o-this.queue.length;if(p>this.totalCommentCount){this.totalCommentCount=p;c('UFIToplevelStreamedCommentList').getCommentList(this.eftID).updateCommentCount(this.totalCommentCount);}};n.prototype.$UFILiveStreamingComments5=function(){var o=c('UFIToplevelStreamedCommentList').getCommentList(this.eftID);while(this.queue.length){var p=this.queue.shift();if(!o.hasComment(p.comments[0]))return p;}return null;};n.prototype.renderNextComment=function(){var o=this.$UFILiveStreamingComments5();if(!o){this.mayShortCircuitRendering=true;return;}if(this.fireworksAnimating){this.ufiPayloadBuffer.push(o);}else{c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.STREAMING,o);if(c('UFIConfig').shouldLogFacecastStreamingCommentDelay)this.logDelayInfo(o.comments[0].fbid,'render',this.streamingMode);c('BanzaiODS').bumpEntityKey('feedback','facecast_live_comment_rendered');}this.mayShortCircuitRendering=false;if(c('CurrentUser').isLoggedIn()&&this.mayLogExposure){new (c('AsyncRequest'))().setURI(c('XLiveStreamingRankingExperimentAsyncController').getURIBuilder().setString('eft_id',this.eftID).getURI()).send();this.mayLogExposure=false;}};n.prototype.backFillComments=function(){for(var o=this.ufiPayloadBuffer,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++];}else{q=o.next();if(q.done)break;r=q.value;}var s=r;c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.STREAMING,s);}this.ufiPayloadBuffer=[];};n.prototype.getNextURI=function(){return c('XLiveStreamingCommentsAsyncController').getURIBuilder().setString('eft_id',this.eftID).getURI();};n.prototype.trackLocalComment=function(o){var p=n.hashCommentData(o);this.localCommentBodies.add(p);};n.prototype.resemblesLocalComment=function(o){var p=n.hashCommentData(o);return this.localCommentBodies.has(p);};n.prototype.logDelayInfo=function(o,event,p){var q=o+':'+event;if(this.loggedComments.has(q))return;this.loggedComments.add(q);new (c('FacecastStreamingCommentDelayTypedLogger'))().setCommentID(o).setEvent(event).setProtocol(p).log();};n.prototype.stopStream=function(){c('clearInterval')(this.interval);c('clearInterval')(this.healthLoggerInterval);if(this.subscription)this.subscription.unsubscribe();};n.hashCommentData=function(o){var p=o.author+o.body.text;if(o.attachment)p+=':'+o.attachment.fbid;return p;};n.pruneQueue=function(o){var p=o.length-c('UFIConfig').facecastWWWCommentQueueThreshold;if(p<=0)return o;var q=o.map(function(r,s){return {index:s,priority:r.priority};}).sort(function(r,s){var t=r.priority-s.priority;return t!==0?t:r.index-s.index;}).map(function(r){return r.index;}).slice(0,p);return o.filter(function(r,s){return q.indexOf(s)===-1;});};n.start=function(o,p,q,r){if(j.get(o))return;j.set(o,new n(o,p,q,r));};n.enqueueSubscribedComment=function(o,p,q){var r=j.get(o);if(!r)return;r.enqueueSubscribedComment(p,q);};n.enqueueSubscribedTipJarEvent=function(o,p){var q=j.get(o.targetfbid);if(!q)return;q.enqueueSubscribedTipJarEvent(o,p);};n.stop=function(o){var p=j.get(o);if(!p)return;p.stopStream();};f.exports=n;}),null);
__d('UFISubscriptionUpdates',['fbt','BanzaiODS','FacecastStreamingCommentDelayTypedLogger','ImmutableObject','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIComments','UFIConfig','UFIConstants','UFILiveStreamingComments','UFIReactionsUtils','UFISharedDispatcher','UFIStoryAction'],(function a(b,c,d,e,f,g,h){'use strict';c('BanzaiODS').setEntitySample('feedback',.0001);function i(k,l,m){new (c('LiveWWWFeedbackTypedLogger'))().setMechanism('graphql_subscriptions').setEvent('receive_payload').setUpdateType(k).setTimeSinceSub(l).updateData(m?m:{}).log();}var j={handleLiveLike:function k(l,m,n){c('BanzaiODS').bumpEntityKey('feedback','gql_like_received');i('like',n);if(!m||!m.feedback_like_subscribe)return;var o=m.feedback_like_subscribe.feedback,p=m.feedback_like_subscribe.liker;if(!o||!p)return;var q=[babelHelpers['extends']({actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:p.id,clientid:m.feedback_like_subscribe.client_mutation_id,entidentifier:l,likesentences:{current:o.does_viewer_like?o.viewer_likes_sentence:o.viewer_does_not_like_sentence,alternate:o.does_viewer_like?o.viewer_does_not_like_sentence:o.viewer_likes_sentence},hasviewerliked:o.does_viewer_like,likecount:o.likers.count},{})],r=o.reactions_summary;if(r){var s=c('UFIReactionsUtils').getReactionCountMapFromSummary(o.reactions_summary),t=o.viewer_feedback_reaction_info?o.viewer_feedback_reaction_info.key:0,u=o.reaction_count_reduced?o.reaction_count_reduced:o.reactors.count;q.push(babelHelpers['extends']({actiontype:c('UFIConstants').UFIActionType.REACTION,actorid:p.id,clientid:m.feedback_like_subscribe.client_mutation_id,entidentifier:l,viewerreaction:t,reactioncount:o.reactors.count,reactioncountreduced:u,reactioncountmap:s,reactionsentences:{current:t?o.viewer_likes_reaction_sentence:o.viewer_does_not_like_reaction_sentence,alternate:t?o.viewer_does_not_like_reaction_sentence:o.viewer_likes_reaction_sentence}},{}));}c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{actions:q});},handleLiveComment:function k(l,m,n){c('BanzaiODS').bumpEntityKey('feedback','gql_comment_received');var o=m&&m.comment;if(!o)return;i('comment',n,{comment_id:o.legacy_token});var p=this.prepareCommentData(l,o,n,m.client_mutation_id);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{comments:[p],isstreaming:o.written_while_video_was_live});},handleLiveStreamingComment:function k(l,m,n){c('BanzaiODS').bumpEntityKey('feedback','gql_streaming_comment_received');var o=m&&m.comment;if(!o)return;i('comment',n,{comment_id:o.legacy_token});if(c('UFIConfig').shouldLogFacecastStreamingCommentDelay)new (c('FacecastStreamingCommentDelayTypedLogger'))().setCommentID(o.legacy_fbid).setEvent('push').setProtocol('Subscription').log();var p=this.prepareCommentData(l,o,n,m.client_mutation_id);c('UFILiveStreamingComments').enqueueSubscribedComment(l,{comments:[p],isstreaming:o.written_while_video_was_live,priority:o.live_streaming_comment_priority},m.feedback.top_level_comments.total_count);},prepareCommentData:function k(l,m,n,o){var p=babelHelpers['extends']({author:m.author.id,body:m.body,cancomment:m.feedback.can_viewer_comment,canedit:m.can_viewer_edit,canremove:m.can_viewer_delete,clientid:o,ftentidentifier:l,id:m.legacy_token,fbid:m.legacy_fbid,legacyid:m.legacy_fbid,timestamp:{time:m.created_time,text:h._("a few seconds ago")},hasviewerliked:m.feedback.does_viewer_like,isauthornoncoworker:m.is_author_non_coworker,isfeatured:m.is_featured,istranslatable:m.translation_available_for_viewer,likecount:m.feedback.likers.count,viewercanlike:m.feedback.can_viewer_like,parentcommentid:m.comment_parent&&m.comment_parent.legacy_token,spamreplycount:0},{});if(m.attachments.length){var q=m.attachments[0],r=q.style_list;if(r&&r.length&&r[0]=='sticker'){var s=q.target;p.attachment={fbid:s.id,metadata:{source_uri:s.img.uri,source_uri_2x:s.img_2x.uri,width:s.img.width,height:s.img.height,frameCount:s.frame_count,frameRate:s.frame_rate,framesPerCol:s.frames_per_column,framesPerRow:s.frames_per_row,sprite_uri:s.sprite_img&&s.sprite_img.uri,sprite_uri_2x:s.sprite_img_2x&&s.sprite_img_2x.uri},type:'sticker'};}else if(r&&r.length&&r[0]=='photo'){var t=q.target;p.attachment={fbid:t.id,metadata:{preview_uri:t.photo_img&&t.photo_img.uri,width:t.photo_img.width,height:t.photo_img.height,url:t.url},type:'photo'};}else if(r&&r.length&&r[0]=='share'){q.type='live_share';p.attachment=q;}else if(r&&r.length&&r[0]=='video_inline'){q.type='video';p.attachment=q;}else if(r&&r.length&&r[0]=='comment_place_info'){q.type='live_comment_place_info';p.attachment=q;}}var u=m.feedback;if(u.reactions_summary){p.canviewerreact=u.can_viewer_react;p.reactioncount=u.reactors.count;p.reactioncountmap=c('UFIReactionsUtils').getReactionCountMapFromSummary(u.reactions_summary);p.reactioncountreduced=u.reaction_count_reduced?u.reaction_count_reduced:u.reactors.count;p.viewerreaction=u.viewer_feedback_reaction_info?u.viewer_feedback_reaction_info.key:0;}return p;},handleLivePinnedComment:function k(l,m,n){var o=m.pinned_comment_event_create_subscribe.pinned_comment_event.pinned_comment;if(o){var p=j.prepareCommentData(l.ftentidentifier,o,n,m.client_mutation_id);c('UFIComments').setComment(p.id,new (c('ImmutableObject'))(p));c('UFISharedDispatcher').dispatch(c('UFIStoryAction').pinComment(l,p.id));}else c('UFISharedDispatcher').dispatch(c('UFIStoryAction').unpinComment(l));},handleLiveCommentLike:function k(l,m,n){i('comment_like',n);var o=m&&m.comment_like_subscribe&&m.comment_like_subscribe.feedback;if(!o)return;var p=null;if(o.reactions_summary)p={reactioncount:o.reactors.count,reactioncountmap:c('UFIReactionsUtils').getReactionCountMapFromSummary(o.reactions_summary),reactioncountreduced:o.reaction_count_reduced?o.reaction_count_reduced:o.reactors.count,viewerreaction:o.viewer_feedback_reaction_info?o.viewer_feedback_reaction_info.key:0};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{actions:[{actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,clientid:m.comment_like_subscribe.client_mutation_id,commentid:o.legacy_comment_token,likecount:o.likers&&o.likers.count,reactiondata:p,viewerliked:o.does_viewer_like}]});}};f.exports=j;}),null);
__d("UFILiveTipJarSubscriptionWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"886154738186316",queryID:"886154748186315"});}),null);
__d('UFILiveTipJarSubscription',['BaseGraphQLSubscription','UFILiveTipJarSubscriptionWebGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/tip_jar_tip_event_subscribe/video_id_'+j;},_getQueryID:function i(){return c('UFILiveTipJarSubscriptionWebGraphQLSubscription').getLegacyQueryID();},_getQueryParameters:function i(j){return {data:JSON.stringify({client_subscription_id:c('uuid')(),video_id:j})};},_getSubscriptionCallName:function i(){return 'tip_jar_tip_event_subscribe';}});f.exports=h;}),null);
__d('UFIRetryActions',['JSLogger','UFICentralUpdates','UFIConstants','UFIUserActions'],(function a(b,c,d,e,f,g){'use strict';var h=c('JSLogger').create('UFIRetryActions');function i(l,m){var n={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:l.id};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[n]});var o=l.body.text,p=l.body.mentionstext;c('UFIUserActions').addComment(l.ftentidentifier,o,p,{source:m,replyid:l.parentcommentid,attachedphoto:l.body.mentionsphoto,attachedvideo:l.body.mentionsvideo});}function j(l,m){var n=l.body.text,o=l.body.mentionstext;c('UFIUserActions').editComment(l.id,n,o,{source:m,attachedPhoto:l.body.mentionsphoto,attachedSticker:l.attachment,attachedVideo:l.body.mentionsvideo});}var k={retrySubmit:function l(m,n){switch(m.status){case c('UFIConstants').UFIStatus.FAILED_ADD:i(m,n);break;case c('UFIConstants').UFIStatus.FAILED_EDIT:j(m,n);break;default:h.error('retrysubmitstatus',{status:m.status});break;}}};f.exports=k;}),null);
__d("FeedbackTypingWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"829607023841088",queryID:"865890133546110"});}),null);
__d('UFITypingSubscription',['FeedbackTypingWebGraphQLSubscription','BaseGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/feedback_typing_subscribe/feedback_id_'+j;},_getQueryID:function i(){return c('FeedbackTypingWebGraphQLSubscription').getLegacyQueryID();},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:j})};},_getSubscriptionCallName:function i(){return 'feedback_typing_subscribe';}});f.exports=h;}),null);
__d('UFITypingSubscriptionController',['UFITypingSubscription','getByPath','setTimeout'],(function a(b,c,d,e,f,g){'use strict';var h=15*1000;function i(l){var m=c('getByPath')(l,['feedback_typing_subscribe','feedback','feedback_typers','friend_count']),n=c('getByPath')(l,['feedback_typing_subscribe','feedback','feedback_typers','other_count']);return {friendCount:parseInt(m,10)||0,otherCount:parseInt(n,10)||0};}function j(l){return l.friendCount===0&&l.otherCount===0;}function k(l,m){this.$UFITypingSubscriptionController1=null;this.$UFITypingSubscriptionController2=m;this.$UFITypingSubscriptionController3=c('UFITypingSubscription').subscribe(l,this.$UFITypingSubscriptionController4.bind(this));}k.prototype.unsubscribe=function(){this.$UFITypingSubscriptionController5();this.$UFITypingSubscriptionController3&&this.$UFITypingSubscriptionController3.unsubscribe();};k.prototype.$UFITypingSubscriptionController4=function(l){this.$UFITypingSubscriptionController5();var m=i(l);this.$UFITypingSubscriptionController2(m);if(!j(m))this.$UFITypingSubscriptionController1=c('setTimeout')(function(){this.$UFITypingSubscriptionController5();this.$UFITypingSubscriptionController2({friendCount:0,otherCount:0});}.bind(this),h);};k.prototype.$UFITypingSubscriptionController5=function(){if(this.$UFITypingSubscriptionController1){clearTimeout(this.$UFITypingSubscriptionController1);this.$UFITypingSubscriptionController1=null;}};f.exports=k;}),null);
__d('UFITypingSubscriptionControllerFactory',['UFIConfig','UFISharedDispatcher','UFIStoryAction','UFITypingSubscriptionController','debounce'],(function a(b,c,d,e,f,g){'use strict';var h=500,i={forUFIController:function j(k,l){var m=c('debounce')(function(n){var o=c('UFIConfig').typingIndicator.fromEveryone,p=void 0;if(n.friendCount){p=c('UFIStoryAction').friendTyping(l);}else if(n.otherCount&&o){p=c('UFIStoryAction').someoneTyping(l);}else p=c('UFIStoryAction').typingStopped(l);c('UFISharedDispatcher').dispatch(p);},h);return new (c('UFITypingSubscriptionController'))(k.targetfbid,m);}};f.exports=i;}),null);
__d("XVODStreamingCommentsAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videos\/vodcomments\/",{eft_id:{type:"String",required:true},target_ufi_instance_id:{type:"String",required:true},start_time:{type:"Float",required:true},end_time:{type:"Float",required:true},should_backfill:{type:"Bool",defaultValue:false}});}),null);
__d('UFIVODStreamingComments',['AsyncRequest','BanzaiODS','Map','SubscriptionsHandler','UFICentralUpdates','UFIConstants','UFIInstanceAction','UFILivePinnedCommentStore','UFISharedDispatcher','UFIStoryAction','UFIToplevelStreamedCommentList','WebCommentViewOption','XVODStreamingCommentsAsyncController','setInterval'],(function a(b,c,d,e,f,g){'use strict';c('BanzaiODS').setEntitySample('feedback',.0001);function h(j,k){this.ufiController=j;this.videoPlayerController=k;this.queue=[];this.queueEndTime=0;this.currentRequest=null;this.subscriptions=new (c('SubscriptionsHandler'))();this.commentsAutoplayState=this.ufiController.shouldAutoplayLiveVODComments()?'MayPlay':'MayNotPlay';this.pinQueue=[];this.resetToTime(k.getCurrentTimePosition());this.subscriptions.addSubscriptions(k.addListener('seekEnd',function(l){if(this.commentsAutoplayState==='MayNotPlay')this.commentsAutoplayState='MayPlay';this.resetToTime(l.position);}.bind(this)),k.addListener('unmute',function(l){if(this.commentsAutoplayState==='MayNotPlay')this.commentsAutoplayState='MayPlay';this.$UFIVODCommentStream1();}.bind(this)),k.addListener('updateStatus',function(l,m){var n=null;while(this.pinQueue.length){if(this.pinQueue[0].timeoffset>l.position)break;n=this.pinQueue.shift();}if(n)this.$UFIVODCommentStream2(n);}.bind(this)));c('setInterval')(this.renderNextComment.bind(this),2000);c('BanzaiODS').bumpEntityKey('vod_comments','www_load');}h.prototype.renderNextComment=function(){if(!this.videoPlayerController.isState('playing'))return;var j=this.videoPlayerController.getCurrentTimePosition();this.onTimeUpdated(j);while(this.queue.length&&this.queue[0].timeoffset<j){var k=this.queue.shift();if(k.timeoffset<j-5)continue;c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.STREAMING,k.ufipayload);c('BanzaiODS').bumpEntityKey('feedback','facecast_vod_comment_rendered');break;}this.$UFIVODCommentStream1();};h.prototype.fetchNewCommments=function(j,k,l,m){var n=j+60,o=c('XVODStreamingCommentsAsyncController').getURIBuilder().setString('eft_id',this.ufiController.getFtEntIdentifier()).setString('target_ufi_instance_id',this.ufiController.getInstanceID()).setFloat('start_time',j).setFloat('end_time',n).setBool('should_backfill',k).getURI();if(this.currentRequest)this.currentRequest.abandon();this.currentRequest=new (c('AsyncRequest'))().setURI(o).setHandler(function(p){var q=p.getPayload();if(q.status==='error')return;if(q.backfillpayload)c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.STREAMING,q.backfillpayload);l(q.ufipayloads);m(q.pinnedcommentpayloads,q.backfillpinnedcommentpayload);this.queueEndTime=n;}.bind(this)).setFinallyHandler(function(){if(k)c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').didReceiveVODComments(this.ufiController.getContextArgs()));this.currentRequest=null;}.bind(this));this.currentRequest.send();if(k)c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').didRequestVODComments(this.ufiController.getContextArgs()));};h.prototype.onTimeUpdated=function(j){if(j<this.queueEndTime-15||this.currentRequest!==null)return;this.fetchNewCommments(this.queueEndTime,false,function(k){this.queue=this.queue.concat(k);}.bind(this),function(k,l){this.pinQueue=this.pinQueue.concat(k);}.bind(this));};h.prototype.resetToTime=function(j){var k=this.ufiController.getFtEntIdentifier();c('UFIToplevelStreamedCommentList').resetCommentList(k,this.ufiController.getInstanceID());c('UFICentralUpdates').didUpdateFeedback(k);this.fetchNewCommments(j,true,function(l){this.queue=l;}.bind(this),function(l,m){this.pinQueue=l;this.$UFIVODCommentStream2(m);}.bind(this));};h.prototype.stop=function(){this.subscriptions.release();};h.prototype.$UFIVODCommentStream1=function(){var j=c('UFIToplevelStreamedCommentList').getExistingCommentList(this.ufiController.getFtEntIdentifier(),this.ufiController.getInstanceID());if(!j||j.getActualCommentCount()<5||this.commentsAutoplayState!=='MayPlay'||!this.videoPlayerController.isState('playing'))return;c('BanzaiODS').bumpEntityKey('vod_comments','www_autoplay');this.commentsAutoplayState='Played';c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').changeOrderingMode(this.ufiController.getContextArgs(),c('WebCommentViewOption').LIVE_STREAMING));this.ufiController.scrollToTopOfCommentsInViewer();};h.prototype.$UFIVODCommentStream2=function(j){var k=this.ufiController.getContextArgs();if(!k.enableViewPinnedComments)return;var l=c('UFILivePinnedCommentStore').getPinnedCommentID(k.ftentidentifier),m=j.ufipayload;if(!m){if(l!==null)c('UFISharedDispatcher').dispatch(c('UFIStoryAction').unpinComment(k,j.pineventid));return;}var n=m.pinnedcomments[0].id;if(n===l)return;c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.STREAMING,m);c('UFISharedDispatcher').dispatch(c('UFIStoryAction').pinComment(k,n,j.pineventid));};var i=new (c('Map'))();f.exports={start:function j(k,l){var m=k.getInstanceID();if(i.get(m))return;i.set(m,new h(k,l));},stop:function j(k,l){var m=i.get(l);if(!m)return;m.stop();i['delete'](l);}};}),null);
__d('UFIController',['csx','invariant','Promise','Arbiter','AsyncRequest','Bootloader','BootloadedComponent.react','CommentPrelude','DOM','DOMContainer.react','DOMQuery','XCommentEmbedPluginEmbedAsyncDialogController','ErrorUtils','FeedbackPayloadSourceType','JSResource','LivePinnedCommentEventCreateSubscription','LiveTimer','React','ReactDOMForUFI','Run','ShortProfiles','SubscriptionsHandler','TranslationTrigger','StaticUFI.react','UFIActionHeader.react','UFIActionLinks.react','UFIAddCommentActionType','UFICallbackStore','UFICentralUpdates','UFICommentActionType','UFICommentFilters','UFICommentLikeSubscription','UFICommentLogger','UFIComments','UFICommentSubscription','UFICommentUtils','UFICommentVisibilityStore','UFICommercialBreakAdapter','UFIConfig','UFIConstants','UFIDispatcher','UFIDispatcherContext.react','UFIDomRootAdapter','UFIFeaturedReplyCommentListImpl','UFIFeaturedToplevelCommentListImpl','UFIFeedbackFilters','UFIFeedbackMode','UFIFeedbackStore','UFIFeedbackTargets','UFIFetcher','UFIInstanceAction','UFIInstanceActionType','UFIInstanceState','UFILikeSubscription','UFILivePinnedCommentStore','UFILiveStreamingComments','UFILiveTipJarSubscription','UFINewCommentNotifier','UFIOrderingModeStore','UFIPaging','UFIRange','UFIReactionStore','UFIReplyCommentList','UFIRetryActions','UFIRootRegistry','UFISharedDispatcher','UFIStoryAction','UFIStoryActionType','UFISubscriptionUpdates','UFIToplevelPagedCommentList','UFIToplevelStreamedCommentList','UFITypingSubscriptionControllerFactory','UFIUIEvents','UFIUserActions','UFIVideoPlayerRegistry','UFIVisibility','UFIVODStreamingComments','URI','createArrayFromMixed','ex','flattenArray','forEachObject','isEmpty','onEnclosingPageletDestroy'],(function a(b,c,d,e,f,g,h,i){'use strict';var j={NEWSSTAND:'newsstand'},k=function n(o,p,q,r){var s=o.getRequestedOffset(),t=o.getRequestedLength(),u=s+t===p,v=u&&l(r)?q-s:t;return new (c('UFIRange'))(s,v);},l=function n(o){return o==c('FeedbackPayloadSourceType').USER_ACTION||o==c('FeedbackPayloadSourceType').LIVE_SEND||o==c('FeedbackPayloadSourceType').STREAMING;};m.factory=function(n,o,p){if(o.flushEventQueueBeforeRender){if(c('UFIConfig').flushEventQueueBeforeRenderUseIdleCallback&&window.requestIdleCallback){window.requestIdleCallback(function(){return m.$UFIController12(n,o,p);});}else setTimeout(function(){return m.$UFIController12(n,o,p);},c('UFIConfig').flushEventQueueBeforeRenderTimeout);}else m.$UFIController12(n,o,p);};m.$UFIController12=function(n,o,p){o.rootid=n.id;return new m(n,Object.freeze(o),p);};m.prototype.getRootNode=function(){return this.root;};m.prototype.getContextArgs=function(){return this.$UFIController2;};m.prototype.getFtEntIdentifier=function(){return this.$UFIController2.ftentidentifier;};m.prototype.getInstanceID=function(){return this.$UFIController2.instanceid;};m.prototype.getFluentContentToken=function(){return this.$UFIController2.fluentContentToken;};m.prototype.shouldAutoplayLiveVODComments=function(){return !!this.$UFIController2.autoplayLiveVODComments;};function m(n,o,p){var q,r,s=this;this.$UFIController13();this.$UFIController14();this.root=n;this.$UFIController2=o;this.$UFIController6=null;c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').init(o,p));c('UFIRootRegistry').registerController(o.rootid,o.instanceid,o.ftentidentifier,function(){this.$UFIController15();}.bind(this));this.$UFIController4=new (c('UFIDomRootAdapter'))(this.root,this.$UFIController2);if(c('UFIConfig').feedfocusWrapperModule&&o.location==j.NEWSSTAND){var t=c('UFIConfig').feedfocusWrapperModule,u=c('DOMQuery').scry(this.root,"^._5pat"),v=u[0];if(v)(function(){var ha=c('createArrayFromMixed')(v.children),ia=document.createDocumentFragment();ha.forEach(function(ja){ia.appendChild(ja);});c('ReactDOMForUFI').render(c('React').createElement(t,{instanceID:o.instanceid},c('React').createElement(c('DOMContainer.react'),null,ia)),v);})();}var w=o.feedbackMode===c('UFIFeedbackMode').NEVER||o.feedbackMode===c('UFIFeedbackMode').NONE;this.$UFIController9={payloadSource:null,feedback:null,oldRange:{offset:0,length:0},commentIDToFocusOnMount:null,showLoadingUFI:false,isActiveLoading:{},requestedInitialComments:false,isHidden:w,commentPermalinks:{},deletedCounts:{},canAddCommentMap:{},canReplyMap:{},defaultRepliesExpandedMap:{},repliesExpandedMap:{},hasPagedToplevel:false,featuredCommentLists:{},featuredCommentIDs:[],toplevelPagerClickCounts:{},replyPagerClickCounts:{},loadingVODComments:false,shouldTranslateAllVisibleComments:false,commentsLoadingTranslations:{}};this.authorProfiles={};this.commentcounts={};this.comments=[];this.repliesMap={};var x=p.feedbacktarget?p.feedbacktarget:p.feedbacktargets&&p.feedbacktargets[0];if(!this.canRenderHeader())c('Bootloader').loadModules(["UFIActionLinkController"],function(ha){return new ha(n,o,x);},'UFIController');if(x)this.$UFIController16(x,o);var y=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid),z=null;if(p.featuredcommentlists&&p.featuredcommentlists.comments&&p.featuredcommentlists.comments[o.ftentidentifier]){z=p.featuredcommentlists.comments[o.ftentidentifier];this.$UFIController9.featuredCommentLists[o.ftentidentifier]=new (c('UFIFeaturedToplevelCommentListImpl'))(o.ftentidentifier,z.values,p.comments);}else{var aa=p.commentlists&&p.commentlists.comments,ba=aa[o.ftentidentifier];z=ba[y];}if(p.featuredcommentids)this.$UFIController9.featuredCommentIDs=p.featuredcommentids;this.ranges={};this.replyRanges={};this.commentcounts={};this.ranges[y]=new (c('UFIRange'))(z.range.offset,z.range.length);this.$UFIController9.oldRange={offset:z.range.offset,length:this.comments&&this.comments.length||0};var ca=void 0,da=void 0,ea=void 0;if(p.commentlists.replies)for(ca=0;ca<z.values.length;ca++){da=z.values[ca];ea=p.commentlists.replies[da];if(ea){this.commentcounts[da]=this.getReplyCommentList(da).getCommentCount();this.replaceReplyRange(da,new (c('UFIRange'))(ea.range.offset,ea.range.length));}}if(p.featuredcommentlists)if(p.featuredcommentlists.replies)for(ca=0;ca<z.values.length;ca++){da=z.values[ca];ea=p.featuredcommentlists.replies[da];if(ea){this.$UFIController9.featuredCommentLists[da]=new (c('UFIFeaturedReplyCommentListImpl'))(o.ftentidentifier,da,ea.values,p.comments);this.commentcounts[da]=this.getReplyCommentList(da).getCommentCount();this.replaceReplyRange(da,c('UFIRange').combine(new (c('UFIRange'))(ea.range.offset,ea.range.length),this.replyRanges[da]));}}this.$UFIController7=null;this.ufiCentralUpdatesSubscriptions=[c('UFICentralUpdates').subscribe('feedback-updated',function(ha,ia){var ja=ia.updates;if(o.ftentidentifier in ja){this.$UFIController9.payloadSource=ia.payloadSource;this.fetchAndUpdate(this.$UFIController9.payloadSource);}}.bind(this)),c('UFICentralUpdates').subscribe('instance-updated',function(ha,ia){var ja=ia.updates;if(o.instanceid in ja){var ka=ja[o.instanceid];if(ka.commentsToggling){this.$UFIController9.payloadSource=ia.payloadSource;if(this.canRenderHeader()&&this.$UFIController9.feedback)this.renderHeader(this.$UFIController9.feedback);this.render();}}}.bind(this))];this.$UFIController17(o);this.onUnloadSubscription=c('Run').onUnload(function(){return this.$UFIController18();}.bind(this));this.getToplevelCommentList();c('UFICentralUpdates').handleUpdate(c('FeedbackPayloadSourceType').INITIAL_SERVER,p);if(o.islivestreaming&&o.enableViewPinnedComments&&o.fluentContentToken)(function(){var ha=Date.now();c('LivePinnedCommentEventCreateSubscription').subscribe(o.fluentContentToken,function(ia){c('UFISubscriptionUpdates').handleLivePinnedComment(o,ia,Date.now()-ha);this.render();}.bind(s));})();var fa=this.$UFIController19(x);if(fa){var ga=null;if(p.comments&&p.comments.length>0)ga=p.comments[p.comments.length-1].fbid;c('UFILiveStreamingComments').start(o.ftentidentifier,x.commentcount,ga,fa);this.scrollToTopOfCommentsInViewer();c('Run').onLeave(function(){return c('UFILiveStreamingComments').stop(this.$UFIController2.ftentidentifier);}.bind(this));}if(!o.lazyFetch&&!this.canRenderHeader())this.$UFIController20(x);if(this.$UFIController2.fluentContentToken)c('UFIVideoPlayerRegistry').registerUFIController(this,function(ha){if(o.enableVODStreamingComments&&!this.$UFIController9.featuredCommentLists[o.ftentidentifier])c('UFIVODStreamingComments').start(this,ha);if(o.islivestreaming||o.isLiveVOD)c('UFICommercialBreakAdapter').start(o,ha);if(o.islivestreaming)this.$UFIController11.addSubscriptions(ha.addListener('stateChange',function(){if(ha.isState('playing'))this.render();}.bind(this)));}.bind(this),function(){if(o.enableVODStreamingComments)c('UFIVODStreamingComments').stop(this.$UFIController2.ftentidentifier,o.instanceid);if(o.islivestreaming||o.isLiveVOD)c('UFICommercialBreakAdapter').stop(o.instanceid);}.bind(this));}m.prototype.$UFIController17=function(n){this.$UFIController1=new (c('SubscriptionsHandler'))();this.$UFIController1.addSubscriptions(c('onEnclosingPageletDestroy')(this.root,function(){this.$UFIController15();}.bind(this)),c('Arbiter').subscribe(c('UFIUIEvents').PageCleared,function(){this.$UFIController15();}.bind(this)),c('Arbiter').subscribe('ConversationNub/destroy',function(o,p){if(p.root&&c('DOMQuery').contains(p.root,this.root))this.$UFIController15();}.bind(this)));if(n.viewas)this.$UFIController1.addSubscriptions(c('Arbiter').subscribe('pre_page_transition',function(o,p){if(n.viewas!==new (c('URI'))(p.to).getQueryData('viewas')){c('UFIToplevelPagedCommentList').resetCommentListsForFeedbackTargetID(n.ftentidentifier);c('UFIToplevelStreamedCommentList').resetAllCommentLists(n.ftentidentifier);}}));};m.prototype.$UFIController16=function(n,o){this.$UFIController21();var p=Date.now(),q=[];if(n.ll)q.push(c('UFILikeSubscription').subscribe(n.targetfbid,function(s){c('UFISubscriptionUpdates').handleLiveLike(o.ftentidentifier,s,Date.now()-p);}));if(n.lc)q.push(c('UFICommentSubscription').subscribe(n.targetfbid,function(s){c('UFISubscriptionUpdates').handleLiveComment(o.ftentidentifier,s.comment_create_subscribe,Date.now()-p);}));if(n.lcl)q.push(c('UFICommentLikeSubscription').subscribe(n.targetfbid,function(s){c('UFISubscriptionUpdates').handleLiveCommentLike(o.ftentidentifier,s,Date.now()-p);}));if(n.lti&&c('UFIConfig').typingIndicator.subscribe)q.push(c('UFITypingSubscriptionControllerFactory').forUFIController(n,o));if(n.istipjarenabled)q.push(c('UFILiveTipJarSubscription').subscribe(n.targetfbid,function(s){c('UFILiveStreamingComments').enqueueSubscribedTipJarEvent(n,s);}));var r=new (c('SubscriptionsHandler'))();r.addSubscriptions.apply(r,q.filter(function(s){return !!s;}));this.$UFIController6=r;};m.prototype.$UFIController22=function(){var n=c('UFIFeedbackStore').getState()[this.$UFIController2.ftentidentifier];if(n)this.$UFIController16(n,this.$UFIController2);};m.prototype.scrollToTopOfCommentsInViewer=function(){c('Arbiter').inform(c('UFIUIEvents').AutoplayLiveComments,{form:this.$UFIController4.getParentForm()});};m.prototype.$UFIController23=function(){var n=this.$UFIController4.getHeadRoot();if(n)c('ReactDOMForUFI').unmountComponentAtNode(n);if(c('UFIRootRegistry').isSnowliftNode(this.$UFIController2.rootid)){var o=this.$UFIController4.getSnowliftActionRoot();if(o)c('ReactDOMForUFI').unmountComponentAtNode(o);}c('ReactDOMForUFI').unmountComponentAtNode(this.root);};m.prototype.unitTestOnlySetFeedbackIntoState=function(n){this.$UFIController9.feedback=n;};m.prototype.$UFIController13=function(){if(!this.$UFIController11){this.$UFIController3=new (c('UFIDispatcher'))();this.$UFIController10={UFICallbackStore:new (c('UFICallbackStore'))(this.$UFIController3),UFIReactionStore:new (c('UFIReactionStore'))(this.$UFIController3)};this.$UFIController11=new (c('SubscriptionsHandler'))();this.$UFIController11.addSubscriptions(this.$UFIController10.UFICallbackStore.on(c('UFICommentActionType').TOGGLE_LIKE,function(n){c('UFIUserActions').changeCommentLike(n.comment.id,n.like,{source:this.$UFIController2.source,target:n.target});}.bind(this)),this.$UFIController10.UFICallbackStore.on(c('UFICommentActionType').CHANGE_REACTION,function(n){c('UFIUserActions').changeCommentReaction(n.comment.id,n.reactionType,{source:this.$UFIController2.source,instanceid:this.$UFIController2.instanceid},n.target);}.bind(this)),this.$UFIController10.UFICallbackStore.on(c('UFICommentActionType').REMOVE,function(n){c('Bootloader').loadModules(["UFICommentRemoveDialog"],function(o){return (o.show(function(){c('UFIUserActions').removeComment(n.comment.id,{source:this.$UFIController2.source,oneclick:false,target:n.target});n.onConfirm();}.bind(this)));}.bind(this),'UFIController');}.bind(this)),this.$UFIController10.UFICallbackStore.on(c('UFICommentActionType').TRANSLATE,function(n){if(!this.$UFIController9.commentsLoadingTranslations[n.comment.id]){this.$UFIController9.commentsLoadingTranslations[n.comment.id]=true;c('UFIUserActions').translateComments(n.comment.ftentidentifier,[n.comment.id],n.trigger,{source:this.$UFIController2.source,target:n.target});if(c('UFICommentUtils').shouldShowTranslateAll(this.comments,this.repliesMap,babelHelpers['extends']({},this.$UFIController9.defaultRepliesExpandedMap,this.$UFIController9.repliesExpandedMap),this.$UFIController9.commentsLoadingTranslations))c('UFIInstanceState').updateState(this.$UFIController2.instanceid,'translateallcommentid',n.comment.id);this.render();}}.bind(this)),this.$UFIController10.UFICallbackStore.on(c('UFICommentActionType').TOGGLE_MARK_AS_SPAM,function(n){c('UFIUserActions').setHideAsSpam(n.comment.id,n.is_spam,{source:this.$UFIController2.source,target:n.target});}.bind(this)),this.$UFIController10.UFICallbackStore.on(c('UFICommentActionType').TOGGLE_INLINE_BAN,function(n){return c('UFIUserActions').banUser(n.comment,n.ownerid,n.is_banned,{source:this.$UFIController2.source,target:n.target});}.bind(this)),this.$UFIController10.UFICallbackStore.on(c('UFICommentActionType').EMBED,function(n){var o=c('XCommentEmbedPluginEmbedAsyncDialogController').getURIBuilder().setString('comment_id',n.comment.id).getURI();new (c('AsyncRequest'))(o).send();}),this.$UFIController10.UFICallbackStore.on(c('UFICommentActionType').SHOW_CONSTITUENT_TITLE,function(n){c('UFIUserActions').showConstituentTitle(n.comment);}),this.$UFIController10.UFICallbackStore.on(c('UFICommentActionType').HIDE_CONSTITUENT_TITLE,function(n){c('UFIUserActions').hideConstituentTitle(n.comment);}),this.$UFIController10.UFICallbackStore.on(c('UFIAddCommentActionType').SUBMIT_NEW,function(n){var o=this.$UFIController4.getParentForm();if(o)c('UFINewCommentNotifier').onNewComment(o,this.$UFIController2,n.comment,n.target,n.replyCommentID,n.timestamp);}.bind(this)),this.$UFIController10.UFICallbackStore.on(c('UFIAddCommentActionType').SUBMIT_EDIT,function(n){var o=n.comment,p=n.commentData,q=n.target;if(!p.visibleValue&&!p.attachedPhoto&&!p.attachedVideo&&!p.attachedSticker){c('Bootloader').loadModules(["UFICommentRemoveDialog"],function(r){return (r.show(function(){return (c('UFIUserActions').removeComment(o.id,{source:this.$UFIController2.source,oneclick:false,target:q}));}.bind(this)));}.bind(this),'UFIController');}else c('UFIUserActions').editComment(o.id,p.visibleValue,p.encodedValue,{source:this.$UFIController2.source,target:q,attachedPhoto:p.attachedPhoto,attachedVideo:p.attachedVideo,attachedSticker:p.attachedSticker});c('UFIInstanceState').updateStateField(this.$UFIController2.instanceid,'locallycomposed',o.id,true);}.bind(this)),this.$UFIController10.UFICallbackStore.on(c('UFICommentActionType').REMOVE_PREVIEW,function(n){return c('UFIUserActions').removePreview(n.comment,{source:this.$UFIController2.source,target:n.target});}.bind(this)),this.$UFIController10.UFICallbackStore.on(c('UFIAddCommentActionType').RETRY_SUBMIT,function(n){return c('UFIRetryActions').retrySubmit(n.comment,this.$UFIController2.source);}.bind(this)),this.$UFIController10.UFICallbackStore.on(c('UFIStoryActionType').PAGE_IN_COMMENTS,function(n){this.$UFIController9.payloadSource=c('FeedbackPayloadSourceType').USER_ACTION;this.$UFIController24(n.commentID,n.direction,n.nextRange);this.fetchAndUpdateWithLogs(c('FeedbackPayloadSourceType').USER_ACTION);}.bind(this)),this.$UFIController10.UFICallbackStore.on(c('UFIStoryActionType').TOGGLE_REPLIES,function(n){this.$UFIController9.payloadSource=c('FeedbackPayloadSourceType').USER_ACTION;var o=n.commentID,p=this.$UFIController9.repliesExpandedMap[o];if(p){delete this.$UFIController9.isActiveLoading[o];this.$UFIController9.repliesExpandedMap[o]=false;this.render();}else{this.$UFIController9.focusedReplyComposer={replyID:'replycomposer-'+o,initiatorComment:null};this.$UFIController24(o,c('UFIPaging').BOTTOM,this.$UFIController25(o));this.fetchAndUpdateWithLogs(c('FeedbackPayloadSourceType').USER_ACTION);}}.bind(this)),this.$UFIController10.UFICallbackStore.on(c('UFIStoryActionType').SHOW_REPLIES,function(n){this.$UFIController9.payloadSource=c('FeedbackPayloadSourceType').USER_ACTION;this.$UFIController9.focusedReplyComposer={replyID:'replycomposer-'+n.commentID,initiatorComment:n.initiatorComment};this.$UFIController24(n.commentID,c('UFIPaging').BOTTOM,this.$UFIController25(n.commentID));this.fetchAndUpdateWithLogs(c('FeedbackPayloadSourceType').USER_ACTION);}.bind(this)),this.$UFIController10.UFICallbackStore.on(c('UFIStoryActionType').COMMENTS_ARRIVED,function(n){this.$UFIController9.payloadSource=n.source;this.$UFIController9.showLoadingUFI=false;this.$UFIController9.isActiveLoading={};this.$UFIController9.commentIDToFocusOnMount=n.source===c('FeedbackPayloadSourceType').USER_ACTION&&!this.$UFIController2.isBroadcasterUFI?this.$UFIController26(n.newOffset,n.newLength):null;this.$UFIController9.oldRange={offset:n.newOffset,length:n.newLength};this.$UFIController27();if(this.$UFIController9.shouldTranslateAllVisibleComments&&!c('UFIOrderingModeStore').isLiveStreaming(this.$UFIController2.instanceid))this.$UFIController28();this.render();if(n.source==c('FeedbackPayloadSourceType').ENDPOINT_COMMENT_FETCH){c('Arbiter').inform(c('UFIUIEvents').CommentPager);if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetchReceived(this.$UFIController2.ftentidentifier,Date.now());}}.bind(this)));}};m.prototype.$UFIController14=function(){this.$UFIController8=[c('UFISharedDispatcher').register(function(n){switch(n.type){case c('UFIInstanceActionType').REMOVE:if(n.instanceID!==this.$UFIController2.instanceid){if(n.ftentidentifier===this.$UFIController2.ftentidentifier)this.$UFIController22();return;}c('UFIRootRegistry').cleanupInstance(n.instanceID);break;case c('UFIInstanceActionType').TOGGLE_COMMENTS:if(n.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController9.payloadSource=c('FeedbackPayloadSourceType').COLLAPSE_ACTION;this.$UFIController9.isHidden=!this.$UFIController9.isHidden;this.render();break;case c('UFIInstanceActionType').CHANGE_ORDER_MODE:if(n.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController9.payloadSource=c('FeedbackPayloadSourceType').USER_ACTION;this.$UFIController9.showLoadingUFI=true;this.render();this.fetchAndUpdate(c('FeedbackPayloadSourceType').USER_ACTION);break;case c('UFIInstanceActionType').REQUESTED_VOD_COMMENTS:if(n.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController9.loadingVODComments=true;this.render();break;case c('UFIInstanceActionType').RECEIVED_VOD_COMMENTS:if(n.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController9.loadingVODComments=false;this.render();break;case c('UFIStoryActionType').LIVE_PIN_COMMENT:if(n.ftentidentifier!==this.$UFIController2.ftentidentifier)return;var o=c('UFIComments').getComment(n.commentID).author;this.authorProfiles[o]=c('ShortProfiles').getNow(o);this.render();break;case c('UFIStoryActionType').LIVE_UNPIN_COMMENT:if(n.ftentidentifier!==this.$UFIController2.ftentidentifier)return;this.render();break;case c('UFIStoryActionType').SHOW_COMMENTS:c('UFIInstanceState').updateState(n.instanceID,'commentsToggling',true);c('UFIInstanceState').updateStateFields(n.instanceID,'addCommentInput',{expanded:true});break;case c('UFIInstanceActionType').TRANSLATE_ALL:if(n.instanceID!==this.$UFIController2.instanceid)return;if(this.$UFIController2.islivestreaming)break;this.$UFIController9.shouldTranslateAllVisibleComments=true;c('UFIInstanceState').updateState(this.$UFIController2.instanceid,'translateallcommentid',null);this.$UFIController28();this.render();break;}}.bind(this))];};m.prototype.getStores=function(){return this.$UFIController10;};m.prototype.$UFIController25=function(n){var o=this.commentcounts[n],p=Math.min(o,this.$UFIController2.pagesize);return new (c('UFIRange'))(o-p,p);};m.prototype.$UFIController24=function(n,o,p){var q=this.$UFIController9,r=q.isActiveLoading,s=q.repliesExpandedMap,t=q.toplevelPagerClickCounts,u=q.replyPagerClickCounts,v=this.$UFIController2.ftentidentifier,w=n!==v;r[n]=o;if(w){s[n]=true;}else this.$UFIController9.hasPagedToplevel=true;if(n==v){var x=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid),y=t[x]||0;t[x]=y+1;this.getRange().updateRequestedRange(p.offset,p.length);}else{var z=u[n]||0;u[n]=z+1;this.replyRanges[n].updateRequestedRange(p.offset,p.length);}};m.prototype.$UFIController19=function(n){if(!this.$UFIController2.islivestreaming)return null;if(n.lvc)return 'Subscription';return 'Polling';};m.prototype.$UFIController29=function(){this.$UFIController9.payloadSource=c('FeedbackPayloadSourceType').USER_ACTION;this.$UFIController9.showLoadingUFI=true;this.$UFIController9.requestedInitialComments=true;var n=this.getToplevelCommentList().getCommentCount(),o=Math.min(n,this.$UFIController2.numLazyComments||0);c('forEachObject')(this.ranges,function(p){return p.updateRequestedRange(n-o,o);});this.fetchAndUpdate(c('FeedbackPayloadSourceType').USER_ACTION);c('UFIFeedbackTargets').getFeedbackTarget(this.$UFIController2.ftentidentifier,function(p){if(this.canRenderHeader()){this.renderHeader(p);}else this.$UFIController20(p);}.bind(this));};m.prototype.$UFIController20=function(n){if(this.shouldShowCommentOrderingModeSelector(n))c('DOM').scry(this.root,"^form ._3csb").slice(0,1).forEach(function(o){c('ReactDOMForUFI').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('UFIOrderingModeSelectorContainer.react').__setRef('UFIController'),contextArgs:this.$UFIController2,feedback:n}),o);}.bind(this));};m.prototype.$UFIController27=function(){if(Object.keys(this.$UFIController9.commentsLoadingTranslations).length==0)return;this.comments.forEach(function(n){if(this.$UFIController9.commentsLoadingTranslations[n.id]&&!!n.translationdata)delete this.$UFIController9.commentsLoadingTranslations[n.id];}.bind(this));Object.keys(this.repliesMap).forEach(function(n){var o=this.repliesMap[n];o.forEach(function(p){if(this.$UFIController9.commentsLoadingTranslations[p.id]&&!!p.translationdata)delete this.$UFIController9.commentsLoadingTranslations[p.id];}.bind(this));}.bind(this));};m.prototype.$UFIController28=function(){var n=this.comments.filter(function(q){return this.$UFIController30(q);}.bind(this)).map(function(q){return q.id;}),o=babelHelpers['extends']({},this.$UFIController9.defaultRepliesExpandedMap,this.$UFIController9.repliesExpandedMap),p=[];Object.keys(this.repliesMap).filter(function(q){return o[q];}).forEach(function(q){p=p.concat(this.repliesMap[q]);}.bind(this));n=n.concat(p.filter(function(q){return this.$UFIController30(q);}.bind(this)).map(function(q){return q.id;}));if(n.length>0){n.forEach(function(q){return this.$UFIController9.commentsLoadingTranslations[q]=true;}.bind(this));c('UFIUserActions').translateComments(this.$UFIController2.ftentidentifier,n,c('TranslationTrigger').TRANSLATE_ALL,{source:this.$UFIController2.source});}};m.prototype.$UFIController30=function(n){return n.istranslatable&&!n.translationdata&&!this.$UFIController9.commentsLoadingTranslations[n.id];};m.prototype.canRenderHeader=function(){return !!this.$UFIController4.getHeadRoot();};m.prototype.renderHeader=function(n){if(!this.canRenderHeader())return;var o=!!this.$UFIController2.hasReactions&&(this.$UFIController2.feedbackMode==='none'||this.$UFIController2.feedbackMode==='toggle')&&n.displayreactions&&this.shouldShowCommentOrderingModeSelector(n)&&(!this.$UFIController2.lazyFetch||this.$UFIController9.requestedInitialComments);c('ReactDOMForUFI').render(c('React').createElement(c('UFIActionHeader.react'),{contextArgs:this.$UFIController2,dispatcher:this.$UFIController3,feedbacktarget:n,showCommentOrderingModeSelector:o,stores:this.$UFIController10}),this.$UFIController4.getHeadRoot());var p=c('UFIRootRegistry').isSnowliftNode(this.$UFIController2.rootid);if(p&&this.$UFIController4.getSnowliftActionRoot())c('ReactDOMForUFI').render(c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController3,stores:this.$UFIController10},c('React').createElement(c('UFIActionLinks.react'),{contextArgs:this.$UFIController2,feedbacktarget:n,showCommentOrderingModeSelector:o,hideActorSelector:true})),this.$UFIController4.getSnowliftActionRoot());};m.prototype.shouldComponentUpdate=function(){if(this.$UFIController2.islivestreaming&&(this.$UFIController9.payloadSource===c('FeedbackPayloadSourceType').STREAMING||this.$UFIController9.payloadSource===c('FeedbackPayloadSourceType').LIVE_SEND)){var n=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerController(this.$UFIController2.instanceid),o=n?n.isState('playing')&&!n.getOption('WatchAndScroll','isActive'):false,p=c('UFICommentVisibilityStore').getVisibility(c('UFICommentVisibilityStore').getState(),this.$UFIController2)===c('UFIVisibility').VISIBLE;return o||p;}return true;};m.prototype.render=function(){if(!this.shouldComponentUpdate())return;if(this.$UFIController9.showLoadingUFI||c('UFIOrderingModeStore').isLiveStreaming(this.$UFIController2.instanceid)&&this.$UFIController9.loadingVODComments){c('ReactDOMForUFI').render(this.$UFIController31(),this.root);return;}var n=c('UFIInstanceState').getKeyForInstance(this.$UFIController2.instanceid,'commentsToggling');this.$UFIController9.feedback||i(0);var o=this.$UFIController9.feedback,p=o.reactionsentences,q=o.likesentences,r=o.replysocialsentencemaxreplies,s=this.comments.length||!c('isEmpty')((p||q).current),t=this.$UFIController9.payloadSource;if((s&&l(t)||n)&&this.$UFIController2.feedbackMode!==c('UFIFeedbackMode').NEVER){this.$UFIController9.isHidden=false;c('CommentPrelude').expand(this.root,false,'ufi_controller');}if(this.$UFIController2.disableCSSHiding&&this.$UFIController9.isHidden){c('ReactDOMForUFI').unmountComponentAtNode(this.root);return;}if(this.$UFIController2.lazyFetch&&!this.$UFIController9.requestedInitialComments){c('ReactDOMForUFI').render(this.$UFIController31(),this.root);this.$UFIController29();return;}var u=this.getRange();if(this.$UFIController7===null)this.$UFIController7=u.getOffset()+u.getLength()-1;var v=r||-1,w={};w[this.$UFIController2.ftentidentifier]=new (c('UFIRange'))(u.offset,u.length).updateRequestedRange(u.requestedOffset,u.requestedLength);for(var x in this.replyRanges)w[x]=new (c('UFIRange'))(this.replyRanges[x].offset,this.replyRanges[x].length).updateRequestedRange(this.replyRanges[x].requestedOffset,this.replyRanges[x].requestedLength);var y=babelHelpers['extends']({},this.$UFIController9.defaultRepliesExpandedMap,this.$UFIController9.repliesExpandedMap),z=!!this.$UFIController9.featuredCommentLists[this.$UFIController2.ftentidentifier],aa=c('UFIOrderingModeStore').isLiveStreaming(this.$UFIController2.instanceid)?true:this.getToplevelCommentList().getClientHasAll()&&u.offset===0&&u.length===this.getToplevelCommentList().getCommentCount(),ba=this.$UFIController32(t),ca=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid),da=c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController3,stores:this.$UFIController10},c('React').createElement(c('StaticUFI.react'),{feedback:this.$UFIController9.feedback,contextArgs:this.$UFIController2,repliesMap:this.repliesMap,commentCounts:this.commentcounts,deletedCounts:this.$UFIController9.deletedCounts,availableComments:this.comments,source:this.$UFIController2.source,payloadSource:t,ranges:w,authorProfiles:this.authorProfiles,loggingOffset:this.$UFIController7,replySocialSentenceMaxReplies:v,orderingMode:ca,hideOrderingModeSelector:z,commentPermalinks:this.$UFIController9.commentPermalinks,canAddCommentMap:this.$UFIController9.canAddCommentMap,canReplyMap:this.$UFIController9.canReplyMap,focusReply:ba,commentsToggling:n,isActiveLoading:this.$UFIController9.isActiveLoading,repliesExpandedMap:y,hasPagedToplevel:this.$UFIController9.hasPagedToplevel,commentIDToFocusOnMount:this.$UFIController9.commentIDToFocusOnMount,hideToplevelPager:aa,featuredCommentIDs:this.$UFIController9.featuredCommentIDs,loadingTranslationsMap:this.$UFIController9.commentsLoadingTranslations}));c('ReactDOMForUFI').render(da,this.root);c('LiveTimer').updateTimeStamps();var ea=this.$UFIController4.getParentForm();if(ea)c('Arbiter').inform(c('UFIUIEvents').Changed,{form:ea});if(t!=c('FeedbackPayloadSourceType').INITIAL_SERVER)c('Arbiter').inform('reflow');this.$UFIController9.focusedReplyComposer=null;};m.prototype.$UFIController32=function(n){if(n===c('FeedbackPayloadSourceType').INITIAL_SERVER&&this.$UFIController9.feedback&&this.$UFIController9.feedback.permalinkcommentid){return {replyID:'replycomposer-'+this.$UFIController9.feedback.permalinkcommentid};}else if(this.$UFIController9.focusedReplyComposer)return this.$UFIController9.focusedReplyComposer;return null;};m.prototype.$UFIController26=function(n,o){var p=this.$UFIController9.oldRange;if(p&&(p.offset!=n||p.length!=o)){var q=n<p.offset?p.length:0;if(q<o)return this.comments[q].id;}return this.$UFIController9.commentIDToFocusOnMount;};m.prototype.$UFIController33=function(n,o,p){if(n&&o.id===n.permalinkcommentid)return true;if(p>1)return true;if(p>0&&o.interestingReplyOffset===undefined)return true;var q=n&&o.author===n.viewerid;if(q&&p==1)return true;return false;};m.prototype.getNewRange=function(n,o,p){if(c('UFIOrderingModeStore').isLiveStreaming(this.$UFIController2.instanceid)){return new (c('UFIRange'))(0,o.feedcarded?4:50);}else return k(this.getRange(),this.commentcounts[o.ftentidentifier],p,n);};m.prototype.getNewReplyRange=function(n,o,p){var q=o.id;if(this.replyRanges[q]){return k(this.getReplyRange(q),this.commentcounts[q],p,n);}else if(o.interestingReplyOffset!==undefined){return new (c('UFIRange'))(o.interestingReplyOffset,1);}else{var r=this.$UFIController9.feedback&&this.$UFIController9.feedback.isranked,s=r?0:Math.min(p,2);return new (c('UFIRange'))(0,s);}};m.prototype.fetchAndUpdateWithLogs=function(n){n===this.$UFIController9.payloadSource||i(0);this.$UFIController34(n,true);};m.prototype.fetchAndUpdate=function(n){n===this.$UFIController9.payloadSource||i(0);this.$UFIController34(n,false);};m.prototype.$UFIController35=function(n){var o=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid);return {numPagerClicks:n?this.$UFIController9.toplevelPagerClickCounts[o]||0:null,viewAs:this.$UFIController2.viewas,feedContext:this.$UFIController2.feedcontext,feedbackSource:this.$UFIController2.source,streamingOrderReversed:this.$UFIController2.streamingCommentOrderReversed};};m.prototype.$UFIController36=function(n,o){return {numPagerClicks:o?this.$UFIController9.replyPagerClickCounts[n]||0:null,viewAs:this.$UFIController2.viewas,feedContext:this.$UFIController2.feedcontext};};m.prototype.$UFIController37=function(n){var o=this.$UFIController9.feedback,p=this.getToplevelCommentList(),q=this.getNewRange(n,this.$UFIController2,p.getCommentCount()),r=c('UFIFetcher').fetchCommentsOrThrow(p,q,this.$UFIController35(false));this.$UFIController38(q,r);var s=c('UFICommentFilters').getAuthors(r);r.forEach(function(u){var v=u.id,w=this.getReplyCommentList(v),x=this.getNewReplyRange(n,u,w.getCommentCount()),y=c('UFIFetcher').fetchCommentsOrThrow(w,x,this.$UFIController36(v,false));s.push.apply(s,c('UFICommentFilters').getAuthors(y));this.$UFIController39(x,u,y);}.bind(this));if(o)s.push.apply(s,c('UFIFeedbackFilters').getRequestedIDs(o));var t=c('UFILivePinnedCommentStore').getPinnedCommentAuthorID(this.$UFIController2.ftentidentifier);if(t)s.push(t);this.authorProfiles=c('ShortProfiles').getMultiNow(s);};m.prototype.$UFIController34=function(n,o){var p=c('UFIFeedbackTargets').getFeedbackTargetIfExists(this.$UFIController2.ftentidentifier);if(!p){var q=new Error(c('ex')('Feedback target %s not present while rendering UFI with source %s',this.$UFIController2.ftentidentifier,n));q.type='warn';c('ErrorUtils').reportError(q,true);return;}this.$UFIController9.feedback=p;if(l(n))this.render();if(this.canRenderHeader())this.renderHeader(p);if(!this.$UFIController9.isHidden)if(n===c('FeedbackPayloadSourceType').INITIAL_SERVER){this.$UFIController37(n);this.$UFIController3.dispatch(c('UFIStoryAction').commentsArrived(this.$UFIController2,this.getRange().getOffset(),this.comments.length,n));}else this.fetchAllComments(n,o).done(function(){return (this.$UFIController3.dispatch(c('UFIStoryAction').commentsArrived(this.$UFIController2,this.getRange().getOffset(),this.comments.length,n)));}.bind(this));};m.prototype.fetchAllComments=function(n,o){return c('Promise').resolve().then(function(){return this.fetchCommentsForFeedbackTarget(n,o).then(function(p){var q=c('UFICommentFilters').getAuthors(p);if(!this.$UFIController9.feedback||!this.$UFIController9.feedback.isthreaded||!p.length)return q;return this.fetchAllReplyIDsForComments(p,n,o).then(function(r){return q.concat(r);});}.bind(this)).then(function(p){if(!this.$UFIController9.feedback)return [];return (c('UFIFeedbackFilters').getRequestedIDs(this.$UFIController9.feedback).concat(p));}.bind(this));}.bind(this)).then(function(p){var q=c('UFILivePinnedCommentStore').getPinnedCommentAuthorID(this.$UFIController2.ftentidentifier);if(q)p.push(q);return c('UFIFetcher').fetchShortProfiles(p);}.bind(this)).then(function(p){this.authorProfiles=p;}.bind(this));};m.prototype.fetchCommentsForFeedbackTarget=function(n,o){var p=this.getToplevelCommentList().getCommentCount(),q=this.getNewRange(n,this.$UFIController2,p);return c('UFIFetcher').fetchComments(this.getToplevelCommentList(),q,this.$UFIController35(o)).then(function(r){this.$UFIController38(q,r);return r;}.bind(this));};m.prototype.$UFIController38=function(n,o){var p=this.getToplevelCommentList(),q=this.$UFIController2.ftentidentifier,r=this.$UFIController9,s=r.deletedCounts,t=r.canAddCommentMap,u=r.canReplyMap,v=r.commentPermalinks;this.replaceRange(n);this.comments=o;this.commentcounts[q]=p.getCommentCount();s[q]=p.getDeletedCount();t[q]=!this.$UFIController9.featuredCommentLists[q];o.forEach(function(w){var x=w.id,y=w.cancomment;u[x]=y;v[x]=p.getPermalinkForComment(x);});};m.prototype.fetchRepliesForComment=function(n,o,p){var q=n.id,r=this.getReplyCommentList(q).getCommentCount(),s=this.getNewReplyRange(o,n,r);return c('UFIFetcher').fetchComments(this.getReplyCommentList(q),s,this.$UFIController36(q,p)).then(function(t){this.$UFIController39(s,n,t);return t;}.bind(this));};m.prototype.$UFIController39=function(n,o,p){var q=o.id,r=this.getReplyCommentList(q),s=this.$UFIController9,t=s.deletedCounts,u=s.canAddCommentMap,v=s.featuredCommentLists,w=s.defaultRepliesExpandedMap,x=s.feedback,y=s.canReplyMap,z=s.commentPermalinks;this.replaceReplyRange(q,n);this.repliesMap[q]=p;this.commentcounts[q]=r.getCommentCount();t[q]=r.getDeletedCount();u[q]=!v[q];w[q]=this.$UFIController33(x,o,p.length);p.forEach(function(aa){var ba=aa.id,ca=aa.cancomment;y[ba]=ca;z[ba]=r.getPermalinkForComment(ba);});};m.prototype.fetchAllReplyIDsForComments=function(n,o,p){var q=new (c('Promise').all)(n.map(function(r){return this.fetchRepliesForComment(r,o,p).then(function(s){return c('UFICommentFilters').getAuthors(s);});}.bind(this)));return q.then(c('flattenArray'));};m.prototype.getToplevelCommentList=function(){var n=this.$UFIController2;if(this.$UFIController9.featuredCommentLists[n.ftentidentifier])return this.$UFIController9.featuredCommentLists[n.ftentidentifier];if(c('UFIOrderingModeStore').isLiveStreaming(this.$UFIController2.instanceid))return c('UFIToplevelStreamedCommentList').getCommentList(n.ftentidentifier,n.islivestreaming?c('UFIToplevelStreamedCommentList').GLOBAL_ID:n.instanceid);var o=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid);return c('UFIToplevelPagedCommentList').getCommentList(n.ftentidentifier,o);};m.prototype.getReplyCommentList=function(n){if(n in this.$UFIController9.featuredCommentLists)return this.$UFIController9.featuredCommentLists[n];var o=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid);return c('UFIReplyCommentList').getCommentList(this.$UFIController2.ftentidentifier,n,o);};m.prototype.getRange=function(){var n=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid);if(!(n in this.ranges)){var o=this.getToplevelCommentList().getCommentCount(),p=Math.min(o,this.$UFIController2.defaultNumCommentsToExpand);this.ranges[n]=new (c('UFIRange'))(o-p,p);}return this.ranges[n];};m.prototype.replaceRange=function(n){var o=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid);this.ranges[o]=n;};m.prototype.getReplyRange=function(n){if(!(n in this.replyRanges))this.replyRanges[n]=new (c('UFIRange'))();return this.replyRanges[n];};m.prototype.replaceReplyRange=function(n,o){this.replyRanges[n]=o;};m.prototype.$UFIController15=function(){this.$UFIController23();this.$UFIController40();};m.prototype.$UFIController40=function(){this.$UFIController41();this.$UFIController42();this.$UFIController21();this.$UFIController43();this.$UFIController44();this.$UFIController45();if(this.onUnloadSubscription)this.onUnloadSubscription.remove();c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').remove(this.$UFIController2));};m.prototype.$UFIController18=function(){this.$UFIController21();};m.prototype.$UFIController45=function(){var n=this.$UFIController2;c('UFICommercialBreakAdapter').stop(n.instanceid);};m.prototype.$UFIController44=function(){var n=this.$UFIController2;c('UFIVODStreamingComments').stop(n.ftentidentifier,n.instanceid);};m.prototype.$UFIController41=function(){this.ufiCentralUpdatesSubscriptions.forEach(function(n){return n&&c('UFICentralUpdates').unsubscribe(n);});};m.prototype.$UFIController42=function(){this.$UFIController1&&this.$UFIController1.release();};m.prototype.$UFIController21=function(){this.$UFIController6&&this.$UFIController6.release();};m.prototype.$UFIController43=function(){if(this.$UFIController11){this.$UFIController11.release();this.$UFIController11=null;}this.$UFIController8.forEach(function(n){return c('UFISharedDispatcher').unregister(n);});};m.prototype.$UFIController31=function(){var n=this.$UFIController2;return (c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController3,stores:this.$UFIController10},c('React').createElement(c('StaticUFI.react'),{feedback:this.$UFIController9.feedback,id:this.$UFIController2.ftentidentifier,contextArgs:n,commentCounts:this.commentcounts,loadingComments:true})));};m.prototype.shouldShowCommentOrderingModeSelector=function(n){var o=this.getToplevelCommentList().getCommentCount()||n.commentcount||0;return n.orderingmodes&&o>=c('UFIConstants').minCommentsForOrderingModeSelector&&!this.$UFIController9.featuredCommentLists[this.$UFIController2.ftentidentifier];};f.exports=m;}),null);