if (self.CavalryLogger) { CavalryLogger.start_js(["mzmag"]); }

__d('AjaxRequest',['ErrorUtils','Keys','PHPQuerySerializer','TimeSlice','URI','UserAgent_DEPRECATED','ZeroRewrites','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){function h(l,m,n){if(!(m instanceof c('URI')))m=new (c('URI'))(m);this.xhr=c('ZeroRewrites').getTransportBuilderForURI(m)();if(n&&l=='GET'){m.setQueryData(n);}else this._params=n;this.method=l;this.uri=m;this.xhr.open(l,m);}var i=window.XMLHttpRequest&&'withCredentials' in new XMLHttpRequest();h.supportsCORS=function(){return i;};h.ERROR='ar:error';h.TIMEOUT='ar:timeout';h.PROXY_ERROR='ar:proxy error';h.TRANSPORT_ERROR='ar:transport error';h.SERVER_ERROR='ar:http error';h.PARSE_ERROR='ar:parse error';h.SERVICE_UNAVAILABLE='ar:noservice';h._inflight=[];function j(){var l=h._inflight;h._inflight=[];l.forEach(function(m){m.abort();});}function k(l){l.onJSON=l.onError=l.onSuccess=null;clearTimeout(l._timer);if(l.xhr&&l.xhr.readyState<4){l.xhr.abort();l.xhr=null;}h._inflight=h._inflight.filter(function(m){return m&&m!=l&&m.xhr&&m.xhr.readyState<4;});}Object.assign(h.prototype,{timeout:60000,streamMode:true,prelude:/^for \(;;\);/,status:null,_eol:-1,_call:function l(m){if(this[m])this[m](this);},_parseStatus:function l(){var m;try{this.status=this.xhr.status;m=this.xhr.statusText;}catch(n){if(this.xhr.readyState>=4){this.errorType=h.TRANSPORT_ERROR;this.errorText=n.message;}return;}if(this.status===0&&!/^(file|ftp)/.test(this.uri)){this.errorType=h.TRANSPORT_ERROR;}else if(this.status>=100&&this.status<200){this.errorType=h.PROXY_ERROR;}else if(this.status>=200&&this.status<300){return;}else if(this.status>=300&&this.status<400){this.errorType=h.PROXY_ERROR;}else if(this.status>=400&&this.status<500){this.errorType=h.SERVER_ERROR;}else if(this.status===503){this.errorType=h.SERVICE_UNAVAILABLE;}else if(this.status>500&&this.status<600){this.errorType=h.PROXY_ERROR;}else if(this.status==1223){return;}else if(this.status>=12001&&this.status<=12156){this.errorType=h.TRANSPORT_ERROR;}else{m='unrecognized status code: '+this.status;this.errorType=h.ERROR;}if(!this.errorText)this.errorText=m;},_parseResponse:function l(){var m,n=this.xhr.readyState;try{m=this.xhr.responseText||'';}catch(o){if(n>=4){this.errorType=h.ERROR;this.errorText='responseText not available - '+o.message;}return;}while(this.xhr){var p=this._eol+1,q=this.streamMode?m.indexOf('\n',p):m.length;if(q<0&&n==4)q=m.length;if(q<=this._eol)break;var r=m;if(this.streamMode)r=m.substr(p,q-p).replace(/^\s*|\s*$/g,'');if(p===0&&this.prelude)if(this.prelude.test(r))r=r.replace(this.prelude,'');this._eol=q;if(r){try{this.json=JSON.parse(r);}catch(o){var s=/(<body[\S\s]+?<\/body>)/i.test(m)&&RegExp.$1,t={message:o.message,'char':p,excerpt:(p===0&&s||r).substr(512)};this.errorType=h.PARSE_ERROR;this.errorText='parse error - '+JSON.stringify(t);return;}c('ErrorUtils').applyWithGuard(this._call,this,['onJSON']);}}},_onReadyState:function l(m,n){var o=this.xhr&&this.xhr.readyState||0;if(this.status==null&&o>=2)this._parseStatus();if(!this.errorType&&this.status!=null)if(o==3&&this.streamMode||o==4)m.call(this);if(this.errorType||o==4){this._time=Date.now()-this._sentAt;n.call(this,this._call,!this.errorType?'onSuccess':'onError');k(this);}},send:function l(m){var n=c('TimeSlice').getGuardedContinuation('AjaxRequest xhr.onreadystatechange',true),o=c('TimeSlice').guard(this._parseResponse.bind(this),'AjaxRequest xhr.parseResponse',{isContinuation:false});this.xhr.onreadystatechange=this._onReadyState.bind(this,o,n);var p=this.timeout;if(p)this._timer=c('setTimeoutAcrossTransitions')(function(){this.errorType=h.TIMEOUT;this.errorText='timeout';this._time=Date.now()-this._sentAt;this._call('onError');k(this);}.bind(this),p);h._inflight.push(this);if(this.method=='POST')this.xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded');this._sentAt=Date.now();this.xhr.send(m?c('PHPQuerySerializer').serialize(m):'');},abort:function l(){k(this);},toString:function l(){var m='[AjaxRequest readyState='+this.xhr.readyState;if(this.errorType)m+=' errorType='+this.errorType+' ('+this.errorText+')';return m+']';},toJSON:function l(){var m={json:this.json,status:this.status,errorType:this.errorType,errorText:this.errorText,time:this._time};if(this.errorType)m.uri=this.uri;for(var n in m)if(m[n]==null)delete m[n];return m;}});if(window.addEventListener&&c('UserAgent_DEPRECATED').firefox())window.addEventListener('keydown',function(event){if(event.keyCode===c('Keys').ESC)event.prevent();},false);if(window.attachEvent)window.attachEvent('onunload',j);f.exports=h;}),null);
__d('ChatUnreadCount',['ChatDispatcher','ChatUnreadCountActionTypes','Map','MercuryIDs','MercurySingletonProvider','MercuryThreadInformer','MercuryThreads','MercuryUnreadState','isInFocusMode'],(function a(b,c,d,e,f,g){'use strict';h.getForFBID=function(j){return i.getForFBID(j);};h.get=function(){return i.get();};function h(j){this.$ChatUnreadCount1=j;this.$ChatUnreadCount2=c('MercuryThreadInformer').getForFBID(j);this.$ChatUnreadCount3=c('MercuryThreads').getForFBID(j);this.$ChatUnreadCount4=new (c('Map'))();this.$ChatUnreadCount5=c('MercuryUnreadState').getForFBID(j);this.setupSubscriptions();}h.prototype.getUnreadCountForUID=function(j){if(!j)return null;var k=c('MercuryIDs').getThreadIDFromUserID(j);if(!this.$ChatUnreadCount5.getIsThreadUnread(k)){this.$ChatUnreadCount4['delete'](j);return 0;}var l=this.$ChatUnreadCount3.getOrFetch(k),m=l&&l.unread_count;this.$ChatUnreadCount4.set(j,m);if(c('isInFocusMode')(k))return 0;return m;};h.prototype.setupSubscriptions=function(){this.$ChatUnreadCount2.subscribe('threads-updated',function(j,k){var l=Object.keys(k).some(function(m){var n=c('MercuryIDs').getUserIDFromThreadID(m);if(!n)return false;var o=this.getUnreadCountForUID(n),p=this.$ChatUnreadCount4.get(n)||0;return o!==p;}.bind(this));if(l)c('ChatDispatcher').dispatch({type:c('ChatUnreadCountActionTypes').COUNT_UPDATED});}.bind(this));this.$ChatUnreadCount2.subscribe('unread-updated',function(){return c('ChatDispatcher').dispatch({type:c('ChatUnreadCountActionTypes').COUNT_UPDATED});});};var i=new (c('MercurySingletonProvider'))(h);f.exports=h;}),null);
__d('ChatSidebarComposeLink.react',['fbt','ChatOpenTab','ChatOpenTabEventLogger','FantaTabActions','Link.react','MercuryConfig','MercuryThreads','React','TooltipData'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('MercuryThreads').get();i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m);}l.prototype.render=function(){var m=h._("New Message");return (c('React').createElement(c('Link.react'),babelHelpers['extends']({className:this.props.className,href:'#',onClick:this.$ChatSidebarComposeLink1},c('TooltipData').propsFor(m,'below'))));};l.prototype.$ChatSidebarComposeLink1=function(m){if(c('MercuryConfig').FantaTabs){var n=k.createNewLocalThreadGenerateID();c('FantaTabActions').openTab(n);c('ChatOpenTabEventLogger').log('sidebar');}else c('ChatOpenTab').openEmptyTab(null,'sidebar');m.preventDefault();};f.exports=l;}),null);
__d('DocRPC',['ErrorUtils'],(function a(b,c,d,e,f,g){var h={_apis:{},_dispatch:function i(j){var k;try{j=JSON.parse(j);}catch(l){throw new Error('DocRPC unparsable dispatch: "'+j+'"');}if(h._apis.hasOwnProperty(j.api)){var m=h._apis[j.api];if(m[j.method])k=c('ErrorUtils').applyWithGuard(m[j.method],m,j.args);}if(k===undefined)k=null;return JSON.stringify(k);},publish:function i(j,k){h._apis[k]=j;},proxy:function i(j,k,l){var i={};l.forEach(function(m){i[m]=function(){var n={api:k,method:m,args:Array.prototype.slice.call(arguments)},o;try{if(j.closed)throw new Error('DocRPC window closed');o=j.DocRPC._dispatch(JSON.stringify(n));}catch(p){c('ErrorUtils').reportError(p);return;}if(typeof o=='string')try{o=JSON.parse(o);}catch(p){throw new Error('DocRPC '+k+'.'+m+' unparsable return: "'+o+'"');}return o;};});return i;}};f.exports=b.DocRPC=h;}),null);
__d('ChatSidebarSheetChatOffline.react',['fbt','Link.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){return (c('React').createElement('div',null,h._("{=Go online} to see who's available.",[h.param('=Go online',c('React').createElement(c('Link.react'),{className:'fbChatGoOnlineLink',onClick:this.props.onGoOnlineClick},h._("Turn on chat")))])));};function l(){i.apply(this,arguments);}l.propTypes={onGoOnlineClick:k.func.isRequired};f.exports=l;}),null);
__d('ChatSidebarSheetChatReconnectMsg.react',['fbt','ChannelConstants','Link.react','MessengerSpinner.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.isMessenger,o=m.msecs,p=c('React').createElement(c('Link.react'),{className:'fbChatReconnectLink',onClick:this.props.onManuallyConnectClick},h._("No Internet Connection"));if(o==null||false===navigator.onLine){return (n?p:c('React').createElement('div',null,h._("Unable to connect to chat. Check your Internet connection.")));}else if(o>c('ChannelConstants').WARNING_COUNTDOWN_THRESHOLD_MSEC){return (n?p:c('React').createElement('div',null,h._("Unable to connect to chat. {try-again-link}",[h.param('try-again-link',c('React').createElement(c('Link.react'),{className:'fbChatReconnectLink',onClick:this.props.onManuallyConnectClick},h._("Try again")))])));}else if(o>1000){return (n?p:c('React').createElement('div',null,h._("Unable to connect to chat. Reconnecting in {seconds}",[h.param('seconds',Math.floor(o/1000))])));}else return (n?c('React').createElement('div',null,c('React').createElement(c('MessengerSpinner.react'),{color:'grey'}),h._("Connecting...")):c('React').createElement('div',null,h._("Unable to connect to chat. Reconnecting...")));};function l(){i.apply(this,arguments);}l.propTypes={isMessenger:k.bool,msecs:k.number,onManuallyConnectClick:k.func};f.exports=l;}),null);
__d('ChatSidebarSheetChatShutdownMsg.react',['fbt','ChannelConstants','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.hint,o=m.isMessenger;switch(n){case c('ChannelConstants').HINT_AUTH:return (c('React').createElement('div',null,h._("Your session has timed out. Please log in.")));case c('ChannelConstants').HINT_MAINT:return (o?c('React').createElement('div',null,h._("Messenger is currently down for maintenance.")):c('React').createElement('div',null,h._("Facebook {Chat} is currently down for maintenance.",[h.param('Chat',h._("Chat"))])));case c('ChannelConstants').HINT_CONN:default:return (o?c('React').createElement('div',null,h._("Messenger is currently unavailable.")):c('React').createElement('div',null,h._("Facebook {Chat} is currently unavailable.",[h.param('Chat',h._("Chat"))])));}};function l(){i.apply(this,arguments);}l.propTypes={hint:k.string,isMessenger:k.bool};f.exports=l;}),null);
__d('ChatSidebarSheet.react',['fbt','Arbiter','ChannelConnection','ChatBehavior','ChatSidebarSheetChatOffline.react','ChatSidebarSheetChatReconnectMsg.react','ChatSidebarSheetChatShutdownMsg.react','ChatVisibility','MessengerEnvironment','CSS','JSLogger','MercurySyncConstants','PresencePrivacy','React','SubscriptionsHandler','emptyFunction','joinClasses','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('JSLogger').create('sidebar_sheet'),l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(n){j.constructor.call(this,n);this.$ChatSidebarSheet3=function(o,p){this.setState({channelStatus:o,channelData:p});this.$ChatSidebarSheet4();}.bind(this);this.$ChatSidebarSheet4=function(){this.setState({isConnected:!c('ChannelConnection').disconnected(),isOnline:c('ChatVisibility').isOnline(),notifiesUserMessages:c('ChatBehavior').notifiesUserMessages()});}.bind(this);this.state={channelStatus:null,channelData:null,isConnected:!c('ChannelConnection').disconnected(),isOnline:c('ChatVisibility').isOnline(),notifiesUserMessages:c('ChatBehavior').notifiesUserMessages(),syncStateInvalid:false,syncStateReconnecting:false};}m.prototype.componentDidMount=function(){this.$ChatSidebarSheet1=new (c('SubscriptionsHandler'))();this.$ChatSidebarSheet1.addSubscriptions(c('ChannelConnection').subscribe([c('ChannelConnection').CONNECTED,c('ChannelConnection').SHUTDOWN,c('ChannelConnection').RECONNECTING],this.$ChatSidebarSheet3),c('ChannelConnection').subscribe([c('ChannelConnection').MUTE_WARNING,c('ChannelConnection').UNMUTE_WARNING],this.$ChatSidebarSheet4),c('PresencePrivacy').subscribe('privacy-user-presence-changed',this.$ChatSidebarSheet4),c('ChatBehavior').subscribe(c('ChatBehavior').ON_CHANGED,this.$ChatSidebarSheet4),c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE,function(){this.setState({syncStateInvalid:true,syncStateReconnecting:false});}.bind(this)),c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE_RETRY,function(){this.setState({syncStateReconnecting:true});}.bind(this)),c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE_RECOVER,function(){this.setState({syncStateInvalid:false,syncStateReconnecting:false});}.bind(this)));};m.prototype.componentWillUpdate=function(){if(this.$ChatSidebarSheet2){clearTimeout(this.$ChatSidebarSheet2);this.$ChatSidebarSheet2=null;}};m.prototype.componentWillUnmount=function(){this.$ChatSidebarSheet1&&this.$ChatSidebarSheet1.release();};m.prototype.render=function(){var n=c('MessengerEnvironment').messengerui,o=void 0,p=void 0;if(!this.state.isOnline&&!n){o='offline';p=this.$ChatSidebarSheet5();}else if(!this.state.isConnected||this.state.syncStateInvalid||this.state.syncStateReconnecting){o='error';p=this.$ChatSidebarSheet6(n);}else if(!this.state.notifiesUserMessages&&!n){o='notice';p=this.$ChatSidebarSheet7();}if(this.state.channelStatus===c('ChannelConnection').RECONNECTING&&this.state.channelData<1000||this.state.syncStateReconnecting)o=c('joinClasses')(o,'reconnecting');return c('React').createElement('div',{className:c('joinClasses')(this.props.className,o)},n?null:c('React').createElement('div',{className:'img'}),c('React').createElement('div',{className:'message'},p));};m.prototype.$ChatSidebarSheet6=function(n){if(this.state.channelStatus===c('ChannelConnection').SHUTDOWN||this.state.syncStateInvalid){return (c('React').createElement(c('ChatSidebarSheetChatShutdownMsg.react'),{hint:this.state.syncStateInvalid?undefined:this.state.channelData,isMessenger:n}));}else if(this.state.channelStatus===c('ChannelConnection').RECONNECTING||this.state.syncStateReconnecting){var o=this.state.syncStateReconnecting?1:this.state.channelData;if(o>1000)this.$ChatSidebarSheet2=c('setTimeoutAcrossTransitions')(this.$ChatSidebarSheet3.bind(this,c('ChannelConnection').RECONNECTING,o-1000),1000);return (c('React').createElement(c('ChatSidebarSheetChatReconnectMsg.react'),{isMessenger:n,msecs:o,onManuallyConnectClick:function(){if(!this.state.syncStateReconnecting)c('ChannelConnection').reconnect();}.bind(this)}));}return null;};m.prototype.$ChatSidebarSheet5=function(){return (c('React').createElement(c('ChatSidebarSheetChatOffline.react'),{onGoOnlineClick:function n(o){k.log('sidebar_go_online');c('ChatVisibility').goOnline();}}));};m.prototype.$ChatSidebarSheet7=function(){return (c('React').createElement('div',null,h._("Alerts are off while you use another client to chat.")));};f.exports=m;}),null);
__d('MessengerTypeaheadUtils',['fbt','ix','immutable','MercuryConfig','MercuryTypeaheadConstants','MessengerEnvironment','ReactDOM','SearchableEntry','WorkModeConfig','mapObject'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k=c('immutable').OrderedMap,l=500,m=100,n=c('WorkModeConfig').is_work_user||c('MercuryConfig').CoworkersOverGroups?[c('MercuryTypeaheadConstants').SEARCH_TYPE,c('MercuryTypeaheadConstants').FRIEND_TYPE,c('MercuryTypeaheadConstants').FB4C_TYPE,c('MercuryTypeaheadConstants').THREAD_TYPE,c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE,c('MercuryTypeaheadConstants').INTERNAL_BOT_PAGE_TYPE,c('MercuryTypeaheadConstants').PAGE_TYPE,c('MercuryTypeaheadConstants').NON_FRIEND_TYPE,c('MercuryTypeaheadConstants').GAME_TYPE]:[c('MercuryTypeaheadConstants').SEARCH_TYPE,c('MercuryTypeaheadConstants').FRIEND_TYPE,c('MercuryTypeaheadConstants').THREAD_TYPE,c('MercuryTypeaheadConstants').FB4C_TYPE,c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE,c('MercuryTypeaheadConstants').PAGE_TYPE,c('MercuryTypeaheadConstants').NON_FRIEND_TYPE,c('MercuryTypeaheadConstants').GAME_TYPE],o=(j={},j[c('MercuryTypeaheadConstants').SEARCH_TYPE]={header:''},j[c('MercuryTypeaheadConstants').FRIEND_TYPE]={header:h._("Contacts")},j[c('MercuryTypeaheadConstants').FB4C_TYPE]={header:h._("Co-workers")},j[c('MercuryTypeaheadConstants').THREAD_TYPE]={header:h._("Group Conversations")},j[c('MercuryTypeaheadConstants').PAGE_TYPE]={header:h._("Businesses")},j[c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE]={header:h._("Meeting Rooms")},j[c('MercuryTypeaheadConstants').INTERNAL_BOT_PAGE_TYPE]={header:h._("Internal Bots")},j[c('MercuryTypeaheadConstants').NON_FRIEND_TYPE]={header:h._("More People")},j.game={header:h._("Games")},j),p={sortEntries:function q(r,s){var t=[],u=[],v=[],w=[],x=[],y=[],z=[],aa=[],ba=[];r.forEach(function(ca){switch(ca.getType()){case c('MercuryTypeaheadConstants').FRIEND_TYPE:u.push(ca);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:v.push(ca);break;case c('MercuryTypeaheadConstants').THREAD_TYPE:w.push(ca);break;case c('MercuryTypeaheadConstants').PAGE_TYPE:case c('MercuryTypeaheadConstants').COMMERCE_PAGE_TYPE:y.push(ca);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:x.push(ca);break;case c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE:z.push(ca);break;case c('MercuryTypeaheadConstants').INTERNAL_BOT_PAGE_TYPE:aa.push(ca);break;case c('MercuryTypeaheadConstants').SEARCH_TYPE:t.push(ca);break;case c('MercuryTypeaheadConstants').GAME_TYPE:ba.push(ca);break;}});if(p._shouldHoistPages(s))return t.concat(y,u,v,w,z,aa,x,ba);return t.concat(u,v,w,z,aa,y,x,ba);},sortEntriesWithoutPages:function q(r){var s=[],t=[],u=[],v=[];r.forEach(function(w){switch(w.getType()){case c('MercuryTypeaheadConstants').FRIEND_TYPE:s.push(w);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:t.push(w);break;case c('MercuryTypeaheadConstants').THREAD_TYPE:u.push(w);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:v.push(w);break;}});return s.concat(t,u,v);},sortEntriesWithoutGroupsOrViewer:function q(r,s){var t=[],u=[],v=[];r.forEach(function(w){if(w.getUniqueID()===s)return;switch(w.getType()){case c('MercuryTypeaheadConstants').FRIEND_TYPE:t.push(w);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:u.push(w);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:v.push(w);break;}});return t.concat(u,v);},getEntryOrder:function q(r){var s=arguments.length<=1||arguments[1]===undefined?n:arguments[1];if(p._shouldHoistPages(r)){s=[].concat(s);s.splice(s.indexOf(c('MercuryTypeaheadConstants').PAGE_TYPE));s.unshift(c('MercuryTypeaheadConstants').PAGE_TYPE);}return s;},orderEntries:function q(r,s){var t=[];this.getEntryOrder(s).filter(function(u){return u!==c('MercuryTypeaheadConstants').SEARCH_TYPE;}).concat(c('MercuryTypeaheadConstants').SEARCH_TYPE).forEach(function(u){return t.push.apply(t,r.filter(function(v){return (this.areSectionsEqual(v.getType(),u));}.bind(this)));}.bind(this));return t;},buildSingleSection:function q(r){return k([['',r]]);},buildListSections:function q(r,s,t){if(!r.length)return k();t=this.getEntryOrder(s,t);var u=c('mapObject')(o,function(v){return babelHelpers['extends']({},v,{entries:[]});});u[c('MercuryTypeaheadConstants').COMMERCE_PAGE_TYPE]=u[c('MercuryTypeaheadConstants').PAGE_TYPE];r.forEach(function(v){var w=v.getType();if(u[w])u[w].entries.push(v);});return k(t.filter(function(v){return u[v].entries.length;}).map(function(v){return [u[v].header,u[v].entries];}));},buildCustomSection:function q(r,s){var t;return t={},t[r]=s,t;},areSectionsEqual:function q(r,s){if(r===c('MercuryTypeaheadConstants').COMMERCE_PAGE_TYPE)return s===c('MercuryTypeaheadConstants').COMMERCE_PAGE_TYPE||s===c('MercuryTypeaheadConstants').PAGE_TYPE;return r===s;},scrollEntryIntoView:function q(r,s){var t=c('ReactDOM').findDOMNode(s),u=s.getScrollTop(),v=r.offsetTop-u,w=t.offsetHeight-r.offsetHeight,x=Math.abs(w-v);if(v>=w&&x<=m){s.scrollToPosition(u+v-w,true,{duration:l});}else if(v<0&&x<=w+m)s.scrollToPosition(u+v,true,{duration:l});},getMessageSearchEntry:function q(r){if(!c('MercuryConfig').SearchCrossConversations||!c('MessengerEnvironment').messengerui||r.length<2)return null;return new (c('SearchableEntry'))({uniqueID:'__special_search_entry__',title:h._("Search Messages for \"{queryString}\"",[h.param('queryString',r)]),photo:i('/images/mercury/clients/messenger/search/SearchFieldIcon.png'),type:c('MercuryTypeaheadConstants').SEARCH_TYPE});},_shouldHoistPages:function q(r){if(!r)return false;return !!(c('MercuryConfig').HoistAgentsKeywords&&c('MercuryConfig').HoistAgentsKeywords.indexOf(r.toLowerCase().trim())!==-1);}};f.exports=p;}),null);
__d('MessengerSearchSource',['ChatSearchSource','MercuryConfig','MercuryIDs','MercuryParticipants','MercuryParticipantTypes','MercurySingletonProvider','MessengerEnvironment','MessengerTypeaheadUtils','SearchableEntry','emptyFunction','requireWeak'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=50,k=c('MercuryConfig').SearchCrossConversations&&c('MessengerEnvironment').messengerui;h=babelHelpers.inherits(l,c('ChatSearchSource'));i=h&&h.prototype;l.getForFBID=function(n){return m.getForFBID(n);};l.get=function(){return m.get();};function l(n){i.constructor.call(this,{queryRequests:[{uri:'/ajax/mercury/composer_query.php'}]});this.$MessengerSearchSource1=[];this.$MessengerSearchSource2=n;}l.prototype.bootstrapImpl=function(n){c('requireWeak')('OrderedFriendsList',function(p){return (p.getSearchableEntries(j,function(q){this.$MessengerSearchSource1=q;i.addLocalEntries.call(this,q);}.bind(this)));}.bind(this));var o=c('MercuryIDs').getParticipantIDFromUserID(this.$MessengerSearchSource2);c('MercuryParticipants').get(o,function(p){i.addLocalEntries.call(this,[new (c('SearchableEntry'))({uniqueID:p.fbid?p.fbid.toString():p.id,title:p.name,type:c('MercuryParticipantTypes').FRIEND,photo:p.big_image_src||p.image_src,uri:p.href,auxiliaryData:{isMessengerUser:p.is_messenger_user}})]);}.bind(this));i.bootstrapImpl.call(this,c('emptyFunction'));n();};l.prototype.searchImpl=function(n,o,p){p=p||{};if(n===''&&p.showDefaultEntries){o(this.$MessengerSearchSource1,n);var q=p&&p.onQueryFinished;q&&q(n);return;}p.threadLimit=c('MercuryConfig').MaxThreadResults;i.searchImpl.call(this,n,this.$MessengerSearchSource3(o,p),p);};l.prototype.$MessengerSearchSource3=function(n,o){return k&&o&&o.showThreadSearchEntry?function(p,q){var r=c('MessengerTypeaheadUtils').getMessageSearchEntry(q);if(r){n([r].concat(p),q);}else n(p,q);}:n;};var m=new (c('MercurySingletonProvider'))(l);f.exports=l;}),null);
__d('MessengerSearchTypeahead.react',['cx','fbt','ix','AbstractTypeahead.react','Bootloader','Image.react','MercuryIDs','MercuryThreadIDMap','MercuryThreads','MercuryTypeaheadConstants','MercuryVanityIDMap','MessengerActions','MessengerSearchSource','React','TypeaheadNavigation'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('MercuryThreadIDMap').get(),n=c('MercuryThreads').get(),o=c('React').PropTypes,p=j('/images/mercury/clients/messenger/threadlist/InboxThreadDismiss.png'),q=100,r=null,s=null;k=babelHelpers.inherits(t,c('React').PureComponent);l=k&&k.prototype;function t(){var v,w;for(var x=arguments.length,y=Array(x),z=0;z<x;z++)y[z]=arguments[z];return w=(v=l.constructor).call.apply(v,[this].concat(y)),u.call(this),w;}t.prototype.componentWillMount=function(){var v=function x(y,z,aa){var ba=y.indexOf(z),ca=ba==-1?y.length-1:ba-1;aa(ca==-1?y[y.length-1]:y[ca]);},w=function x(y,z,aa){var ba=y.indexOf(z)+1;aa(ba==y.length?y[0]:y[ba]);};if(this.props.isFlipped){v=c('TypeaheadNavigation').moveDown;w=c('TypeaheadNavigation').moveUp;}this.$MessengerSearchTypeahead1=function(x){for(var y=arguments.length,z=Array(y>1?y-1:0),aa=1;aa<y;aa++)z[aa-1]=arguments[aa];return v.apply(undefined,[s.orderEntries(x,this.props.queryString)].concat(z));}.bind(this);this.$MessengerSearchTypeahead2=function(x){for(var y=arguments.length,z=Array(y>1?y-1:0),aa=1;aa<y;aa++)z[aa-1]=arguments[aa];return w.apply(undefined,[s.orderEntries(x,this.props.queryString)].concat(z));}.bind(this);};t.prototype.render=function(){var v=this.props.isFacebookChat?i._("Search"):i._("Search Messenger");return (c('React').createElement('div',{className:"_3rh8"},c('React').createElement(c('AbstractTypeahead.react'),{autoHighlight:this.props.isFacebookChat,blurOnWindowBlur:false,className:"_5iwm"+(this.props.isFocused||!!this.props.queryString?' '+"_5iwn":'')+(' '+"_150g")+(this.props.hideResults?' '+"_1a03":''),disabled:this.props.hideResults,inputClassName:"_3rhb",navigation:{moveUp:this.$MessengerSearchTypeahead1,moveDown:this.$MessengerSearchTypeahead2},onBlur:this.props.onBlur,onChange:this.$MessengerSearchTypeahead3,onFocus:function(){var w;this.$MessengerSearchTypeahead4();(w=this.props).onFocus.apply(w,arguments);}.bind(this),onMouseOver:this.$MessengerSearchTypeahead4,onClick:this.$MessengerSearchTypeahead4,onSelectAttempt:this.$MessengerSearchTypeahead5,placeholder:v,presenter:{ViewRenderer:r,alwaysVisibleOnFocus:true,extraRendererProps:{className:"_11_d",hasHoverState:this.props.isFacebookChat,isLoading:this.state.isLoading,onScrollIntoView:this.props.onScrollIntoView,viewer:this.props.viewer},maxEntries:this.props.maxEntries||q,sortEntries:this.$MessengerSearchTypeahead6,useLayer:false},queryString:this.props.queryString,role:'search',searchSource:c('MessengerSearchSource').getForFBID(this.props.viewer),searchSourceOptions:{onQueryFinished:this.$MessengerSearchTypeahead7,onQueryStarted:this.$MessengerSearchTypeahead8,showDefaultEntries:!this.props.isFacebookChat,showThreadSearchEntry:!this.props.isFacebookChat&&!!this.props.queryString},selectOnTab:true,spellCheck:false,showEntriesOnFocus:!this.props.isFacebookChat}),c('React').createElement(c('Image.react'),{onMouseDown:this.props.onClear,className:(!this.props.queryString?"hidden_elem":'')+(' '+"_2xme"),src:p})));};t.propTypes={hideResults:o.bool,isFacebookChat:o.bool,isFlipped:o.bool,isFocused:o.bool,maxEntries:o.number,onBlur:o.func,onChange:o.func,onClear:o.func,onFocus:o.func,onSelect:o.func.isRequired,onScrollIntoView:o.func,queryString:o.string,viewer:o.string.isRequired};var u=function v(){this.state={isLoading:false,orderable:!!s};this.$MessengerSearchTypeahead3=function(){var w;this.setState({isLoaded:false});(w=this.props).onChange.apply(w,arguments);}.bind(this);this.$MessengerSearchTypeahead4=function(){if(!this.state.orderable)c('Bootloader').loadModules(["MessengerTypeaheadView.react","MessengerTypeaheadUtils"],function(w,x){r=w;s=x;this.setState({orderable:true});}.bind(this),'MessengerSearchTypeahead.react');}.bind(this);this.$MessengerSearchTypeahead8=function(w){if(w===this.props.queryString)this.setState({isLoading:true});}.bind(this);this.$MessengerSearchTypeahead7=function(w){if(w===this.props.queryString)this.setState({isLoading:false,isLoaded:true});}.bind(this);this.$MessengerSearchTypeahead6=function(w){return s?s.sortEntries(w,this.props.queryString):w;}.bind(this);this.$MessengerSearchTypeahead5=function(w){var x=w.getUniqueID(),y=w.getType(),z=w.getAuxiliaryData().alias;if(z)c('MercuryVanityIDMap').set(z,c('MercuryIDs').getParticipantIDFromUserID(x));if(y===c('MercuryTypeaheadConstants').SEARCH_TYPE){c('MessengerActions').changeQueryAll(this.props.queryString);}else if(y===c('MercuryTypeaheadConstants').THREAD_TYPE){m.getClientIDFromServerID(x,function(aa){this.props.onSelect(aa,y);}.bind(this));}else n.getThreadMeta(c('MercuryIDs').getThreadIDFromUserID(x),function(aa){this.props.onSelect(aa.thread_id,y);}.bind(this));}.bind(this);};f.exports=t;}),null);
__d('ChatTypeaheadWrapper.react',['cx','Arbiter','Bootloader','ChatConfig','ChatOpenTab','ChatOpenTabEventLogger','ChatSidebarComposeLink.react','ChatSidebarSections','ChatSidebarSheet.react','ChatTypeaheadConstants','FantaTabActions','MercuryConfig','MessengerSearchTypeahead.react','React','Run','emptyFunction','getActiveElement'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=40,l=c('ChatConfig').get('divebar_rounded_profile',false);function m(o){c('Arbiter').inform('sidebar/typeahead/active',o);}i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={height:0,value:'',isSearching:false,dropdownComponent:null},p;}n.prototype.componentDidMount=function(){if(this.props.isSidebar){c('Arbiter').subscribe('sidebar/resized',function(o,p){this.setState({height:p});}.bind(this));c('Run').onAfterLoad(function(){c('Bootloader').loadModules(["ChatSidebarDropdown.react","SidebarType","ChatSidebarActions"],function(o,p,q){this.setState({dropdownComponent:c('React').createElement(o,{sidebarType:p.SIDEBAR,onToggleSidebar:q.disable})});}.bind(this),'ChatTypeaheadWrapper.react');}.bind(this));}else c('Arbiter').subscribe('buddyList/resized',function(o,p){this.setState({height:p});}.bind(this));};n.prototype.componentWillUpdate=function(o,p){if(p.isSearching!==this.state.isSearching)m(p.isSearching);};n.prototype.render=function(){var o=this.state.height!=null?Math.floor((this.state.height-k*2)/k):null;return (c('React').createElement('div',{className:!l?"squareProfile":''},this.props.isFlipped?c('React').createElement(c('ChatSidebarSheet.react'),{className:'fbChatSidebarMessage'}):null,c('React').createElement(c('MessengerSearchTypeahead.react'),{isFacebookChat:true,isFlipped:this.props.isFlipped,isFocused:true,maxEntries:o,queryString:this.state.value,viewer:this.props.id,onBlur:function(){return this.setState({isSearching:false,value:''});}.bind(this),onChange:function(p){var q=p.target.value;this.setState({isSearching:q!=='',value:q});}.bind(this),onClear:c('emptyFunction'),onFocus:c('emptyFunction'),onScrollIntoView:c('emptyFunction'),onSelect:function(p,q){c('getActiveElement')().blur();if(c('MercuryConfig').FantaTabs){if(q===c('ChatTypeaheadConstants').MEETING_ROOM_PAGE_TYPE){c('Bootloader').loadModules(["MercuryIDs","goURI"],function(r,s){this.setState({isSearching:false,value:''});var t=r.getUserIDFromThreadID(p);s('/'+t);}.bind(this),'ChatTypeaheadWrapper.react');}else{c('FantaTabActions').openTab(p,q);c('ChatOpenTabEventLogger').logByType(q,c('ChatSidebarSections').TYPEAHEAD,p);}}else c('ChatOpenTab').openTabByType(p,q,c('ChatSidebarSections').TYPEAHEAD);}.bind(this)}),this.props.isSidebar?c('React').createElement('div',{className:"_531b"},this.state.dropdownComponent,c('React').createElement(c('ChatSidebarComposeLink.react'),{className:"_3a-4 _5q85"})):null,this.props.isFlipped?null:c('React').createElement(c('ChatSidebarSheet.react'),{className:'fbChatSidebarMessage'})));};f.exports=n;}),null);
__d('ChatTypeaheadCore',['ChatTypeaheadWrapper.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={init:function i(j,k,l,m){c('ReactDOM').render(c('React').createElement(c('ChatTypeaheadWrapper.react'),{id:k,isSidebar:l,isFlipped:m}),j);}};f.exports=h;}),null);
__d('FBPaymentsDialogContainerMount',['FBPaymentsDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('FBPaymentsDialogContainer.react'),null),j);}};f.exports=h;}),null);
__d('SidebarAppTickerResizer',['cx','Animation','Arbiter','AsyncRequest','ChatSidebarActions','ChatSidebarStore','ChatSidebarVisibility','CSS','DOM','debounce','Event','SidebarType','SimpleDrag','TickerController','$','queryThenMutateDOM'],(function a(b,c,d,e,f,g,h){var i=1e-07,j=1,k=85,l=171,m=165,n=300,o=46,p=90,q=90,r=82,s=150;function t(u,v,w,x,y,z,aa){'use strict';this.$SidebarAppTickerResizer1=c('$')('pagelet_ticker');this.$SidebarAppTickerResizer2=c('$')('pagelet_canvas_nav_content');this.$SidebarAppTickerResizer3=c('$')('pagelet_admined_pages');var ba=c('DOM').scry(this.$SidebarAppTickerResizer3,'.uiScrollableAreaContent');this.$SidebarAppTickerResizer4=ba.length?ba[0]:null;this.$SidebarAppTickerResizer5=this.$SidebarAppTickerResizer1.parentNode;this.$SidebarAppTickerResizer6=y;this.$SidebarAppTickerResizer7=z;this.$SidebarAppTickerResizer8=aa;var ca=parseInt(x,10);if(!isNaN(ca)){if(ca>k)if(ca!=this.$SidebarAppTickerResizer9())x=this.$SidebarAppTickerResizer9()+'px';this.$SidebarAppTickerResizer10(ca);}this.$SidebarAppTickerResizer2.style.height=x;this.$SidebarAppTickerResizer11(u,v,w);if(x===null)c('Arbiter').subscribe('AppsDivebar/show-apps',this.$SidebarAppTickerResizer12.bind(this));if(!y){this.$SidebarAppTickerResizer13();c('CSS').hide(u);}c('Arbiter').subscribe('ChatSidebarDropdown/closeTicker',this.$SidebarAppTickerResizer13.bind(this));c('Arbiter').subscribe('ChatSidebarDropdown/openTicker',this.$SidebarAppTickerResizer14.bind(this));c('Arbiter').subscribe('sidebar/visibility',function(da,ea){if(ea)this.$SidebarAppTickerResizer15();}.bind(this));this.$SidebarAppTickerResizer16=c('debounce')(this.$SidebarAppTickerResizer12.bind(this),200);c('Event').listen(window,'resize',this.$SidebarAppTickerResizer16);c('Arbiter').inform('Ticker/resized');}t.prototype.$SidebarAppTickerResizer15=function(){'use strict';var u=Math.round(parseFloat(this.$SidebarAppTickerResizer1.style.height));if(u<=i)return;c('TickerController').show(this.$SidebarAppTickerResizer1);};t.prototype.$SidebarAppTickerResizer12=function(u){'use strict';c('queryThenMutateDOM')(function(){this.$SidebarAppTickerResizer17();}.bind(this),function(){var v=Math.round(parseFloat(this.$SidebarAppTickerResizer1.style.height));if(v>Math.round(this.$SidebarAppTickerResizer18())||this.$SidebarAppTickerResizer19&&this.$SidebarAppTickerResizer19>j){var w=this.$SidebarAppTickerResizer19/this.$SidebarAppTickerResizer20*100,x=this.$SidebarAppTickerResizer21(0,this.$SidebarAppTickerResizer18()-w);if(!(u&&u.type==='resize'))this.$SidebarAppTickerResizer22(x);c('ChatSidebarVisibility').shouldShowSidebar(null,function(y,z){c('ChatSidebarActions').show(y?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);});}}.bind(this));};t.prototype.$SidebarAppTickerResizer18=function(){'use strict';if(!this.$SidebarAppTickerResizer6)return 0;if(c('ChatSidebarStore').getVisibleType()!==c('SidebarType').SIDEBAR)return p;return Math.min(p,(this.$SidebarAppTickerResizer20-this.$SidebarAppTickerResizer23-r)*100/this.$SidebarAppTickerResizer20);};t.prototype.$SidebarAppTickerResizer24=function(){'use strict';if(!this.$SidebarAppTickerResizer8)return 0;if(c('ChatSidebarStore').getVisibleType()!==c('SidebarType').SIDEBAR)return q;return Math.min(q,(this.$SidebarAppTickerResizer20-this.$SidebarAppTickerResizer23-r)*100/this.$SidebarAppTickerResizer20);};t.prototype.$SidebarAppTickerResizer11=function(u,v,w){'use strict';var x=new (c('SimpleDrag'))(u);x.subscribe('start',this.$SidebarAppTickerResizer25.bind(this));x.subscribe(['update','end'],this.$SidebarAppTickerResizer26.bind(this));var y=new (c('SimpleDrag'))(v);y.subscribe('start',this.$SidebarAppTickerResizer25.bind(this));y.subscribe('update',this.$SidebarAppTickerResizer27.bind(this));y.subscribe('end',this.$SidebarAppTickerResizer28.bind(this));var z=new (c('SimpleDrag'))(w);z.subscribe('start',this.$SidebarAppTickerResizer25.bind(this));z.subscribe(['update','end'],this.$SidebarAppTickerResizer29.bind(this));};t.prototype.$SidebarAppTickerResizer25=function(u,event){'use strict';this.$SidebarAppTickerResizer30=event.clientY;this.$SidebarAppTickerResizer17();this.$SidebarAppTickerResizer31();};t.prototype.$SidebarAppTickerResizer17=function(){'use strict';this.$SidebarAppTickerResizer23=this.$SidebarAppTickerResizer2.offsetTop;this.$SidebarAppTickerResizer32=this.$SidebarAppTickerResizer1.offsetHeight;this.$SidebarAppTickerResizer20=this.$SidebarAppTickerResizer5.offsetHeight;this.$SidebarAppTickerResizer19=this.$SidebarAppTickerResizer2.offsetHeight;this.$SidebarAppTickerResizer33=this.$SidebarAppTickerResizer3.offsetHeight;this.$SidebarAppTickerResizer34=this.$SidebarAppTickerResizer19;};t.prototype.$SidebarAppTickerResizer31=function(){'use strict';c('CSS').addClass(this.$SidebarAppTickerResizer5,"_4vfq");};t.prototype.$SidebarAppTickerResizer35=function(){'use strict';c('CSS').removeClass(this.$SidebarAppTickerResizer5,"_4vfq");};t.prototype.$SidebarAppTickerResizer26=function(u,event){'use strict';var v=(this.$SidebarAppTickerResizer19+this.$SidebarAppTickerResizer33)/this.$SidebarAppTickerResizer20*100,w=this.$SidebarAppTickerResizer21(event.clientY-this.$SidebarAppTickerResizer30,this.$SidebarAppTickerResizer18()-v);if(u=='end'){this.$SidebarAppTickerResizer35();this.$SidebarAppTickerResizer22(w);}c('ChatSidebarVisibility').shouldShowSidebar(null,function(x,y){c('ChatSidebarActions').show(x?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);});};t.prototype.$SidebarAppTickerResizer29=function(u,event){'use strict';var v=(this.$SidebarAppTickerResizer32+this.$SidebarAppTickerResizer19)/this.$SidebarAppTickerResizer20*100,w=this.$SidebarAppTickerResizer4?Math.min(this.$SidebarAppTickerResizer24()-v,this.$SidebarAppTickerResizer4.offsetHeight/this.$SidebarAppTickerResizer20*100):this.$SidebarAppTickerResizer24()-v;this.$SidebarAppTickerResizer36(event.clientY-this.$SidebarAppTickerResizer30,w);if(u=='end'){this.$SidebarAppTickerResizer35();c('Arbiter').inform('Ticker/resized');}c('ChatSidebarVisibility').shouldShowSidebar(null,function(x,y){c('ChatSidebarActions').show(x?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);});};t.prototype.$SidebarAppTickerResizer27=function(u,event){'use strict';var v=-this.$SidebarAppTickerResizer19,w=this.$SidebarAppTickerResizer9()-this.$SidebarAppTickerResizer19,x=this.$SidebarAppTickerResizer37(event.clientY-this.$SidebarAppTickerResizer30,v,w);this.$SidebarAppTickerResizer21(-x,this.$SidebarAppTickerResizer18());this.$SidebarAppTickerResizer34=this.$SidebarAppTickerResizer19+x;this.$SidebarAppTickerResizer34=Math.max(j,this.$SidebarAppTickerResizer34);this.$SidebarAppTickerResizer2.style.height=this.$SidebarAppTickerResizer34+'px';};t.prototype.$SidebarAppTickerResizer28=function(u,event){'use strict';var v=this.$SidebarAppTickerResizer34,w=this.$SidebarAppTickerResizer38(this.$SidebarAppTickerResizer34);this.$SidebarAppTickerResizer10(w);var x=this.$SidebarAppTickerResizer21(this.$SidebarAppTickerResizer19-w,this.$SidebarAppTickerResizer18());if(this.$SidebarAppTickerResizer19!=w){this.$SidebarAppTickerResizer39(w);this.$SidebarAppTickerResizer22(x);}new (c('Animation'))(this.$SidebarAppTickerResizer2).from('height',v).to('height',w).duration(n).go();};t.prototype.$SidebarAppTickerResizer10=function(u){'use strict';if(!this.$SidebarAppTickerResizer7)return;var v="_3qrt",w=document.getElementsByClassName(v),x='';if(u==this.$SidebarAppTickerResizer40()){x='inline';}else x='';for(var y=0;y<w.length;y++)w[y].style.display=x;};t.prototype.$SidebarAppTickerResizer21=function(u,v){'use strict';var w=this.$SidebarAppTickerResizer32+u,x=w/this.$SidebarAppTickerResizer20*100;x=Math.max(i,Math.min(v,x));this.$SidebarAppTickerResizer1.style.height=x+'%';if(x!=i){c('CSS').removeClass(this.$SidebarAppTickerResizer1,'hidden_elem');this.$SidebarAppTickerResizer15();}return x;};t.prototype.$SidebarAppTickerResizer36=function(u,v){'use strict';var w=this.$SidebarAppTickerResizer33+u,x=w/this.$SidebarAppTickerResizer20*100;x=Math.max(i,Math.min(v,x));this.$SidebarAppTickerResizer3.style.height=x+'%';return x;};t.prototype.$SidebarAppTickerResizer38=function(u){'use strict';var v=this.$SidebarAppTickerResizer40(),w=this.$SidebarAppTickerResizer9();return u<w-o?u<v-o?j:v:w;};t.prototype.$SidebarAppTickerResizer40=function(){'use strict';return k;};t.prototype.$SidebarAppTickerResizer9=function(){'use strict';if(this.$SidebarAppTickerResizer7){return m;}else return l;};t.prototype.$SidebarAppTickerResizer41=function(u){'use strict';var v=this.$SidebarAppTickerResizer9();return u<0?j:u>v?v:u;};t.prototype.$SidebarAppTickerResizer37=function(u,v,w){'use strict';return u<v?v:u>w?w:u;};t.prototype.$SidebarAppTickerResizer22=function(u){'use strict';new (c('AsyncRequest'))('/ajax/feed/ticker/resize').setData({height:''+u}).setMethod('POST').send();c('Arbiter').inform('Ticker/resized');};t.prototype.$SidebarAppTickerResizer39=function(u){'use strict';new (c('AsyncRequest'))('/ajax/feed/apps/resize').setData({height:''+u}).setMethod('POST').send();};t.prototype.$SidebarAppTickerResizer42=function(u){'use strict';var v=this.$SidebarAppTickerResizer32,w=this.$SidebarAppTickerResizer20*u/100;new (c('Animation'))(this.$SidebarAppTickerResizer1).from('height',v).to('height',w).duration(s).ondone(function(){this.$SidebarAppTickerResizer1.style.height=u+'%';this.$SidebarAppTickerResizer22(u===0?'0.0':u);c('ChatSidebarVisibility').shouldShowSidebar(null,function(x,y){c('ChatSidebarActions').show(x?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);});}.bind(this)).go();};t.prototype.$SidebarAppTickerResizer13=function(){'use strict';this.$SidebarAppTickerResizer17();this.$SidebarAppTickerResizer42(0);};t.prototype.$SidebarAppTickerResizer14=function(){'use strict';this.$SidebarAppTickerResizer1.style.height='40px';c('TickerController').show(this.$SidebarAppTickerResizer1,function(){this.$SidebarAppTickerResizer17();var u=(this.$SidebarAppTickerResizer20-this.$SidebarAppTickerResizer23-r-this.$SidebarAppTickerResizer19)*50/this.$SidebarAppTickerResizer20;this.$SidebarAppTickerResizer42(u);}.bind(this));};f.exports=t;}),null);
__d('ChatTimezoneWarning',['MercuryParticipants','MercuryViewer','MessengerBotIDs'],(function a(b,c,d,e,f,g){'use strict';var h=1,i={updateUserTimezoneWarning:function j(k,l,m){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(n){var o=n.employee,p=n.timezone,q=0;if(k.timezone_warning_dismiss_count!==undefined){var r=k.timezone_warning_dismiss_count;for(var s=Object.entries(r),t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var v;if(t){if(u>=s.length)break;v=s[u++];}else{u=s.next();if(u.done)break;v=u.value;}var w=v,x=w[0],y=w[1];if(x===n.fbid)q=Number(y);}}else return;if(o&&p&&q<h)c('MercuryParticipants').getMulti(k.participants,function(z){var aa={},ba=true;for(var ca in z){ba=ba&&z[ca].employee;var da=!!c('MessengerBotIDs')[z[ca].fbid];if(z[ca].timezone!==undefined&&z[ca].timezone!==null&&p!==z[ca].timezone&&!da){var ea=z[ca].fbid;aa[ea]=z[ca];}}if(Object.keys(aa).length>0&&ba){aa.self=n;l(aa);}else m();});});}};f.exports=i;}),null);
__d('ChatTabTypeaheadDataSource',['MercuryConfig','MercuryTypeaheadConstants','MercuryTypeaheadDataSource'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('MercuryTypeaheadDataSource'));i=h&&h.prototype;function j(k){'use strict';k=k||{};k.maxResults=c('MercuryTypeaheadConstants').COMPOSER_CHATTAB_MAX;i.constructor.call(this,k);this.$ChatTabTypeaheadDataSource1=true;}j.prototype.buildData=function(k){'use strict';var l=[],m=[],n=[],o=[],p=[],q=[];k.forEach(function(s){var t=i.getEntry.call(this,s);switch(t.render_type){case c('MercuryTypeaheadConstants').FRIEND_TYPE:l.push(s);break;case c('MercuryTypeaheadConstants').THREAD_TYPE:if(this.$ChatTabTypeaheadDataSource1)m.push(s);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:n.push(s);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:o.push(s);break;case c('MercuryTypeaheadConstants').PAGE_TYPE:if(this.$ChatTabTypeaheadDataSource1)if(c('MercuryConfig').LinkedAgents&&c('MercuryConfig').LinkedAgents.indexOf(s.toString())>-1){q.push(s);}else p.push(s);break;default:break;}}.bind(this),this);var r=q.concat(l,o,m,p,n);return i.buildData.call(this,r);};j.prototype.query=function(k,l,m,n){'use strict';return i.query.call(this,k,l,m,n);};j.prototype.respond=function(k,l,m){'use strict';return i.respond.call(this,k,l,m);};j.prototype.setShowThreads=function(k){'use strict';this.$ChatTabTypeaheadDataSource1=k;};f.exports=j;}),null);
__d('MNCommerceDialogContainer.react',['MNCommerceDialogStateStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').createClass({displayName:'MNCommerceDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('MNCommerceDialogStateStore'))],statics:{calculateState:function i(){var j=c('MNCommerceDialogStateStore').getDialogContainer();return {dialogContainer:j};}},render:function i(){var j=this.state.dialogContainer;if(!j)return null;return c('React').createElement(j,null);}});f.exports=h;}),null);
__d('MNCommerceDialogContainerMount',['MNCommerceDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('MNCommerceDialogContainer.react'),null),j);}};f.exports=h;}),null);
__d('FBRTCCallSummaryUploader',['Banzai','FBRTCCallSummary','FBRTCCallSummaryStore'],(function a(b,c,d,e,f,g){var h={init:function i(){var j=c('FBRTCCallSummaryStore').getInstance();c('Banzai').subscribe(c('Banzai').SEND,function(){c('FBRTCCallSummary').logSavedSummaries(j);});}};f.exports=h;}),null);
__d('P2PDialogStore',['EventEmitter','P2PActionConstants','P2PDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=void 0,k={};h=babelHelpers.inherits(l,c('EventEmitter'));i=h&&h.prototype;function l(){i.constructor.call(this);j=c('P2PDispatcher').register(this.onEventDispatched.bind(this));k={dialogClass:null,dialogProps:null};}l.prototype.getState=function(){return k;};l.prototype.onEventDispatched=function(m){var n=m.type,o=m.data;switch(n){case c('P2PActionConstants').DIALOG_SHOWN:k.dialogClass=o.dialogClass;k.dialogProps=o.dialogProps;this.emit('change');break;case c('P2PActionConstants').DIALOG_CLOSED:k.dialogClass=null;k.dialogProps=null;this.emit('change');break;}};f.exports=new l();}),null);
__d('P2PDialogContainer.react',['P2PDialogStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.state=c('P2PDialogStore').getState(),this.onDialogStoreChange=function(){this.setState(c('P2PDialogStore').getState());}.bind(this),l;}j.prototype.componentDidMount=function(){this.dialogStoreSub=c('P2PDialogStore').addListener('change',this.onDialogStoreChange);};j.prototype.componentWillUnmount=function(){if(this.dialogStoreSub){this.dialogStoreSub.remove();this.dialogStoreSub=null;}};j.prototype.render=function(){if(!this.state.dialogClass)return null;var k=this.state.dialogClass;return c('React').createElement(k,babelHelpers['extends']({},this.state.dialogProps,{key:'dialog'}));};f.exports=j;}),null);
__d('P2PDialogContainerMount',['P2PDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('P2PDialogContainer.react'),null),j);}};f.exports=h;}),null);
__d('PagesPlatformActionConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={BOOKING_REQUEST_ACCEPT_ERROR:'booking_request_accept_error',BOOKING_REQUEST_ACCEPT_INITIATED:'booking_request_accept_initiated',BOOKING_REQUEST_ACCEPTED:'booking_request_accepted',BOOKING_REQUEST_CREATED:'booking_request_created',BOOKING_REQUEST_DECLINE_ERROR:'booking_request_decline_error',BOOKING_REQUEST_DECLINE_INITIATED:'booking_request_decline_initiated',BOOKING_REQUEST_DECLINED:'booking_request_declined',BOOKING_REQUEST_RESCHEDULE_INITIATED:'booking_request_reschedule_initiated',BOOKING_REQUEST_RESCHEULED:'booking_request_reschedule',DIALOG_CLOSED:'dialog_closed',DIALOG_SHOWN:'dialog_shown',NEW_TIME_CHOSEN:'new_time_chosen'};f.exports=h;}),null);
__d('PagesPlatformRequestDispatcher',['Dispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('Dispatcher_DEPRECATED'))();}),null);
__d('PagesPlatformDialogStore',['EventEmitter','PagesPlatformActionConstants','PagesPlatformRequestDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={};h=babelHelpers.inherits(k,c('EventEmitter'));i=h&&h.prototype;function k(){i.constructor.call(this);c('PagesPlatformRequestDispatcher').register(this.onEventDispatched.bind(this));j={dialogClass:null,dialogProps:null};}k.prototype.getState=function(){return j;};k.prototype.onEventDispatched=function(l){var m=l.type,n=l.data;switch(m){case c('PagesPlatformActionConstants').DIALOG_SHOWN:j.dialogClass=n.dialogClass;j.dialogProps=n.dialogProps;this.emit('change');break;case c('PagesPlatformActionConstants').DIALOG_CLOSED:j.dialogClass=null;j.dialogProps=null;this.emit('change');break;}};f.exports=new k();}),null);
__d('PagesPlatformDialogContainer.react',['PagesPlatformDialogStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').createClass({displayName:'PagesPlatformDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('PagesPlatformDialogStore'))],statics:{calculateState:function i(){return c('PagesPlatformDialogStore').getState();}},render:function i(){if(!this.state.dialogClass)return null;var j=this.state.dialogClass;return c('React').createElement(j,babelHelpers['extends']({},this.state.dialogProps,{key:'dialog'}));}});f.exports=h;}),null);
__d('PagesPlatformDialogContainerMount',['PagesPlatformDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('PagesPlatformDialogContainer.react'),null),j);}};f.exports=h;}),null);