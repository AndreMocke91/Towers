if (self.CavalryLogger) { CavalryLogger.start_js(["jA0Ll"]); }

__d("AppInstallLoggerEvents",[],(function a(b,c,d,e,f,g){f.exports={IMPRESSION:"impression",CLICK:"click",INSTALL:"install",XOUT:"xout",RANKED_IMPRESSION:"ranked_impression",CANVAS_VISIT:"canvas_visit",APP_SESSION_START:"session_start",CANVAS_IFRAME_LOAD:"canvas_iframe_load",APP_POPOVER_RENDER:"app_popover_render",APP_PAGE_RENDER:"app_page_render",APPCENTER_MENU_RENDER:"appcenter_menu_render",APPCENTER_HOMEPAGE_RENDER:"appcenter_homepage_render",APPCENTER_MANAGE_RENDER:"appcenter_manage_render",APPCENTER_REQUESTS_RENDER:"appcenter_requests_render",APPCENTER_INVITES_RENDER:"appcenter_invites_render",APPCENTER_TOP_LISTS_RENDER:"appcenter_top_lists_render",APPCENTER_QUERY_RESULTS_RENDER:"appcenter_query_results_render",GAMES_LOGIN_PAGE_ONE_RENDER:"games_login_page_one_render",GAMES_LOGIN_PAGE_TWO_RENDER:"games_login_page_two_render",GAMES_LOGIN_PAGE_ONE_XOUT:"games_login_page_one_xout",GAMES_LOGIN_PAGE_TWO_XOUT:"games_login_page_two_xout",GAMES_LOGIN_NEXT_PAGE:"games_login_next_page",GAMES_LOGIN_PREV_PAGE:"games_login_prev_page",GAMES_LOGIN_SOCIAL_LOGIN:"games_login_social_login",GAMES_LOGIN_SOCIAL_LOGIN_SUCCESS:"games_login_social_login_success",GAMES_LOGIN_SINGLE_ANONYMOUS_LOGIN:"games_login_single_anonymous_login",GAMES_LOGIN_ALWAYS_ANONYMOUS_LOGIN:"games_login_always_anonymous_login",GAMES_LOGIN_AUTO_LOGIN:"games_login_auto_login",GAMES_LOGIN_UNSIGNED_RENDER:"games_login_unsigned_render",GAMES_LOGIN_UNSIGNED_SOCIAL_LOGIN:"games_login_unsigned_social_login",GAMES_LOGIN_UNSIGNED_ANONYMOUS_LOGIN:"games_login_unsigned_anonymous_login",GAMES_LOGIN_UNSIGNED_XOUT:"games_login_unsigned_xout",GAMES_LOGIN_LEARN_MORE_CLICK:"games_login_learn_more",GAMES_LOGIN_EDIT_SETTINGS:"games_login_edit_settings",GAMES_LOGIN_SOCIAL_UPGRADE_BUTTON_CLICK:"games_login_social_upgrade_button_click",GAMES_LOGIN_SOCIAL_UPGRADE_IMPRESSION:"games_login_social_upgrade_impression",GAMES_LOGIN_SOCIAL_UPGRADE_SUCCESS:"games_login_social_upgrade_success",GAMES_LOGIN_XOUT_SOCIAL_IMPRESSION:"games_login_xout_social_impression",GDPV4_RENDER:"gdpv4_render",GDPV4_EDITED_SCOPES:"gdpv4_edit_scopes",GDPV4_BUTTON_CLICK:"gdpv4_button_click",CLICK_TO_APPCENTER:"click_to_appcenter",PP_CREATE_INVITE:"pp_create_invite",PP_ACCEPT_INVITE:"pp_accept_invite",PP_DELETE_INVITES:"pp_delete_invites",PP_DELETE_ALL:"pp_delete_all",PP_BLOCK_APP:"pp_block_app",PP_BLOCK_USER:"pp_block_user",PP_UNBLOCK_APP:"pp_unblock_app",PP_UNBLOCK_USER:"pp_unblock_user",PP_ACCEPT_INVITE_ACTIVATE_APP:"pp_accept_invite_activate_app",GAMERANKER_REQUEST:"gameranker_request",GAMERANKER_RESPONSE:"gameranker_response",GAMERANKER_EXCEPTION:"gameranker_exception",GAMERANKER_TARGETING_SCORE:"gameranker_targeting_score",GAME_COLLABORATIVE_FILTERING_SCORE:"game_collaborative_filtering_score",NOTIFICATION_CONTENT_UPDATE_SEND:"notification_content_update_send",NOTIFICATION_CONTENT_UPDATE_SEND_TO_TURNOFF:"notification_content_update_send_to_turnoff",NOTIFICATION_CONTENT_UPDATE_CLICK:"notification_content_update_click",NOTIFICATION_CONTENT_UPDATE_IMPRESSION:"notification_content_update_impression",NOTIFICATION_CONTENT_UPDATE_TURN_OFF:"notification_content_update_turn_off",NOTIFICATION_CONTENT_UPDATE_UNDO_TURN_OFF:"notification_content_update_undo_turn_off",NOTIFICATION_CONTENT_UPDATE_MARK_SPAM:"notification_content_update_mark_spam",NOTIFICATION_CONTENT_UPDATE_FIRST_IMPRESSION:"notification_content_update_first_impression",NOTIFICATION_CONTENT_UPDATE_FIRST_YES:"notification_content_update_first_yes",NOTIFICATION_CONTENT_UPDATE_FIRST_IMPLICIT_YES:"notification_content_update_first_implicit_yes",NOTIFICATION_CONTENT_UPDATE_FIRST_NO:"notification_content_update_first_no",NOTIFICATION_A2U_SEND:"notification_a2u_send",NOTIFICATION_A2U_SEND_TO_TURNOFF:"notification_a2u_send_to_turnoff",NOTIFICATION_A2U_CLICK:"notification_a2u_click",NOTIFICATION_A2U_IMPRESSION:"notification_a2u_impression",NOTIFICATION_A2U_TURN_OFF:"notification_a2u_turn_off",NOTIFICATION_A2U_UNDO_TURN_OFF:"notification_a2u_undo_turn_off",NOTIFICATION_A2U_MARK_SPAM:"notification_a2u_mark_spam",NOTIFICATION_A2U_FIRST_IMPRESSION:"notification_a2u_first_impression",NOTIFICATION_A2U_FIRST_YES:"notification_a2u_first_yes",NOTIFICATION_GYML_EVALUATION:"notification_a2u_gyml_evaluation",LIVE_PLAYER_NOTIFICATION_SENT:"live_player_notification_sent",LIVE_PLAYER_NOTIFICATION_SEND_ATTEMPT:"live_player_notification_send_attempt",GAMER_CHAT_MESSAGE_SEND:"gamer_chat_message_send",GAMER_CHAT_MESSAGE_SENTRY_BLOCKED:"gamer_chat_message_sentry_blocked",GAMER_CHAT_MESSAGE_HIDDEN:"gamer_chat_message_hidden",GAMER_CHAT_MESSAGE_UNHIDDEN:"gamer_chat_message_unhidden",GAMER_CHAT_MESSAGE_SENDER_BLOCKED:"gamer_chat_message_blocked",GAMER_CHAT_MESSAGE_SENDER_UNBLOCKED:"gamer_chat_message_unblocked",GAMER_CHAT_MESSAGE_SENDER_REPORTED:"gamer_chat_message_reported",GAMER_CHAT_USER_BANNED:"gamer_chat_user_banned",GAMER_CHAT_USER_UNBANNED:"gamer_chat_user_unbanned",GAME_GROUP_CREATE_DIALOG_OPENED:"game_group_create_dialog_opened",GAME_GROUP_CREATED:"game_group_created",GAME_GROUP_CREATE_ATTEMPT:"game_group_create_attempt",GAME_GROUP_JOIN_DIALOG_OPENED:"game_group_join_dialog_opened",GAME_GROUP_JOINED:"game_group_joined",GAME_ACHIEVEMENT_EARNED:"game_achievement_earned",RHC_SETTINGS_UNIT_APP_FAVORITED:"rhc_settings_unit_app_favorited",RHC_SETTINGS_UNIT_APP_UNFAVORITED:"rhc_settings_unit_app_unfavorited",RHC_SETTINGS_UNIT_APP_SHARE_CLICKED:"rhc_settings_unit_app_share_clicked",RHC_SETTINGS_UNIT_APP_PRIVACY_SETTINGS_CLICKED:"rhc_settings_unit_app_privacy_settings_clicked",RHC_SETTINGS_UNIT_APP_UNINSTALL_CLICKED:"rhc_settings_unit_app_uninstall_clicked",RHC_SETTINGS_UNIT_APP_FULLSCREENED:"rhc_settings_unit_app_fullscreened",GYML_REQUEST:"gyml_request",GYML_ERROR:"gyml_error",GYML_NO_MODEL:"gyml_no_model",GYML_RESULT:"gyml_result",GAMES_DESKTOP_EXCEPTION:"games_desktop_exception",GAMES_DESKTOP_MAIN_FRAME_URL:"games_desktop_main_frame_url",GAMES_DESKTOP_OPENED_APP:"games_desktop_opened_app",GAMES_DESKTOP_UPDATE_STEP:"games_desktop_update_step",GAMES_DESKTOP_APP_INSTALLED:"games_desktop_app_installed",GAMES_DESKTOP_CONTROL_USED:"games_desktop_control_used",GAMES_DESKTOP_GAME_SHORTCUT_USED:"games_desktop_game_shortcut_used",GAMES_DESKTOP_GAME_SHORTCUT_CREATED:"games_desktop_game_shortcut_created",GAMES_DESKTOP_LOGGED_IN:"games_desktop_logged_in",GAMES_DESKTOP_LOGGED_OUT:"games_desktop_logged_out",GAMES_DESKTOP_FLASH_NOT_INSTALLED:"games_desktop_flash_not_installed",GAMES_DESKTOP_APP_DOWNLOADED:"games_desktop_app_downloaded",GAMES_DESKTOP_APP_DOWNLOAD_UNIT_IMPRESSION:"games_desktop_app_download_unit_impression",GAMES_DESKTOP_APP_UNINSTALLED:"games_desktop_app_uninstalled",GAMES_DESKTOP_LEARN_MORE_DIALOG_IMPRESSION:"games_desktop_learn_more_dialog_impression",GAMES_DESKTOP_FEEDBACK:"games_desktop_feedback",GAMES_DESKTOP_APP_UNINSTALLED_FAILED_CHECK:"games_desktop_app_uninstalled_failed_check",GAMES_DESKTOP_CLOSED_APP:"games_desktop_closed_app",GAMES_DESKTOP_RENDER_PROCESS_TERMINATED:"games_desktop_render_process_terminated",GAMES_DESKTOP_NONCE_CREATION_FAILED:"games_desktop_nonce_creation_failed",GAMES_DESKTOP_AUTO_LOGIN_FAILED:"games_desktop_auto_login_failed",GAMES_DESKTOP_AUTO_LOGIN_SUCCEEDED:"games_desktop_auto_login_succeeded",GAMES_DESKTOP_TOAST_EVENT:"games_desktop_toast_event",GAMES_DESKTOP_NOTIF_ACTION:"games_desktop_notif_action",GAMES_DESKTOP_AUTO_LOGIN_AVAILABLE:"games_desktop_auto_login_available",GAMES_DESKTOP_SETTINGS_CHANGE:"games_desktop_settings_change",GAMES_DESKTOP_LANDING_PAGE_VIEW:"games_desktop_landing_page_view",GAMES_DESKTOP_LANDING_PAGE_MOBILE_VIEW:"games_desktop_landing_page_mobile_view",GAMES_DESKTOP_SYSTEM_PERFORMANCE:"games_desktop_system_performance",GAMES_DESKTOP_DOWNLOADER_STATE:"games_desktop_downloader_state",GAMES_DESKTOP_DOWNLOADER_EXCEPTION:"games_desktop_downloader_exception",GAMES_DESKTOP_LOAD_ERROR:"games_desktop_load_error",GAMES_DESKTOP_NOTIF_POLL:"games_desktop_notif_poll",GAMES_DESKTOP_NATIVE_GAME_STATE:"games_desktop_native_game_state",GAMES_DESKTOP_HARDWARE_DATA:"games_desktop_hardware_data",GAMES_DESKTOP_CAN_INTERACT:"games_desktop_can_interact",GAMES_DESKTOP_BROWSER_INITIALIZED:"games_desktop_browser_initialized",ARCADE_USER_DROPDOWN_CLICK:"arcade_user_dropdown_click",ARCADE_ABOUT_VIEW_CLICK:"arcade_about_view_click",ARCADE_CONTACT_FORM_CLICK:"arcade_contact_form_click",ARCADE_BB_NOTIFICATIONS_CLICK:"arcade_bb_notifications_click",ARCADE_LHC_BROWSE_CLICK:"arcade_lhc_browse_click",ARCADE_LHC_GO_LIVE_CLICK:"arcade_lhc_go_live_click",ARCADE_LHC_WATCH_CLICK:"arcade_lhc_watch_click",ARCADE_LHC_MYGAMES_CLICK:"arcade_lhc_mygames_click",ARCADE_LHC_FEED_CLICK:"arcade_lhc_feed_click",ARCADE_MYGAMES_DD_CLICK_DETAILS:"arcade_mygames_dd_click_details",ARCADE_MYGAMES_DD_CLICK_FOOTER:"arcade_mygames_dd_click_footer",ARCADE_HOMEPAGE_DD_CLICK_DETAILS:"arcade_homepage_dd_click_details",ARCADE_HOMEPAGE_DD_CLICK_FOOTER:"arcade_homepage_dd_click_footer",ARCADE_SEARCH_DD_CLICK_DETAILS:"arcade_search_dd_click_details",ARCADE_SEARCH_DD_CLICK_FOOTER:"arcade_search_dd_click_footer",ARCADE_GAMETILE_GAMETAG_CLICK:"arcade_gametile_gametag_click",ARCADE_GAMETILE_XOUT_CLICK:"arcade_gametile_xout_click",ARCADE_DD_XOUT_CLICK:"arcade_dd_xout_click",ARCADE_DD_PLAYNOW_CLICK:"arcade_dd_playnow_click",ARCADE_DD_GAME_UNSAVED:"arcade_dd_game_unsaved",ARCADE_DD_GAME_SAVED:"arcade_dd_game_saved",ARCADE_DD_SLIDES_CLICK_RIGHT:"arcade_dd_slides_click_right",ARCADE_DD_SLIDES_CLICK_LEFT:"arcade_dd_slides_click_left",ARCADE_DD_SCREENSHOT_CLICK:"arcade_dd_screenshot_click",ARCADE_WELCOME_OVERLAY_IMPRESSION:"arcade_welcome_overlay_impression",ARCADE_NUX_TOUR_DISMISSED:"arcade_nux_tour_dismissed",ARCADE_NUX_TOUR_STARTED:"arcade_nux_tour_started",ARCADE_NUX_TOUR_COMPLETED:"arcade_nux_tour_completed",ARCADE_AUTOMATIC_GAME_LAUNCH:"arcade_automatic_game_launch",ARCADE_LIVESTREAM_CLICK:"arcade_livestream_click",ARCADE_LIVESTREAM_IMPRESSION:"arcade_livestream_impression",ARCADE_LIVESTREAM_MOUSEOVER:"arcade_livestream_mouseover",ARCADE_LIVESTREAM_WATCH_TIME:"arcade_livestream_watch_time",GAMES_RATING_PROMPT_CLOSE:"games_rating_prompt_close",GAMES_RATING_PROMPT_RATE:"games_rating_prompt_rate",GAMES_RATING_PROMPT_SHOW:"games_rating_prompt_show",GAMES_RECOMMEND_PROMPT_RECOMMEND:"games_recommend_prompt_recommend",GAMES_RECOMMEND_PROMPT_SHOW:"games_recommend_prompt_show",GAMES_RECOMMEND_PROMPT_CLOSE:"games_recommend_prompt_close",GIULIANI_REPORT_SUBMITTED:"giuliani_report_submitted",CHANGED_APPCENTER_APPROVED_STATE:"changed_appcenter_approved_state",RESTRICTED_ORGANIC_RECOMMENDATIONS:"restricted_organic_recommendations",FEED_GAMES_DIGEST_SUBSCRIBED:"feed_games_digest_subscribe",FEED_GAMES_DIGEST_UNSUBSCRIBED:"feed_games_digest_unsubscribe",GAME_PLAYED_5S:"game_played_5s",GAME_PLAYED_10S:"game_played_10s",GAME_PLAYED_30S:"game_played_30s",GAME_PLAYED_1M:"game_played_1m",GAME_PLAYED_2M:"game_played_2m",GAME_PLAYED_5M:"game_played_5m",ARCADE_MIGRATION_PAGE_LOADED:"arcade_migration_page_loaded",ARCADE_MIGRATION_LAUNCH_CLICKED:"arcade_migration_launch_clicked",ARCADE_MIGRATION_MANUAL_BYPASS:"arcade_migration_manual_bypass",ARCADE_MIGRATION_AUTO_BYPASS:"arcade_migration_auto_bypass",GAME_TAB_REC_GRID_CONTENT_REQUESTED:"game_tab_rec_grid_content_requested",IMAGE_ASSET_CLICK:"image_asset_click",IMAGE_ASSET_IMPRESSION:"image_asset_impression",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",THROTTLED_CANVAS_VISIT:"throttled_canvas_visit",THROTTLED_APPCENTER_VISIT:"throttled_appcenter_visit",THROTTLED_OAUTH_VISIT:"throttled_oauth_visit",CHAINED_ARTICLE_APP_CENTER_IMPRESSION:"chained_article_app_center_impression",GAMES_UNHANDLED_JS_EXCEPTION:"games_unhandled_js_exception"};}),null);
__d("SearchAwarenessEventTypes",[],(function a(b,c,d,e,f,g){f.exports={CLICK:"click",IMPRESSION:"impression",DISMISSAL:"dismissal",WEAK_DISMISSAL:"weak_dismissal",SYSTEM_FORCED_DISMISSAL:"system_forced_dismissal"};}),null);
__d("SearchAwarenessUserAction",[],(function a(b,c,d,e,f,g){f.exports={LIKE:"like",COMMENT:"comment",ARTICLE_CLICK:"article_click",COMPOSE_PUBLISH:"compose_publish",PAGE_LIKE:"page_like"};}),null);
__d('AppInstallLogger',['AppInstallLoggerEvents','Banzai','ErrorUtils'],(function a(b,c,d,e,f,g){var h='app_install';i.prototype.init=function(){'use strict';c('ErrorUtils').addListener(function(j){var k={error_message:j.message,error_type:j.name,error_data:JSON.stringify(j),stack_trace:j.stack};this.log(c('AppInstallLoggerEvents').GAMES_UNHANDLED_JS_EXCEPTION,null,k);}.bind(this));};i.prototype.log=function(event,j,k){'use strict';c('Banzai').post(h,babelHelpers['extends']({app_id:j,event:event},k||{}));};function i(){'use strict';}f.exports=new i();}),null);
__d('XdArbiterBuffer',[],(function a(b,c,d,e,f,g){if(!b.XdArbiter)b.XdArbiter={_m:[],_p:[],register:function h(i,j,k){j=j||(/^apps\./.test(location.hostname)?'canvas':'tab');this._p.push([i,j,k]);return j;},handleMessage:function h(i,j){this._m.push([i,j]);}};}),null);
__d('CanvasIFrameLoader',['XdArbiterBuffer','Banzai','$'],(function a(b,c,d,e,f,g){c('XdArbiterBuffer');var h={loadFromForm:function j(k,l,m){var n=c('$')('iframe_canvas');if(l&&!i()){l.style.display='block';n.style.display='none';return;}var o=Date.now();n.onload=function(){var p=Date.now(),q=p-o;c('Banzai').post('canvas_iframe_load',{app_id:m,iframe_time_to_load:q});};k.submit();}};function i(){try{var k=document.createElement('canvas');return Boolean(window.WebGLRenderingContext)&&Boolean(k.getContext('webgl')||k.getContext('experimental-webgl'));}catch(j){return false;}}f.exports=h;}),null);
__d('PlatformDialogClient',['Arbiter','AsyncDialog','AsyncRequest','DOMEventListener','guid','PlatformBaseVersioning','PlatformDialog','PopupWindow','QueryString','URI','UserAgent_DEPRECATED'],(function a(b,c,d,e,f,g){var h=575,i='FB_DIALOG_RESPONSE';c('AsyncDialog').getLoadingDialog().setWidth(h);c('DOMEventListener').add(window,'message',function(event){if(/\.facebook\.com$/.test(event.origin)&&new RegExp('^'+i+':').test(event.data))c('Arbiter').inform(c('PlatformDialog').RESPONSE,JSON.parse(event.data.substr(i.length+1)));});var j={};c('Arbiter').subscribe(c('PlatformDialog').RESPONSE,function(event,m){var n=m.state;if(j[n]){j[n].callback(m);m.state=j[n].state;delete j[n];}},c('Arbiter').SUBSCRIBE_NEW);function k(m){return function(){c('Arbiter').inform(c('PlatformDialog').RESPONSE,babelHelpers['extends']({state:m},l.REQUEST_ABORTED_ERROR));};}var l={REQUEST_ABORTED_ERROR:{error_code:-200,error_message:'Request aborted.'},async:function m(n,o,p){var q=c('guid')(),r=o.state;o.state=q;o.redirect_uri=new (c('URI'))('/dialog/return/arbiter').setSubdomain('www').setFragment(c('QueryString').encode({origin:o.redirect_uri})).getQualifiedURI().toString();o.display='async';j[q]={callback:p||function(){},state:r};c('AsyncDialog').send(new (c('AsyncRequest'))(this.getURI(n,o)).setMethod('GET').setReadOnly(true).setAbortHandler(k(q)));},popup:function m(n,o,p,q,r){var s=c('guid')(),t=p.state;p.state=s;p.client_id=p.app_id=o;p.redirect_uri=new (c('URI'))('/dialog/return/arbiter').setSecure(c('URI').getRequestURI().isSecure()).setSubdomain('www').setFragment(c('QueryString').encode({origin:p.redirect_uri})).addQueryData(q||{}).addQueryData({relation:'opener',close:true}).toString();p.display=c('UserAgent_DEPRECATED').mobile()?'touch':'popup';j[s]={callback:r||function(){},state:t};var u=c('URI').getRequestURI(),v=u.getDomain(),w=v.replace('developers','www');c('PopupWindow').open(new (c('URI'))(this.getURI(n,p)).setDomain(w).setProtocol('https').toString(),210,h);},getURI:function m(n,o){if(o.version){var p=new (c('URI'))('/'+o.version+'/dialog/'+n);delete o.version;return p.addQueryData(o);}return c('PlatformBaseVersioning').versionAwareURI(new (c('URI'))('/dialog/'+n).addQueryData(o));}};f.exports=l;}),null);
__d('PlatformElementXOut.react',['AsyncRequest','DOM','DOMContainer.react','GamesXOut.react','React','ReactDOM','XPlatformXOutableElementController'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$PlatformElementXOut1=function(){var q=c('XPlatformXOutableElementController').getURIBuilder().setEnum('type',this.props.type).setInt('fbid',this.props.fbid).getURI();new (c('AsyncRequest'))(q).setMethod('POST').send();var r=c('ReactDOM').findDOMNode(this).parentNode.parentNode;c('ReactDOM').unmountComponentAtNode(r);c('DOM').remove(r);}.bind(this),m;}k.prototype.render=function(){'use strict';var l=c('React').createElement(c('DOMContainer.react'),null,this.props.domChild);return c('React').createElement(c('GamesXOut.react'),{onClick:this.$PlatformElementXOut1},l);};k.propTypes={type:j.string.isRequired,fbid:j.string.isRequired,domChild:j.object.isRequired};f.exports=k;}),null);
__d('CanvasNavigationFullScreen',['cx','AppInstallLogger','AppInstallLoggerEvents','Arbiter','CSS','Event','FullScreen'],(function a(b,c,d,e,f,g,h){var i=false,j=null,k={initLink:function l(m,n){if(i){return;}else i=true;j=m;c('CSS').conditionClass(n,"_4-os",c('FullScreen').isSupported());c('Event').listen(n,'click',this.setFullScreen.bind(null,true));c('FullScreen').subscribe('changed',function(){if(c('FullScreen').isFullScreen()){c('Arbiter').inform('canvas.enter_fullscreen');}else c('Arbiter').inform('canvas.exit_fullscreen');});},isSupported:function l(){var m=i&&c('FullScreen').isSupported();return !!m;},getFullScreen:function l(){return !!c('FullScreen').isFullScreen();},setFullScreen:function l(m){var n=true;if(m){c('AppInstallLogger').log(c('AppInstallLoggerEvents').RHC_SETTINGS_UNIT_APP_FULLSCREENED,j);n=c('FullScreen').enableFullScreen(document.getElementById('iframe_canvas'));}else n=c('FullScreen').disableFullScreen();return n;}};f.exports=k;}),null);
__d("XAppFriendsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/platform\/games\/appfriends\/",{app_id:{type:"Int",required:true}});}),null);
__d('CanvasPresenceController',['Arbiter','AsyncRequest','AvailableListConstants','AvailableList','PresenceStatus','XAppFriendsController'],(function a(b,c,d,e,f,g){var h=60*1000,i=false,j=[],k=0,l,m,n,o;function p(){var u=0;j.forEach(function(v){if(c('PresenceStatus').get(v)==c('AvailableListConstants').ACTIVE)u++;});if(n===undefined||n!==u>1){n=u>1;c('Arbiter').inform('canvas.friendsOnlineUpdated',n);}}function q(u){var v=c('XAppFriendsController').getURIBuilder().setInt('app_id',k).getURI();new (c('AsyncRequest'))().setURI(v).setHandler(function(w){j=w.payload.ids;if(u)u();p();}).send();}function r(){if(k===0){o=r;return;}i=true;q(function(){l=setInterval(q,h);m=c('AvailableList').subscribe(c('AvailableListConstants').ON_AVAILABILITY_CHANGED,p);});}function s(){i=false;clearInterval(l);c('AvailableList').unsubscribe(m);}var t={setAppID:function u(v){k=v;if(o)o();},setAppFriends:function u(v){j=v;},useFriendsOnline:function u(v){if(v==i)return;if(v){r();}else s();}};f.exports=t;}),null);
__d("XPendingSyncRequestsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/platform\/games\/sync_requests\/pending_list\/",{app_id:{type:"Int",required:true}});}),null);
__d('CanvasSyncRequestsController',['Arbiter','AsyncRequest','ChannelConstants','SyncRequestStatusEnum','XPendingSyncRequestsController'],(function a(b,c,d,e,f,g){var h={},i=false,j=0,k;function l(q){if(n(q))m(q);h[q.id]=q;q.timer=setTimeout(function(){q.status=c('SyncRequestStatusEnum').EXPIRED;o(q);},q.timeout*1000);}function m(q){clearTimeout(h[q.id].timer);delete h[q.id];}function n(q){return h[q.id]!==undefined;}function o(q){if(!n(q))return;if(q.status!=c('SyncRequestStatusEnum').PENDING){var r={id:q.id,status:c('SyncRequestStatusEnum').namesByValue[q.status]};c('Arbiter').inform('canvas.syncRequestUpdated',r);m(q);}}c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('sync_request_created'),function(q,r){return l(r.obj);});c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('sync_request_updated'),function(q,r){return o(r.obj);});var p={setAppID:function q(r){j=r;if(k)k();},initPendingSyncRequests:function q(){if(i)return;if(j===0){k=p.initPendingSyncRequests;return;}i=true;var r=c('XPendingSyncRequestsController').getURIBuilder().setInt('app_id',j).getURI();new (c('AsyncRequest'))().setURI(r).setHandler(function(s){s.getPayload().forEach(l);}).send();}};f.exports=p;}),null);
__d('JSONRPC',['Log'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.$JSONRPC1=0;this.$JSONRPC2={};this.remote=function(j){this.$JSONRPC3=j;return this.remote;}.bind(this);this.local={};this.$JSONRPC4=i;}h.prototype.stub=function(i){'use strict';this.remote[i]=function(){var j={jsonrpc:'2.0',method:i};for(var k=arguments.length,l=Array(k),m=0;m<k;m++)l[m]=arguments[m];if(typeof l[l.length-1]=='function'){j.id=++this.$JSONRPC1;this.$JSONRPC2[j.id]=l.pop();}j.params=l;this.$JSONRPC4(JSON.stringify(j),this.$JSONRPC3||{method:i});}.bind(this);};h.prototype.read=function(i,j){'use strict';var k=JSON.parse(i),l=k.id;if(!k.method){if(!this.$JSONRPC2[l]){c('Log').warn('Could not find callback %s',l);return;}var m=this.$JSONRPC2[l];delete this.$JSONRPC2[l];delete k.id;delete k.jsonrpc;m(k);return;}var n=this,o=this.local[k.method],p;if(l){p=function s(t,u){var v={jsonrpc:'2.0',id:l};v[t]=u;setTimeout(function(){n.$JSONRPC4(JSON.stringify(v),j);},0);};}else p=function s(){};if(!o){c('Log').error('Method "%s" has not been defined',k.method);p('error',{code:-32601,message:'Method not found',data:k.method});return;}k.params.push(p.bind(null,'result'));k.params.push(p.bind(null,'error'));try{var r=o.apply(j||null,k.params);if(typeof r!=='undefined')p('result',r);}catch(q){c('Log').error('Invokation of RPC method %s resulted in the error: %s',k.method,q.message);p('error',{code:-32603,message:'Internal error',data:q.message});}};f.exports=h;}),null);
__d('XdArbiter',['Arbiter','Log','QueryString','Queue'],(function a(b,c,d,e,f,g){var h=/^apps\./.test(location.hostname)?'canvas':'tab',i={},j=[],k=new (c('Queue'))(),l={setRpcHandler:function n(o){k.start(o);},handleMessage:function n(o,p,q){try{if(typeof o=='string'){if(/^FB_RPC:/.test(o)){k.enqueue([o.substring(7),{origin:p,source:q||i[h]}]);return;}o=JSON.parse(o);}if(!o.method)return;if(typeof o.params=='string')o.params=JSON.parse(o.params);c('Arbiter').inform('Connect.Unsafe.'+o.method,o.params,c('Arbiter').BEHAVIOR_PERSISTENT);}catch(r){}},register:function n(o,p,q){var r=p||h;c('Arbiter').inform("XdArbiter/register",{origin:q});i[r]=o;i[q]=o;c('Arbiter').inform('XdArbiter.register',r,c('Arbiter').BEHAVIOR_PERSISTENT);this.scheduleDispatch();return r;},scheduleDispatch:function n(){var o=this,p=42;function q(){var r=j.shift();if(r)o.send.apply(o,r);if(j.length)setTimeout(q,p);}setTimeout(q,p);},hasProxy:function n(o){var p=o||h;return !!i[p];},send:function n(o,p,q){var r=q in i?q:h;p=p||i[r];if(typeof o!=='string')o=c('QueryString').encode(o);try{p.proxyMessage(o,q);}catch(s){c('Log').debug('XdArbiter: Proxy for %s not available, '+'page might have been navigated: %s',r,s.message);delete i[r];}return true;}},m=b.XdArbiter;b.XdArbiter=l;if(m){if(m._p.length)while(m._p.length)l.register.apply(l,m._p.shift());if(m._m.length)while(m._m.length)l.handleMessage.apply(l,m._m.shift());}f.exports=l;}),null);
__d('PlatformAppController',['errorCode','Arbiter','AsyncRequest','Bootloader','CanvasNavigationFullScreen','CanvasPresenceController','CSS','CurrentUser','Dialog','JSONRPC','PlatformDialogClient','PlatformDialogWhitelistedParams','PlatformDialogABTest','Style','URI','Vector','XdArbiter','CanvasSyncRequestsController','ge'],(function a(b,c,d,e,f,g,h){var i={oauth:true,test_flow:true,app_requests:true,game_group_create:true,game_group_join:true,gift:true,feed:true,share:true,share_open_graph:true,sync_request:true,payer_promotion:true,payerpromotion:true},j,k,l=true,m=0,n=false,o,p=false,q=window._cstart,r=0,s,t,u={},v=new (c('JSONRPC'))(function(ia,ja){c('XdArbiter').send('FB_RPC:'+ia,ja.source||c('ge')(j).contentWindow.frames['fb_xdm_frame_'+location.protocol.replace(':','')],ja.origin||k);});c('Arbiter').subscribe("XdArbiter/register",function(ia,ja){if(s&&ja.origin!=k)new (c('AsyncRequest'))().setURI('/platform/app_owned_url_check/').setData({appid:s,url:ja.origin}).setHandler(function(ka){var la=ka.getPayload();if(la.allowed)k=ja.origin;}).send();});function w(ia){var ja=parseInt(ia.x,10),ka=parseInt(ia.y,10);if(ja>=0&&ka>=0)window.scrollTo(ja,ka);}function x(ia){var ja=c('ge')(ia.frame.replace(/_fb_https$/,''));if(ja){c('CSS').addClass(ja,'noresize');ja.style.height=ia.height+'px';}}function y(){var ia=c('ge')(j),ja=0,ka=0;while(ia){ja+=parseInt(ia.offsetLeft,10);ka+=parseInt(ia.offsetTop,10);ia=ia.offsetParent;}var la=c('Vector').getViewportDimensions(),ma=c('Vector').getScrollPosition();return {clientWidth:la.x,clientHeight:la.y,scrollLeft:ma.x,scrollTop:ma.y,offsetLeft:ja,offsetTop:ka};}function z(ia,ja){if(!c('PlatformDialogWhitelistedParams')[ja])return ia;var ka={};c('PlatformDialogWhitelistedParams').common.forEach(function(la){ka[la]=ia[la];});c('PlatformDialogWhitelistedParams')[ja].forEach(function(la){ka[la]=ia[la];});return ka;}function aa(ia,ja,ka){var la=ia.method;delete ia.method;delete ia.access_token;delete ia.next;delete ia.context;delete ia.locale;ia.display='async';if(!/^[\w\-_.]+$/.test(la))throw new Error('Malformed method name');Object.keys(ia).forEach(function(qa){if(/[\s\x80-\x9f]/.test(qa)){delete ia[qa];}else if(/\./.test(qa)){var ra=qa.replace(/\./g,'_');if(ia.hasOwnProperty(ra))delete ia[qa];}});if(!ia.redirect_uri||new (c('URI'))(ia.redirect_uri).getOrigin()!=new (c('URI'))(this.origin).getOrigin())ia.redirect_uri=this.origin;if(la=='apprequests'){la='app_requests';ia.context='canvas_app_requests';}if(la=='pay'){var ma=ia.action;if(ma==='purchaseitem'||ma==='purchase_item'||ma==='purchaseiap'){i[la]=true;}else i[la]=false;}if(la=='fbpromotion'){la='payer_promotion';ia.action='payer_promotion';}if(la==='stream_publish')la='stream.publish';if(la=='permissions.oauth'||la=='permissions.request'||la=='oauth')la='oauth';if(la==='stream.publish')i[la]=!!c('PlatformDialogABTest').share_dialog_delegate_stream_publish_dialog;ia=z(ia,la);if(i[la]){var na=ia.redirect_uri;c('PlatformDialogClient').async(la,ia,function(qa){if(qa.error_code==1340004){if(c('CurrentUser').getID()&&c('CurrentUser').getID()!="0"){ja(qa);}else new (c('URI'))('/login.php').addQueryData('next',c('URI').getRequestURI().toString()).go();}else if(la=='app_requests'&&qa.error_code==1349146){ba(la,ia,ja,qa,na);}else ja(qa);});return;}var oa=new (c('URI'))('/fbml/ajax/dialog/'+la.replace(/\./g,'_')).setQueryData(ia),pa=new (c('AsyncRequest'))().setMethod('GET').setReadOnly(true).setURI(oa).setAbortHandler(function(){ka(c('PlatformDialogClient').REQUEST_ABORTED_ERROR);});new (c('Dialog'))().setAsync(pa).setModal(true).setWideDialog(true).show().setCloseHandler(ja);}function ba(ia,ja,ka,la,ma){ja.redirect_uri=ma;c('PlatformDialogClient').async('oauth',ja,function(na){if(na.error){ka(la);}else{ja.redirect_uri=ma;c('PlatformDialogClient').async(ia,ja,function(oa){ka(oa);});}});}function ca(ia){n=ia;}function da(ia,ja){p=ia;o=ja;}v.stub('navigate');function ea(ia){if(n){v.remote.navigate(ia);return true;}return false;}v.stub('enterFullScreen');c('Arbiter').subscribe('canvas.enter_fullscreen',v.remote.enterFullScreen);v.stub('exitFullScreen');c('Arbiter').subscribe('canvas.exit_fullscreen',v.remote.exitFullScreen);v.stub('fireEvent');c('Arbiter').subscribe('canvas.friendsOnlineUpdated',v.remote.fireEvent.bind(v.remote));c('Arbiter').subscribe('canvas.syncRequestUpdated',v.remote.fireEvent.bind(v.remote));function fa(ia){var ja=ia.time-q+r;switch(ia.name){case 'StopIframeAppTtiTimer':r=ja;return {time_delta_ms:ja,type:"tti"};case 'StartIframeAppTtiTimer':q=ia.time;break;case 'RecordIframeAppTti':if(p)c('Bootloader').loadModules(["CanvasIFrameLogger"],function(ka){ka.log(ja,ia.appId,o);},'PlatformAppController');return {time_delta_ms:ja,type:"tti"};}}v.local.setSize=x;v.local.getPageInfo=y;v.local.scrollTo=w;v.local.showDialog=aa;v.local.setNavigationEnabled=ca;v.local.isFullScreenSupported=c('CanvasNavigationFullScreen').isSupported;v.local.getFullScreen=c('CanvasNavigationFullScreen').getFullScreen;v.local.logTtiMessage=fa;v.local.useFriendsOnline=c('CanvasPresenceController').useFriendsOnline.bind(c('CanvasPresenceController'));v.local.initPendingSyncRequests=c('CanvasSyncRequestsController').initPendingSyncRequests.bind(c('CanvasSyncRequestsController'));c('XdArbiter').setRpcHandler(function(ia){v.read.apply(v,ia);});v.stub('hidePluginObjects');c('Arbiter').subscribe('layer_shown',function(){if(++m===1)if(l){v.remote.hidePluginObjects();}else c('Style').set(c('ge')('pagelet_canvas_content'),'visibility','hidden');});v.stub('showPluginObjects');c('Arbiter').subscribe('layer_hidden',function(){if(--m===0){if(l){v.remote.showPluginObjects();}else c('Style').set(c('ge')('pagelet_canvas_content'),'visibility','');}else if(m<0)m=0;});function ga(ia){u[ia.name]=ia;var ja=c('ge')(ia.name);if(ja)j=ja;}var ha={setActiveIframeAndAppID:function ia(ja,ka,la){j=ja;k=ka;s=la;c('CanvasPresenceController').setAppID(s);c('CanvasSyncRequestsController').setAppID(s);},setInformAppOnLayerChange:function ia(ja){l=ja;},setNavigationEnabled:ca,setTtiEnabled:da,handleNavigation:ea,init:ga,getFrameParams:function ia(ja){return u[ja];},setConfig:function ia(ja){t=ja;}};b.PlatformAppController=ha;f.exports=ha;}),null);
__d('FavIcon',['DOM'],(function a(b,c,d,e,f,g){var h,i,j;function k(){var m=c('DOM').scry(document.head,"link");if(m)m.forEach(function(n){if(n.rel.indexOf('icon')!=-1||n.rel.indexOf('shortcut icon')!=-1)c('DOM').remove(n);});}var l={isToggledResource:function m(){if(j&&h.href===j)return true;return false;},set:function m(n){if(h)c('DOM').remove(h);k();h=c('DOM').create('link',{type:'image/x-icon',rel:'icon',href:n});c('DOM').appendContent(c('DOM').find(document,'head'),h);},setToggleResources:function m(n,o){h=document.querySelector('link[rel*=icon][href*=".ico"]');if(!h)return;i=o||h.href;j=n;},toggle:function m(){if(!h||!j)return;if(h.href===i){this.set(j);return;}this.set(i);}};f.exports=l;}),null);
__d('PlatformCanvasController',['fbt','PlatformAppController','DOMEventListener','URI','CSS','DOM','DocumentTitle','FavIcon','ge','AsyncRequest','UserActivity','UIPagelet','PageTransitions'],(function a(b,c,d,e,f,g,h){var i='iframe_canvas',j=240000,k=5000,l=60000,m,n,o,p,q,r,s;function t(ca){var da=c('ge')('pagelet_canvas_content');c('CSS').hide(da);c('DOM').scry(da,'iframe').forEach(function(ea){ea.src='';});c('DOM').setContent(c('ge')('canvas_throbber_text'),h._("Loading {app-name}",[h.param('app-name',ca)]));}function u(ca,da,ea,fa){var ga=c('ge')('pagelet_canvas_footer_content'),ha=c('ge')('pagelet_canvas_content');c('DOM').setContent(ha,ca);c('DOM').setContent(ga,da);c('CSS').show(ha);c('DocumentTitle').set(ea);c('FavIcon').set(fa);}function v(ca){if(ca.getSubdomain()!='apps')return false;var da,ea=c('DOM').scry(document,'a[data-appname]');for(var fa=0;fa<ea.length;fa++)if(ea[fa].href==ca){da=ea[fa].getAttribute('data-appname');break;}if(!da)return false;var ga=ca.getPath().split('/')[1];if(ga=='l.php')return false;t(da);var ha=ca.getUnqualifiedURI();new (c('AsyncRequest'))().setURI(new (c('URI'))('/ajax/canvas.php')).setData({fb_app_name:ga,uri:ha.toString()}).setMethod('GET').setReadOnly(true).setStatusElement('canvas_throbber').setHandler(function(ia){var ja=ia.getPayload();c('CSS').conditionClass(document.body,'center_fixed_width_app',!ja.is_liquid);u(ja.main_html,ja.footer_html,ja.page_title,ja.favicon);c('PageTransitions').transitionComplete();}).send();return true;}function w(ca){if(!String(ca.getPath()).startsWith('/'+o+'/')&&!String(ca.getPath()).startsWith('/'+n+'/'))return false;ca=ca.getUnqualifiedURI();ca.setPath('/'+ca.getPath().split('/').slice(2).join('/'));return c('PlatformAppController').handleNavigation(ca.toString());}function x(ca){return w(ca)||v(ca);}function y(){var ca=Date.now();if(m>0&&ca-p>=j){p=ca;c('UIPagelet').loadFromEndpoint('WebEgoPane','pagelet_ego_pane',{pid:9,data:[n,++q]},{bundle:false});}}c('UserActivity').subscribe(function(){var ca=Date.now();if(ca-p>=j-k)setTimeout(y,k);});function z(){var ca=Date.now();if(m>0&&ca-r>=l){r=ca;c('UIPagelet').loadFromEndpoint('CanvasShowcaseSliderPagelet','pagelet_canvas_showcase',{pid:129,data:[n,++s]},{bundle:false});}}function aa(ca,da,ea,fa,ga){m=ea;p=Date.now();q=0;r=Date.now();s=0;if(n&&n!==ca)y();n=ca;o=da;var ha=c('ge')(i);c('PlatformAppController').setConfig(ga);if(ha)c('DOMEventListener').add(ha,'load',function(){c('PlatformAppController').setNavigationEnabled(false);});if(ga&&ga.displayShowcase)setInterval(z,l);c('PlatformAppController').setInformAppOnLayerChange(!fa);c('PlatformAppController').setNavigationEnabled(false);c('PageTransitions').registerHandler(x);}var ba={setup:aa};f.exports=ba;}),null);
__d("XSearchAwarenessController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/search\/async\/awareness\/",{origin:{type:"String"},story_id:{type:"String"},actor_id:{type:"String"},global_share_id:{type:"String"},query:{type:"String"},dismiss:{type:"Exists",defaultValue:false},source_object_id:{type:"String"},user_action:{type:"String"}});}),null);
__d('SearchAwarenessDismissButton',['Arbiter','AsyncRequest','DOM','EventListener','XSearchAwarenessController'],(function a(b,c,d,e,f,g){var h={init:function i(j,k,l,m){var n=arguments.length<=4||arguments[4]===undefined?true:arguments[4],o=c('EventListener').listen(k,'click',function(){c('DOM').remove(j);o.remove();c('Arbiter').inform('SearchAwareness.dismissUnit');if(n)h.dismiss(l,m);});},dismiss:function i(j,k){var l=c('XSearchAwarenessController').getURIBuilder().setString('origin',j).setString('source_object_id',k).setExists('dismiss',true);new (c('AsyncRequest'))().setURI(l.getURI()).send();}};f.exports=h;}),null);
__d('SearchAwarenessDispatcher',['csx','cx','Arbiter','AsyncRequest','AttachmentRelatedShareConstants','Banzai','CSS','DOM','EventListener','NavigationMessage','PageLikeConstants','Run','SearchAwarenessDismissButton','SearchAwarenessEventTypes','SearchAwarenessUserAction','SearchAwarenessWebConfig','SearchPivotType','SubscriptionsHandler','UFIFeedbackTargets','UFIUIEvents','XSearchAwarenessController','getScrollPosition','joinClasses','setTimeoutAcrossTransitions','throttle'],(function a(b,c,d,e,f,g,h,i){var j=false,k={},l={},m,n={init:function o(){if(!c('SearchAwarenessWebConfig').master_gk)return;if(j)return;m=new (c('SubscriptionsHandler'))();m.addSubscriptions(c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,n._cleanup.bind(this)),c('Arbiter').subscribe(c('PageLikeConstants').LIKED,n._onFan.bind(this)),c('Arbiter').subscribe('composer/publish',n._onComposerPublish.bind(this)),c('Arbiter').subscribe('LitestandComposer/publish',n._onComposerPublish.bind(this)),c('Arbiter').subscribe(c('AttachmentRelatedShareConstants').ARTICLE_CLICK,n._onArticleClick.bind(this)));c('Run').onLeave(n._cleanup.bind(this));j=true;},_cleanup:function o(){m&&m.release();m=null;j=false;var p=c('DOM').scry(document.body,"._18az")[0];if(p==null)return;c('CSS').removeClass(document.body,"_18at");c('CSS').removeClass(document.body,"_18au");c('CSS').removeClass(document.body,"_18aw");c('CSS').removeClass(p,"_18ax");},_onFan:function o(p,q){if(!c('SearchAwarenessWebConfig').has_on_fan)return;n._dispatch(q.target,{origin:c('SearchPivotType').FAN_PAGE_ACTION,actor_id:q.profile_id,user_action:c('SearchAwarenessUserAction').PAGE_LIKE});},_onLike:function o(p,q){if(!q.ft_id)return;c('UFIFeedbackTargets').getFeedbackTarget(q.ft_id,function(r){var s=r.entidentifier;if(s==null||k[s]!=null)return;k[s]=true;n._dispatch(q.target,{actor_id:r.actorid,story_id:r.entidentifier,origin:q.origin,query:q.query,user_action:c('SearchAwarenessUserAction').LIKE});});},_onPhotoClick:function o(p,q){if(!c('SearchAwarenessWebConfig').has_on_photo_click)return;n._dispatch(q.target,{story_id:q.storyid,origin:c('SearchPivotType').STORY_CLICK_ACTION});},_onArticleClick:function o(p,q){if(!c('SearchAwarenessWebConfig').has_on_article_click)return;var r=q.global_share_id!=null?String(q.global_share_id):null;n._dispatch(null,{global_share_id:r,story_id:q.share_id,origin:c('SearchPivotType').ARTICLE_CLICK_ACTION,user_action:c('SearchAwarenessUserAction').ARTICLE_CLICK});},initOnComment:function o(p,q){if(!c('SearchAwarenessWebConfig').master_gk)return;if(!j)n.init();if(m==null)return;m.addSubscriptions(c('Arbiter').subscribe('UFI/CommentAddedActive',function(r,s){var t={origin:p,query:q,ft_id:s};n._onComment(r,t);}));},_onComment:function o(p,q){if(!q.ft_id)return;c('UFIFeedbackTargets').getFeedbackTarget(q.ft_id,function(r){var s=r.entidentifier;if(s==null||l[s]!=null)return;l[s]=true;n._dispatch(q.target,{actor_id:r.actorid,story_id:r.entidentifier,origin:q.origin,query:q.query,user_action:c('SearchAwarenessUserAction').COMMENT});});},_onComposerPublish:function o(p,q){if(!c('SearchAwarenessWebConfig').has_on_composer_publish)return;n._dispatch(null,{story_id:q.content_id,origin:c('SearchPivotType').COMPOSER_PUBLISH_ACTION,user_action:c('SearchAwarenessUserAction').COMPOSE_PUBLISH});},initOnLike:function o(p,q,r){if(!c('SearchAwarenessWebConfig').master_gk)return;if(!j)n.init();if(m==null)return;m.addSubscriptions(c('Arbiter').subscribe(c('UFIUIEvents').ReactionButtonClicked,function(s,t){var u={ft_id:t.ft_id,origin:p,query:q,target:r?null:t.target};n._onLike(s,u);}));},onPageLoad:function o(p,q,r){if(!c('SearchAwarenessWebConfig').master_gk)return;if(!j)n.init();n._dispatch(null,{query:q,origin:p,actor_id:r});},initProfileScopedSearch:function o(){if(!c('SearchAwarenessWebConfig').master_gk)return;if(!j)n.init();if(m==null)return;var p=c('DOM').scry(document.body,"._5ibl")[0];if(p!=null){n._dispatch(p,{origin:c('SearchPivotType').TIMELINE,specified_target:true});}else m.addSubscriptions(c('Arbiter').subscribe('profileSearchBoxLoaded',function(){var q=c('DOM').scry(document.body,"._5ibl")[0];if(q==null)return;n._dispatch(q,{origin:c('SearchPivotType').TIMELINE,specified_target:true});}));},onPhotosSERPLoad:function o(p){if(p==null||!c('SearchAwarenessWebConfig').master_gk)return;n._dispatch(null,{query:p,origin:c('SearchPivotType').PHOTOS_SERP_LOAD});},_dispatch:function o(p,q,r){if(!q.origin)return true;var s=c('XSearchAwarenessController').getURIBuilder().setString('origin',q.origin);if(q.story_id)s.setString('story_id',q.story_id);if(q.actor_id)s.setString('actor_id',q.actor_id);if(q.global_share_id)s.setString('global_share_id',q.global_share_id.toString());if(q.query)s.setString('query',q.query);if(q.user_action)s.setString('user_action',q.user_action);var t=new (c('AsyncRequest'))().setURI(s.getURI()),u=p;if(p!=null&&!q.specified_target)u=this.findStory(p);if(u==null){var v=c('DOM').scry(document.body,"._585-")[0],w=c('DOM').scry(document.body,"._5ob9")[0];u=v!=null?v:w;}if(u)t.setRelativeTo(u);if(r)t.setHandler(r);if(u||r)t.send();return true;},showAwarenessExperienceNow:function o(p,q,r){if(!j)n.init();if(q==null||!j||m==null)return;var s=void 0;m.addSubscriptions(q.subscribe('cancel',function(){s=true;c('SearchAwarenessDismissButton').dismiss(p);}),q.subscribe('hide',function(){if(!s&&r){c('Banzai').post('search_awareness',{origin:p,event_type:c('SearchAwarenessEventTypes').WEAK_DISMISSAL},{signal:true});}else if(!s&&!r)c('Banzai').post('search_awareness',{origin:p,event_type:c('SearchAwarenessEventTypes').SYSTEM_FORCED_DISMISSAL},{signal:true});}),c('Arbiter').subscribe('SearchAwareness.weakDismissUnit',function(){if(q!=null){s=false;q.hide();}}),c('Arbiter').subscribe('SearchAwareness.dismissUnit',function(){if(q!=null){s=true;q.hide();}}));q.show();c('Run').onLeave(function(){q=null;});},findStory:function o(p){var q="^div._4-u2",r=c('DOM').scry(p,q);return r.length===1?r[0]:null;},onTrendingSERPLeave:function o(p,q){if(!j)n.init();if(p==null||!j)return;c('Run').onLeave(function(){c('setTimeoutAcrossTransitions')(function(){c('Run').onAfterLoad(function(){n._dispatch(null,{query:p,origin:c('SearchPivotType').TRENDING_SERP_LOAD});});},q);});},openBelowBluebarUnit:function o(p){if(!j)n.init();var q=c('DOM').scry(document.body,"._18a-")[0];if(q==null)return;var r;switch(p){case c('SearchPivotType').TRENDING_SERP_LOAD:r="_18at";break;case c('SearchPivotType').GROUP:r="_18au";break;case c('SearchPivotType').PAGE:r="_18aw";break;}if(r==null)return;c('CSS').addClass(document.body,r);c('CSS').addClass(q,"_18ay");var s=c('Arbiter').subscribe('SearchAwareness.dismissUnit',function(){c('CSS').removeClass(document.body,r);});m&&m.addSubscriptions(s);},trigger:function o(p,q,r,s,t){if(!c('SearchAwarenessWebConfig').master_gk)return;if(!j)n.init();n._dispatch(null,{query:q,origin:p,actor_id:r,story_id:s,global_share_id:t});},triggerLearningNUX:function o(p,q,r,s,t){if(!c('SearchAwarenessWebConfig').master_gk)return;if(!j)n.init();n._dispatch(null,{query:q,origin:p,actor_id:r,story_id:s,global_share_id:t},function(u){var v=c('DOM').create('div',{className:c('joinClasses')("_3lik","hidden_elem"),'data-origin':p});c('DOM').appendContent(v,u.payload);c('DOM').appendContent(document.body,v);setTimeout(function(){c('Arbiter').inform('SearchAwareness.triggerLearningNUX',{origin:p},c('Arbiter').BEHAVIOR_STATE);},0);});},onTimelineScroll:function o(p,q,r,s){if(!c('SearchAwarenessWebConfig').master_gk)return;if(!j)n.init();var t=false,u=c('EventListener').listen(document,'scroll',c('throttle')(function(event){if(!t&&c('getScrollPosition')(window).y>q){t=true;n.onPageLoad(p,r,s);u.remove();}},500));}};f.exports=n;}),null);
__d('FacebarTypeaheadSeeMore',['cx','fbt','FacebarGSv2Echo','FacebarGlobalOptions','FacebarJSConstants','FacebarKeywordSearchUtils','FacebarStructuredText'],(function a(b,c,d,e,f,g,h,i){function j(k){'use strict';this.$FacebarTypeaheadSeeMore1=k.getCore();this.$FacebarTypeaheadSeeMore2=this.$FacebarTypeaheadSeeMore1.view;}j.prototype.enable=function(){'use strict';this.$FacebarTypeaheadSeeMore3=this.$FacebarTypeaheadSeeMore2.subscribe('seeMore',this.$FacebarTypeaheadSeeMore4.bind(this));};j.prototype.disable=function(){'use strict';this.$FacebarTypeaheadSeeMore3.unsubscribe();};j.prototype.$FacebarTypeaheadSeeMore4=function(k,l){'use strict';var m=l.value.toString().trim();m=c('FacebarGSv2Echo').normalizeValue(m);var n=c('FacebarKeywordSearchUtils').makeFacebarEntry(m),o=void 0;if(c('FacebarGlobalOptions').hasKeywordOnlyTypeahead){o=i._("See all results for {query}",[i.param('query',m)]);}else o=i._("See all results for \"{query}\"",[i.param('query',m)]);return babelHelpers['extends']({},n,{query_string:m,icon_class:"_5b1w",isSeeMore:true,structure:c('FacebarStructuredText').fromString(m),displayStructure:c('FacebarStructuredText').fromString(String(o)),uri:n.uri,tags:{},isSingleState:this.$FacebarTypeaheadSeeMore1.data.getSingleState(),keywordType:c('FacebarJSConstants').keywordTypes.escape,keywordSource:c('FacebarJSConstants').keywordTypes.escape});};f.exports=j;}),null);
__d('SimpleStructuredInput',['csx','Arbiter','ArbiterMixin','DOM','DataStore','Event','FacebarStructuredText','Input','Parent','getActiveElement','mixin'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('mixin')(c('ArbiterMixin')));j=i&&i.prototype;function k(l){'use strict';j.constructor.call(this);this.$SimpleStructuredInput1=l;this.$SimpleStructuredInput2=c('DOM').find(l,"._1frb");this.$SimpleStructuredInput3=c('DOM').find(l,"._5eay");c('DataStore').set(l,'SimpleStructuredInput',this);this.init();}k.prototype.init=function(){'use strict';var l=function(event){return this.inform(event.type);}.bind(this);c('Event').listen(this.$SimpleStructuredInput2,'blur',l);c('Event').listen(this.$SimpleStructuredInput2,'focus',l);c('Event').listen(this.$SimpleStructuredInput2,'input',function(){this.inform('change');}.bind(this));this.inform('init',null,c('Arbiter').BEHAVIOR_PERSISTENT);};k.prototype.setHint=function(l){'use strict';var m=l.map(function(o){return o.text;}).join(''),n=c('Input').getValue(this.$SimpleStructuredInput2);if(this.hasFocus()&&n.length>0&&m.toLowerCase().indexOf(n.toLowerCase())===0){c('Input').setValue(this.$SimpleStructuredInput3,n+m.slice(n.length));}else c('Input').setValue(this.$SimpleStructuredInput3,'');};k.prototype.focus=function(){'use strict';this.$SimpleStructuredInput2.focus();};k.prototype.blur=function(){'use strict';this.$SimpleStructuredInput2.blur();this.setHint([]);};k.prototype.hasFocus=function(){'use strict';return c('DOM').contains(this.$SimpleStructuredInput1,c('getActiveElement')());};k.prototype.setStructure=function(l){var m=arguments.length<=1||arguments[1]===undefined?false:arguments[1];'use strict';var n=l.map(function(o){return o.text;});c('Input').setValue(this.$SimpleStructuredInput2,n.join(''));if(m!==true)this.inform('change');};k.prototype.getStructure=function(){'use strict';return c('FacebarStructuredText').fromString(c('Input').getValue(this.$SimpleStructuredInput2)).toStruct();};k.prototype.getSelection=function(){'use strict';return {offset:this.$SimpleStructuredInput2.selectionStart,length:this.$SimpleStructuredInput2.selectionEnd-this.$SimpleStructuredInput2.selectionStart};};k.prototype.setSelection=function(l){'use strict';if(this.hasFocus()){this.$SimpleStructuredInput2.setSelectionRange(l.offset,l.offset+l.length);this.inform('select');}};k.prototype.isSelectionAtEnd=function(){'use strict';var l=this.getSelection().offset,m=c('Input').getValue(this.$SimpleStructuredInput2).length;return l>=m;};k.prototype.selectAll=function(){'use strict';this.setSelection({offset:0,length:c('Input').getValue(this.$SimpleStructuredInput2).length});};k.getInstance=function(l){'use strict';var m=c('Parent').bySelector(l,"._5eaz");if(m==null)throw new Error('No DOMElement structured input found using');return c('DataStore').get(m,'SimpleStructuredInput')||new k(m);};f.exports=k;}),null);
__d('StructuredInputDOM',['cx','createArrayFromMixed','CSS','DOM','FacebarGlobalOptions','getElementText','isElementNode','isTextNode'],(function a(b,c,d,e,f,g,h){var i=function k(){return c('FacebarGlobalOptions').graphSearchV2?"_4v1s":"_586o";},j={ENTITY_CLASS:i(),encodeText:function k(l){return l.replace(/ /g,'\u00a0');},decodeText:function k(l){return l.replace(/\u00a0/g,' ');},createIconNode:function k(l){if(l&&typeof l=='object'){var m=c('DOM').create('i',{className:l.className,style:l.uri&&{backgroundImage:'url("'+l.uri+'")'}});m.setAttribute('data-select','ignore');return m;}},createTextNode:function k(l){return c('DOM').create('span',{'data-si':true},j.encodeText(l||""));},createEntityNode:function k(l,m){var n=j.encodeText(l.text),o=j.createIconNode(m.icon),p=c('DOM').create('span',{},o?[o,n]:n),q=(m.className||'').split(/\s+/);q.push(j.ENTITY_CLASS);q.forEach(c('CSS').addClass.bind(c('CSS'),p));var r={si:true,uid:l.uid,type:l.type,text:n,'is-local':l.isLocal,'category-name':l.categoryName,fulltext:n,group:m.group,select:m.select,icon:JSON.stringify(m.icon||null)};for(var s in r)if(r[s]!=null)p.setAttribute('data-'+s,r[s]);return p;},convertToTextNode:function k(l){l.className='';l.setAttribute('data-type','text');l.removeAttribute('data-group');l.removeAttribute('data-select');l.removeAttribute('data-icon');l.removeAttribute('data-uid');l.removeAttribute('data-is-local');l.removeAttribute('data-category-name');for(var m=l.firstChild;m;m=m.nextSibling)if(!c('isTextNode')(m))c('DOM').remove(m);},isEntityNode:function k(l){return c('isElementNode')(l)&&c('CSS').hasClass(l,j.ENTITY_CLASS);},containsOnlyText:function k(l,m){m=c('createArrayFromMixed')(m);for(var n=l.firstChild;n;n=n.nextSibling)if(!(c('isTextNode')(n)||l.nodeName in m))return false;return true;},getText:function k(l){return c('getElementText')(l).replace(/ /g,'\u00a0');},getDecodedText:function k(l){return j.decodeText(c('getElementText')(l));},getLength:function k(l){return c('getElementText')(l).length;},getMarker:function k(l,m,n){var o=l.firstChild;while(o){var p=j.getLength(o);if(p>m||!o.nextSibling){if(c('isTextNode')(o)||!n){return {node:o,offset:Math.min(m,p)};}else return j.getMarker(o,m);}else m-=p;o=o.nextSibling;}}};f.exports=j;}),null);
__d('StructuredInputUtil',['StructuredInputDOM'],(function a(b,c,d,e,f,g){function h(n,o,p){var q=n.substr(0,o).lastIndexOf(p);return q!==-1?q+1:0;}function i(n,o,p){var q=n.indexOf(p,o);return q!==-1?q:n.length;}function j(n,o,p){return (o===0||o===n.length||n.substr(o,p.length)==p);}function k(n,o,p,q){switch(o){case 'none':return p;case 'all':return q?n.length:0;case 'word':if(j(n,p,'\u00a0')){return p;}else if(q){return i(n,p,'\u00a0');}else return h(n,p,'\u00a0');}}function l(n,o){return o&&c('StructuredInputDOM').isEntityNode(n)&&!c('StructuredInputDOM').isEntityNode(o);}var m={getMarkerAtOffset:function n(o,p){var q=o.firstChild,r=0,s=0;while(q){r+=s;s=c('StructuredInputDOM').getLength(q);if(r+s>p){break;}else q=q.nextSibling;}return {node:q||o.lastChild,offset:p-r};},validateEntityText:function n(o){var p=c('StructuredInputDOM').getText(o),q=o.getAttribute('data-fulltext'),r=o.getAttribute('data-group');if(r=='hashtag'){var s=p.match(/#[^\s]+/);q=s&&s[0];}var t=p.indexOf(q),u={prefix:null,entity:null,suffix:null};switch(r){case 'none':u.entity=p;break;case 'hashtag':case 'all':if(t!=-1){u.prefix=p.substr(0,t);u.entity=p.substr(t,q.length);u.suffix=p.substr(t+q.length);}else u.suffix=p;break;case 'word':if(t!=-1){u.prefix=p.substr(0,t);p=p.substr(t);}var v=0,w=0;while(v<q.length){w=i(q,v+1,'\u00a0');if(p.substr(0,w)!=q.substr(0,w)){break;}else v=w;}u.entity=p.substr(0,v)||null;u.suffix=p.substr(v)||null;}return u;},getGrouping:function n(o,p){var q=o.getAttribute('data-group'),r=o.getAttribute('data-select');if(p=='select'){return r=='group'?q:'none';}else return q;},snapMarkerToText:function n(o,p){var q=o.node;if(c('StructuredInputDOM').isEntityNode(q)){var r=o.offset,s=m.getGrouping(q,p);if(s!='none')if(r===0){var t=q.previousSibling;if(l(q,t))return {node:t,offset:c('StructuredInputDOM').getLength(t)};}else if(r==c('StructuredInputDOM').getLength(q)){var u=q.nextSibling;if(l(q,u))return {node:u,offset:0};}}return o;},nextMarkerBoundary:function n(o,p,q){var r=o.node;if(c('StructuredInputDOM').isEntityNode(r)&&(!p||o.offset!==0)){var s=m.getGrouping(r,q);if(s!='none')return {node:o.node,offset:k(c('StructuredInputDOM').getText(r),s,o.offset,p)};}return o;}};f.exports=m;}),null);
__d('StructuredInputCleaner',['DOM','StructuredInputDOM','StructuredInputUtil','UserAgent_DEPRECATED','createArrayFromMixed','getElementText','isTextNode'],(function a(b,c,d,e,f,g){function h(i,j,k){'use strict';this._node=i;this._selection=j;this._wrapText=k;}h.prototype._cleanEntityNode=function(i){'use strict';var j=i.getAttribute('data-text'),k=c('StructuredInputDOM').getText(i);i.style.cssText='';if(j==k&&c('StructuredInputDOM').containsOnlyText(i,{I:true}))return null;var l=[],m=c('StructuredInputUtil').validateEntityText(i),n=c('StructuredInputDOM').createIconNode(JSON.parse(i.getAttribute('data-icon')));if(!m.entity&&(m.suffix&&!m.prefix||m.prefix&&!m.suffix)){c('StructuredInputDOM').convertToTextNode(i);i.setAttribute('data-text',k);return null;}if(m.prefix)l.push(this._createTextNode(m.prefix));if(m.entity){if(this._selection&&c('getElementText')(i)!==m.entity)this._selection.markDirty(i);c('DOM').setContent(i,n?[n,m.entity]:m.entity);i.setAttribute('data-text',m.entity);l.push(i);}if(m.suffix)l.push(this._createTextNode(m.suffix));return l;};h.prototype._removeSpecialNodes=function(){'use strict';var i=c('createArrayFromMixed')(this._node.getElementsByTagName('script')),j=c('createArrayFromMixed')(this._node.getElementsByTagName('style'));i.forEach(c('DOM').remove);j.forEach(c('DOM').remove);};h.prototype._collapseNodes=function(){'use strict';for(var i,j=this._node.firstChild;j;j=i){i=j.nextSibling;if(!c('isTextNode')(j)&&!c('StructuredInputDOM').isEntityNode(j)&&!c('StructuredInputDOM').containsOnlyText(j))for(var k=j.lastChild;k;k=j.lastChild){this._node.insertBefore(k,i);i=k;}}};h.prototype._createTextNode=function(i){'use strict';if(this._wrapText){return c('StructuredInputDOM').createTextNode(i);}else return document.createTextNode(i);};h.prototype.replaceNodes=function(i,j){'use strict';if(j==null)return;var k=i.length?i[i.length-1].nextSibling:null;i.forEach(function(l){if(j.indexOf(l)===-1)c('DOM').remove(l);},this);j.reverse().forEach(function(l){if(i.indexOf(l)===-1)this._node.insertBefore(l,k);k=l;},this);};h.prototype.clean=function(){'use strict';this._removeSpecialNodes();this._collapseNodes();var i=[],j=function(){if(i.length){this.replaceNodes(i,this._cleanTextNodes(i));i.length=0;}}.bind(this);Array.from(this._node.childNodes).forEach(function(k){if(c('StructuredInputDOM').isEntityNode(k)){this.replaceNodes([k],this._cleanEntityNode(k));j(i);}else i.push(k);}.bind(this));j();if(!this._node.firstChild&&c('UserAgent_DEPRECATED').firefox())this._node.appendChild(this._createTextNode());};h.prototype.endOnText=function(){'use strict';var i=function(j,k){if(c('StructuredInputDOM').isEntityNode(j))this._node.insertBefore(this._createTextNode(),k?j:null);}.bind(this);i(this._node.firstChild,true);i(this._node.lastChild,false);};Object.assign(h.prototype,{_cleanTextNodes:function(){var i=function k(l){return (l.nodeName==='BR'||l.nodeName==='SPAN'&&j(l));},j=function k(l){return l.getAttribute('data-si')&&c('StructuredInputDOM').containsOnlyText(l)&&c('StructuredInputDOM').getLength(l)>0;};return function(k){if(k.length!=1||!i(k[0])){var l=k.map(c('StructuredInputDOM').getText).join('').replace(/\s+/g,' ');return l?[this._createTextNode(l)]:[];}else{k[0].style.cssText='';return;}};}()});f.exports=h;}),null);
__d("DOMSelection",[],(function a(b,c,d,e,f,g){(function(){var h=this,i={isPreceding:function(o,p){return p.compareDocumentPosition(o)&2;},contains:function(o,p){if(o.compareDocumentPosition!=null){return o.compareDocumentPosition(p)&16;}else return o.contains(p);},isCursorPreceding:function(o,p,q,r){if(o===q)return p<=r;if(i.isText(o)&&i.isText(q))return i.isPreceding(o,q);if(i.isText(o)&&!i.isText(q))return !i.isCursorPreceding(q,r,o,p);if(!i.contains(o,q))return i.isPreceding(o,q);if(o.childNodes.length<=p)return false;if(o.childNodes[p]===q)return 0<=r;return i.isPreceding(o.childNodes[p],q);},isText:function(o){return (o!=null?o.nodeType==3:false);},getChildIndex:function(o){var p=0;while(o=o.previousSibling)p++;return p;}},j=h.Selection=(function(){function o(p){this.win=p;}o.prototype.hasSelection=function(){return o.hasSelection(this.win);};o.prototype.isBidirectional=function(){return o.isBidirectional(this.win);};o.prototype.getOrigin=function(){return o.getOrigin(this.win);};o.prototype.getFocus=function(){return o.getFocus(this.win);};o.prototype.getStart=function(){return o.getStart(this.win);};o.prototype.getEnd=function(){return o.getEnd(this.win);};o.prototype.trySelection=function(p,q,r,s){return o.trySelection(this.win,p,q,r,s);};o.prototype.setSelection=function(p,q,r,s){return o.setSelection(this.win,p,q,r,s);};o.prototype.clearSelection=function(){return o.clearSelection(this.win);};return o;})();function k(){if(h.document.selection&&/MSIE 9\./.test(navigator.userAgent)){return false;}else return !!h.getSelection;}if(k()){j.supported=true;j.hasSelection=function(o){var p;return (p=o.getSelection())&&(p.focusNode!=null)&&(p.anchorNode!=null);};j.isBidirectional=function(o){return true;};j.getOrigin=function(o){var p;if(!((p=o.getSelection())&&(p.anchorNode!=null)))return null;return [p.anchorNode,p.anchorOffset];};j.getFocus=function(o){var p;if(!((p=o.getSelection())&&(p.focusNode!=null)))return null;return [p.focusNode,p.focusOffset];};j.getStart=function(o){var p,q,r,s,t,u;if(!j.hasSelection(o))return null;t=j.getOrigin(o),p=t[0],r=t[1];u=j.getFocus(o),q=u[0],s=u[1];if(i.isCursorPreceding(p,r,q,s))return [p,r];return [q,s];};j.getEnd=function(o){var p,q,r,s,t,u;if(!j.hasSelection(o))return null;t=j.getOrigin(o),p=t[0],r=t[1];u=j.getFocus(o),q=u[0],s=u[1];if(i.isCursorPreceding(p,r,q,s))return [q,s];return [p,r];};var l=function(o,p,q,s,t,u){var v=p.getSelection();if(!v)return;if(t==null)t=q;if(u==null)u=s;if(v.collapse&&v.extend){v.collapse(q,s);v.extend(t,u);}else{r=p.document.createRange();r.setStart(q,s);r.setEnd(t,u);if(o||!j.hasSelection(p)||(r.endContainer===t&&r.endOffset===u&&r.startContainer===q&&r.startOffset===s)){try{v.removeAllRanges();}catch(w){}v.addRange(r);}}};j.setSelection=l.bind(j,true);j.trySelection=l.bind(j,false);j.clearSelection=function(o){try{var q=o.getSelection();if(!q)return;q.removeAllRanges();}catch(p){}};j.getText=function(o){var p=o.getSelection();if(!p)return;return p.toString();};}else if(h.document.selection){var m=function(o,p,q){var r,s,t,u,v;s=o.createElement('a');r=p.duplicate();r.collapse(q);v=r.parentElement();while(true){v.insertBefore(s,s.previousSibling);r.moveToElementText(s);if(!(r.compareEndPoints((q?'StartToStart':'StartToEnd'),p)>0&&(s.previousSibling!=null)))break;}if(r.compareEndPoints((q?'StartToStart':'StartToEnd'),p)===-1&&s.nextSibling){r.setEndPoint((q?'EndToStart':'EndToEnd'),p);t=s.nextSibling;u=r.text.length;}else{t=s.parentNode;u=i.getChildIndex(s);}s.parentNode.removeChild(s);return [t,u];},n=function(o,p,q,r,s){var t,u,v,w,x;x=0;t=i.isText(r)?r:r.childNodes[s];u=i.isText(r)?r.parentNode:r;if(i.isText(r))x=s;w=o.createElement('a');u.insertBefore(w,t||null);v=o.body.createTextRange();v.moveToElementText(w);w.parentNode.removeChild(w);p.setEndPoint((q?'StartToStart':'EndToEnd'),v);return p[q?'moveStart':'moveEnd']('character',x);};j.supported=true;j.hasSelection=function(o){var p;if(!o.document.selection)return false;p=o.document.selection.createRange();return p&&p.parentElement().document===o.document;};j.getStart=function(o){var p;if(!j.hasSelection(o))return null;p=o.document.selection.createRange();return m(o.document,p,true);};j.getEnd=function(o){var p;if(!j.hasSelection(o))return null;p=o.document.selection.createRange();return m(o.document,p,false);};j.isBidirectional=function(o){return false;};j.getOrigin=function(o){return j.getStart(o);};j.getFocus=function(o){return j.getEnd(o);};var l=function(o,p,q,r,s,t){if(s==null)s=q;if(t==null)t=r;var u=p.document.body.createTextRange();n(p.document,u,false,s,t);n(p.document,u,true,q,r);return u.select();};j.setSelection=l.bind(j,true);j.trySelection=l.bind(j,false);j.clearSelection=function(o){return o.document.selection.empty();};j.getText=function(o){if(!j.hasSelection(o))return null;var p=o.document.selection.createRange();return p&&p.text;};}else j.supported=false;}).call(this);f.exports=Selection;}),null);
__d('StructuredInputSelection',['DOM','DOMSelection','Scroll','Vector','StructuredInputUtil','StructuredInputDOM'],(function a(b,c,d,e,f,g){function h(j){'use strict';var k=j.ownerDocument;this.window=k.defaultView||k.parentWindow;this.root=j;this.selection=false;this.start=new i(this,[]);this.end=new i(this,[]);this.update();}h.prototype.isSupported=function(){'use strict';return !!(c('DOMSelection')&&c('DOMSelection').hasSelection);};h.prototype.update=function(){'use strict';this.selection=false;if(this.isSupported()&&this.root==document.activeElement)if(c('DOMSelection').hasSelection(this.window)){var j=c('DOMSelection').getStart(this.window),k=c('DOMSelection').getEnd(this.window),l=c('DOMSelection').getFocus(this.window);this.start=this.makeMarker(j);this.end=this.makeMarker(k);this.backward=j[0]==l[0]&&j[1]==l[1];this.selection=this.start.node&&this.end.node;}};h.prototype.makeMarker=function(j){'use strict';if(j[0]===this.root){return new i(this,[this.root.childNodes[j[1]],0]);}else return new i(this,j);};h.prototype.getFocus=function(){'use strict';return this.backward?this.start:this.end;};h.prototype.getOrigin=function(){'use strict';return this.backward?this.end:this.start;};h.prototype.move=function(j){'use strict';if(this.selection){this.start.move(j);this.start.snap();this.end.setPosition(this.start);return this.apply();}};h.prototype.expand=function(j){'use strict';if(this.selection){if(c('DOMSelection').isBidirectional()){this.start.move(!j);this.start.snap();this.end.move(j);this.end.snap();}return this.apply();}};h.prototype.getText=function(){'use strict';if(this.selection&&this.isSupported()){var j=c('DOMSelection').getText(this.window);return j;}};h.prototype.getOffset=function(){'use strict';if(this.selection)return this.start.rootOffset;};h.prototype.getLength=function(){'use strict';return (this.getText()||"").length;};h.prototype.setPosition=function(j,k){'use strict';this.backward=false;this.selection=true;this.start.setPosition(c('StructuredInputUtil').getMarkerAtOffset(this.root,j));this.start.snap();if(k>0){this.end.setPosition(c('StructuredInputUtil').getMarkerAtOffset(this.root,j+k));this.end.snap();}else this.end.setPosition(this.start);return this.apply();};h.prototype.hasRange=function(){'use strict';return this.selection&&(this.start.node!=this.end.node||this.start.offset!=this.end.offset);};h.prototype.scrollToFocus=function(){'use strict';var j=5,k=this.getFocus();if(k.node){var l=c('Vector').getElementDimensions(this.root).x,m=c('Scroll').getLeft(this.root),n=k.node.offsetLeft+k.node.offsetWidth;if(n-m<j){c('Scroll').setLeft(this.root,n-j);}else if(n-m>l-j)c('Scroll').setLeft(this.root,n-l+j);}};h.prototype.apply=function(){'use strict';if(this.start.hasChanged()||this.end.hasChanged()){var j=this.getOrigin().getMarker(true),k=this.getFocus().getMarker(true);this.selection=this.selection&&j&&j.node&&k&&k.node;if(this.selection&&this.isSupported()){this.start.changed=false;this.end.changed=false;c('DOMSelection').trySelection(this.window,j.node,j.offset,k.node,k.offset);return true;}}};h.prototype.markDirty=function(j){'use strict';if(c('DOM').contains(j,this.start.node,j))this.start.changed=true;if(c('DOM').contains(j,this.end.node,j))this.end.changed=true;};function i(j,k){'use strict';this.selection=j;this.node=k[0];this.offset=k[1];this.rootOffset=this.getRootOffset(k[0],k[1]);this.sibling=this.node&&this.node.previousSibling;this.changed=false;}i.prototype.hasChanged=function(){'use strict';return this.changed||!this.isNodeValid();};i.prototype.isNodeValid=function(){'use strict';if(c('StructuredInputDOM').getLength(this.node)>this.offset){var j=this.node;while(j=j.parentNode)if(j==this.selection.root)return true;}};i.prototype.getMarker=function(j){'use strict';if(this.isNodeValid()&&(j&&!this.node.firstChild||!j&&this.node.parentNode==this.selection.root)){return this;}else return c('StructuredInputDOM').getMarker(this.selection.root,this.rootOffset,j);};i.prototype.move=function(j){'use strict';this.node&&this.setPosition(c('StructuredInputUtil').nextMarkerBoundary(this.getMarker(false),j,'select'));};i.prototype.snap=function(){'use strict';this.node&&this.setPosition(c('StructuredInputUtil').snapMarkerToText(this.getMarker(false),'select'));};i.prototype.setPosition=function(j){'use strict';if(j.offset!=this.offset||j.node!=this.node){this.changed=true;this.node=j.node;this.offset=j.offset;this.rootOffset=this.getRootOffset(this.node,this.offset);}};i.prototype.getRootOffset=function(j,k){'use strict';var l=0,m=5;while(j&&l++<m)if(j===this.selection.root){return k;}else{var n=j;while(n=n.previousSibling)k+=c('StructuredInputDOM').getLength(n);j=j.parentNode;}};f.exports=h;}),null);
__d('StructuredInput',['csx','cx','fbt','Arbiter','ArbiterMixin','CSS','DataStore','DOM','Event','Input','InputSelection','JSLogger','Keys','Locale','Parent','Scroll','StructuredInputCleaner','StructuredInputDOM','StructuredInputSelection','StructuredInputUtil','Style','UserAgent_DEPRECATED','createArrayFromMixed','createObjectFrom','emptyFunction','getActiveElement','isElementNode','isTextNode','mixin','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=229,n=c('createObjectFrom')([c('Keys').UP,c('Keys').DOWN,c('Keys').LEFT,c('Keys').RIGHT,c('Keys').HOME,c('Keys').END]),o=c('createObjectFrom')([c('Keys').BACKSPACE,c('Keys').DELETE]),p=c('createObjectFrom')([c('Keys').SPACE,c('Keys').RETURN]),q=c('createObjectFrom')('IUB'.split('').map(function(v){return v.charCodeAt(0);})),r=c('UserAgent_DEPRECATED').firefox(),s=c('UserAgent_DEPRECATED').ie(),t=c('UserAgent_DEPRECATED').webkit();k=babelHelpers.inherits(u,c('mixin')(c('ArbiterMixin')));l=k&&k.prototype;function u(v){'use strict';l.constructor.call(this);c('DataStore').set(v,'StructuredInput',this);this._root=v;this._richInput=c('DOM').find(v,"._586i");this._textInput=c('DOM').find(v,"._586f");this._placeholderText=c('DOM').scry(v,"._586j")[0];this._hintText=c('DOM').find(v,"._586k");this._contentWidth=null;this._richWidth=null;this._hintNodes=[];c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(w,x){x.structuredInputState={initInputsFinished:!!this._initInputsFinished,initEventsFinished:!!this._initEventsFinished,cleanInputPreTogglesFinished:!!this._cleanInputPreTogglesFinished,cleanInputFinished:!!this._cleanInputFinished,elements:{richInput:!!this._richInput,textInput:!!this._textInput,placeholderText:!!this._placeholderText,hintText:!!this._hintText}};}.bind(this));this.init();}u.prototype.init=function(){'use strict';this.init=c('emptyFunction');this._initSelection();this._initCleaner();this._initInputs();this._initInputsFinished=true;this._initEvents();this._initEventsFinished=true;this._scheduledCleanInput=false;this._richChanged=false;this._textChanged=false;this._selectionChanged=false;this._selectionIgnore=false;this._imeMode=false;this.cleanInput();this.inform('init',null,c('Arbiter').BEHAVIOR_PERSISTENT);};u.prototype._initInputs=function(){'use strict';this._richInput.contentEditable=true;this._richInput.spellcheck=false;this._richInput.tabIndex=0;this._richInput.setAttribute('aria-label',j._("Search Facebook"));this._textInput.tabIndex=-1;this._multiline=this._textInput.nodeName=='TEXTAREA';if(!c('CSS').shown(this._richInput)){var v=c('InputSelection').get(this._textInput),w=c('getActiveElement')()===this._textInput;c('DOM').setContent(this._richInput,c('StructuredInputDOM').encodeText(c('Input').getValue(this._textInput)));c('CSS').hide(this._textInput);c('CSS').show(this._richInput);this.cleanInput();if(w){this._richInput.focus();this.setSelection({offset:v.start,length:v.end-v.start});}}this.togglePlaceholder();this._toggleHint();};u.prototype._initEvents=function(){'use strict';var v=null,w=false,x=function(){this._richChanged=true;w||this.scheduleCleanInput(true);}.bind(this),y=function(){this._textChanged=true;w||this.scheduleCleanInput(false);}.bind(this),z=function(){this._selectionChanged=true;this.scheduleCleanInput(false);}.bind(this),aa=function(){this._imeMode=true;this._placeholderText&&c('CSS').hide(this._placeholderText);c('CSS').hide(this._hintText);}.bind(this),ba=function(){this._imeMode=false;this._richChanged=true;this.cleanInput();}.bind(this);c('Event').listen(this._richInput,'keydown',function(ca){v=ca.keyCode;if(ca.ctrlKey&&ca.keyCode in q){return ca.kill();}else if(ca.keyCode in n){z();}else if(ca.keyCode===c('Keys').BACKSPACE&&this._deleteTrailingChunk()){this._richChanged=true;this.cleanInput();return ca.kill();}else if(ca.keyCode in o){x();}else if(ca.keyCode==m)aa();}.bind(this));c('Event').listen(this._richInput,'keypress',function(ca){if(ca.keyCode==c('Keys').RETURN){this._multiline&&this._insertText("\n");return ca.kill();}else if(!this._selectionChanged&&this._selectionIsText()){y();}else x();}.bind(this));if(!w){c('Event').listen(this._richInput,'keyup',function(ca){if((this._imeMode||ca.keyCode!=v)&&ca.keyCode in p){ba();return ca.kill();}else if(this._imeMode){this._textChanged=true;this.cleanInput();}}.bind(this));if(r)c('Event').listen(this._richInput,'input',function(){this._textChanged=true;this.cleanInput();}.bind(this));}else{c('Event').listen(this._richInput,'compositionstart',aa);c('Event').listen(this._richInput,'compositionend',function(){setTimeout(ba,0);});c('Event').listen(this._richInput,'input',function(){this._textChanged=true;if(!this._imeMode)if(!this._richChanged){this.cleanInput();}else this.scheduleCleanInput();}.bind(this));}c('Event').listen(document,'selectionchange',function(){if(this._selectionIgnore){this._selectionIgnore=false;}else this._selectionChanged=true;}.bind(this));c('Event').listen(this._richInput,'mousedown',function(){this._selectionChanged=true;this._selectionLength=0;this._selectionOffset=0;}.bind(this));c('Event').listen(this._richInput,'mouseup',function(){this._selectionChanged=true;this.scheduleCleanInput();}.bind(this));c('Event').listen(this._richInput,'cut',function(){this._richChanged=true;this.scheduleCleanInput(false);}.bind(this));c('Event').listen(this._richInput,'paste',function(ca){this._richChanged=true;this.scheduleCleanInput(true);}.bind(this));c('Event').listen(this._richInput,'drop',function(ca){this.focus();this.selectAll();this._insertClipboard(ca&&ca.dataTransfer);return ca.kill();}.bind(this));c('Event').listen(this._richInput,'dragover',function(ca){ca.dataTransfer.dropEffect='move';ca.dataTransfer.effectAllowed='move';return ca.kill();});c('Event').listen(this._richInput,'focus',function(ca){this._toggleHint();this.inform('focus');}.bind(this));c('Event').listen(this._richInput,'blur',function(ca){c('CSS').hide(this._hintText);this._imeMode=false;this._richChanged=true;this.scheduleCleanInput(false);this.inform('blur');}.bind(this));};u.prototype._initCleaner=function(){'use strict';this._cleaner=new (c('StructuredInputCleaner'))(this._richInput,this._selection,true);};u.prototype._initSelection=function(){'use strict';this._selection=new (c('StructuredInputSelection'))(this._richInput);this._selectionLength=0;this._selectionOffset=0;};u.prototype._insertClipboard=function(v){'use strict';if(v&&typeof v.getData==='function'){var w=v.getData('Text');this._insertText(w);}};u.prototype._deleteTrailingChunk=function(v){'use strict';var w=this.getSelection();if(w.length>0||w.offset===0)return false;var x=this.getSelection().offset-1,y=c('StructuredInputUtil').getMarkerAtOffset(this._richInput,x);if(y&&c('StructuredInputDOM').isEntityNode(y.node)&&c('StructuredInputUtil').getGrouping(y.node,'select')!=='none'){c('DOM').remove(y.node);return true;}return false;};u.prototype._selectionIsText=function(){'use strict';var v=this._selection.start.node,w=this._selection.end.node;return v&&v===w&&!c('StructuredInputDOM').isEntityNode(v)&&!c('StructuredInputDOM').isEntityNode(v.parentNode);};u.prototype._insertText=function(v){'use strict';if(v){var w=c('DOM').create('div',{},v);return this._insertNodes(w);}};u.prototype._insertHTML=function(v){'use strict';if(v){var w=c('DOM').create('div'),x=new (c('StructuredInputCleaner'))(w,null,false);w.innerHTML=v;x.clean();return this._insertNodes(w);}};u.prototype._insertNodes=function(v){'use strict';if(document.selection){document.selection.createRange().pasteHTML(v.innerHTML);}else document.execCommand('insertHTML',false,v.innerHTML);this._richChanged=true;this.cleanInput();};u.prototype.togglePlaceholder=function(v){'use strict';if(!this._placeholderText)return;var w=c('StructuredInputDOM').getLength(this._richInput)===0;if(v&&w){c('CSS').show(this._placeholderText);}else c('CSS').conditionShow(this._placeholderText,w&&!this._imeMode);};u.prototype._toggleHint=function(){'use strict';var v=c('createArrayFromMixed')(this._hintNodes),w=null,x='',y=c('StructuredInputDOM').getText(this._richInput).toLowerCase();if(!this.hasFocus())return;if(this._contentOverflows()){c('CSS').hide(this._hintText);return;}while(v.length&&x.length<y.length){w=v.shift();x+=c('StructuredInputDOM').getText(w);}if(y.length&&x.substr(0,y.length).toLowerCase()==y.toLowerCase()){c('DOM').setContent(this._hintText,Array.from(this._richInput.cloneNode(true).childNodes).filter(function(aa){return aa.tagName!=='BR';}));var z=c('StructuredInputDOM').createTextNode(x.substr(y.length));v.unshift(z);c('DOM').appendContent(this._hintText,c('DOM').create('span',{className:"_586h"},v));c('CSS').show(this._hintText);c('CSS').hide(this._placeholderText);}else c('CSS').hide(this._hintText);};u.prototype._contentOverflows=function(){'use strict';if(this._richWidth===null)this._richWidth=this._richInput.clientWidth;if(this._contentWidth===null){var v=this._richInput.lastChild;this._contentWidth=c('isElementNode')(v)?v.offsetLeft+v.offsetWidth:0;}return this._contentWidth>this._richWidth;};u.prototype._forceTop=function(){'use strict';if(!this._multiline)c('Scroll').setTop(this._richInput,0);c('Scroll').setTop(this._root,0);};u.prototype._createStructureNodes=function(v){'use strict';return v.map(function(w){return w.uid||w.type&&w.type!='text'?c('StructuredInputDOM').createEntityNode(w,w.display||{}):c('StructuredInputDOM').createTextNode(w.text);}.bind(this));};u.prototype._suppressInput=function(){'use strict';if(r||s){if(this._richClean)return;this._richClean=this._richInput.cloneNode(true);this._richClean.contentEditable=false;this._root.insertBefore(this._richClean,this._richInput.nextSibling);c('Scroll').setLeft(this._richClean,c('Scroll').getLeft(this._richInput));c('Style').set(this._richInput,'padding',0);c('Style').set(this._richInput,'height',0);}};u.prototype._revealInput=function(){'use strict';if(!this._richClean)return;c('Style').set(this._richInput,'height','');c('Style').set(this._richInput,'padding','');this._root.removeChild(this._richClean);this.focus();this._richClean=null;};u.prototype._cleanInput=function(){'use strict';var v;if(this._textChanged&&!this._richChanged){this._selection.update();v='change';}else if(this._richChanged||this._selectionChanged){this._selection.update();if(this._richChanged){this._contentWidth=null;this._cleaner.clean();this._cleaner.endOnText();this._selection.apply();v='change';}if(this._selectionChanged){this._cleanSelection();if(this._selectionLength||!this._richChanged)v='select';}}this._revealInput();this._forceTop();this._cleanInputPreTogglesFinished=true;if(this._richChanged||this._textChanged){this.togglePlaceholder();this._toggleHint();}this._selectionIgnore=true;this._selectionChanged=false;this._richChanged=false;this._textChanged=false;this._cleanInputFinished=true;v&&this.inform(v);};u.prototype._cleanSelection=function(){'use strict';var v=this._selection.getLength(),w=this._selection.getOffset();if(v){this._selection.expand(v>=this._selectionLength);v=this._selection.getLength();w=this._selection.getOffset();}this._selectionLength=v;this._selectionOffset=w;};u.prototype.cleanInput=function(){'use strict';this._scheduledCleanInput||this._cleanInput();};u.prototype.scheduleCleanInput=function(v){'use strict';v&&this._suppressInput();if(!this._scheduledCleanInput){this._scheduledCleanInput=true;c('setTimeoutAcrossTransitions')(function(){this._cleanInput();this._scheduledCleanInput=false;}.bind(this),0);}};u.prototype.setEnabled=function(v){'use strict';this._textInput.disabled=!v;this._richInput.contentEditable=v;};u.prototype.getRoot=function(){'use strict';return this._root;};u.prototype.getRichInput=function(){'use strict';return this._richInput;};u.prototype.getEnabled=function(){'use strict';return !this._textInput.disabled;};u.prototype.getText=function(){'use strict';return c('StructuredInputDOM').getDecodedText(this._richInput);};u.prototype.setText=function(v){'use strict';c('DOM').setContent(this._richInput,c('StructuredInputDOM').createTextNode(v));this._richChanged=false;this._selectionChanged=false;this.inform('change');};u.prototype.setHint=function(v){'use strict';this._hintNodes=this._createStructureNodes(v);this._toggleHint();};u.prototype.getStructure=function(){'use strict';var v=[];Array.from(this._richInput.childNodes).forEach(function(w){var x=!c('isTextNode')(w),y=c('StructuredInputDOM').getDecodedText(w);y.length&&v.push({text:y,uid:x?w.getAttribute('data-uid'):null,type:x&&w.getAttribute('data-type')||'text',isLocal:x&&w.getAttribute('data-is-local'),categoryName:x?w.getAttribute('data-category-name'):null});});return v;};u.prototype.setStructure=function(v){'use strict';c('DOM').setContent(this._richInput,this._createStructureNodes(v));this._cleaner.clean();this._cleaner.endOnText();this.togglePlaceholder();this._toggleHint();this._richChanged=false;this._selectionChanged=false;this.inform('change');};u.prototype.getContentDimensions=function(){'use strict';var v=this._richInput.lastChild;return {width:v?v.offsetLeft+v.offsetWidth:0,height:v?v.offsetTop+v.offsetHeight:0};};u.prototype.getSelection=function(){'use strict';if(this._selection)return {offset:this._selection.getOffset(),length:this._selection.getLength()};};u.prototype.setSelection=function(v){'use strict';if(this.hasFocus()&&this._selection){this._selection.update();this._selection.setPosition(v.offset,v.length);this._selection.scrollToFocus();this._selectionChanged=false;this.inform('select');}};u.prototype.moveSelectionToEnd=function(){'use strict';this.setSelection({length:0,offset:c('StructuredInputDOM').getLength(this._richInput)});};u.prototype.isSelectionAtEnd=function(){'use strict';var v=this.getSelection().offset,w=c('StructuredInputDOM').getLength(this._richInput);return v>=w;};u.prototype.selectAll=function(){'use strict';this.setSelection({offset:0,length:c('StructuredInputDOM').getLength(this._richInput)});};u.prototype.hasFocus=function(){'use strict';return c('DOM').contains(this._root,document.activeElement);};u.prototype.focus=function(){'use strict';this._richInput.focus();};u.prototype.blur=function(){'use strict';var v={position:'absolute',top:0,width:'1px',height:'1px'};if(c('Locale').isRTL()){v.right='-100px';}else v.left='-100px';var w=c('DOM').create('input',{type:'text',tabIndex:-1,style:v});c('DOM').appendContent(this._root,w);var x=function y(){if(this.hasFocus()||t&&document.activeElement===document.body){w.focus();w.blur();}};this.blur=x;this.blur();};u.getInstance=function(v){var w=c('Parent').bySelector(v,"._586g");if(!w)throw new Error('No DOMElement structured input found using '+v);return c('DataStore').get(w,'StructuredInput')||new u(w);};f.exports=u;}),null);