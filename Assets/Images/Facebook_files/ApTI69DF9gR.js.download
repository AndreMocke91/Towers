if (self.CavalryLogger) { CavalryLogger.start_js(["GBzSO"]); }

__d("CommentPostedLiveState",[],(function a(b,c,d,e,f,g){f.exports={LIVE:"Live",ON_DEMAND:"OnDemand"};}),null);
__d("UFIAddCommentActionType",[],(function a(b,c,d,e,f,g){f.exports={CANCEL:"add_comment_cancel",CHANGE_CONTENT:"add_comment_change_content",RETRY_SUBMIT:"add_comment_retry_submit",SUBMIT_EDIT:"add_comment_submit_edit",SUBMIT_NEW:"add_comment_submit_new"};}),null);
__d("UFICommentActionType",[],(function a(b,c,d,e,f,g){f.exports={CHANGE_REACTION:"comment_change_reaction",CHANGE_REACTION_FAILURE:"comment_change_reaction_failure",CHANGE_REACTION_SUCCESS:"comment_change_reaction_success",CHANGE_VISIBILITY:"comment_change_visibility",EDIT:"comment_edit",EMBED:"embed",HIDE_CONSTITUENT_TITLE:"comment_hide_constituent_title",MOUNTED:"comment_mounted",REMOVE:"comment_remove",REMOVE_PREVIEW:"comment_remove_preview",SHOW_CONSTITUENT_TITLE:"comment_show_constituent_title",TOGGLE_INLINE_BAN:"comment_toggle_inline_ban",TOGGLE_LIKE:"comment_toggle_like",TOGGLE_MARK_AS_SPAM:"comment_toggle_mark_as_spam",TRANSLATE:"comment_translate",TRANSLATE_ARRAY:"comment_translate_array",UNMOUNTED:"comment_unmounted"};}),null);
__d("UFIInstanceActionType",[],(function a(b,c,d,e,f,g){f.exports={CHANGE_ORDER_MODE:"story_change_order_mode",CHANGE_VISIBILITY:"story_change_visibility",INIT:"instance_init",RECEIVED_VOD_COMMENTS:"received_vod_comments",REMOVE:"story_remove",REQUESTED_VOD_COMMENTS:"requested_vod_comments",TOGGLE_COMMENTS:"story_toggle_comments",TOGGLE_COMMERCIAL_BREAK:"story_toggle_commercial_break",TRANSLATE_ALL:"translate_all"};}),null);
__d("WebCommentViewOption",[],(function a(b,c,d,e,f,g){f.exports={CHRONOLOGICAL:"chronological",RANKED_THREADED:"ranked_threaded",TOPLEVEL:"toplevel",RECENT_ACTIVITY:"recent_activity",FEATURED:"featured",FILTERED:"filtered",LIVE_STREAMING:"live_streaming"};}),null);
__d('UFICommentTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$UFICommentTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$UFICommentTypedLogger1=babelHelpers['extends']({},this.$UFICommentTypedLogger1,j);return this;};h.prototype.setDuration=function(j){this.$UFICommentTypedLogger1.duration=j;return this;};h.prototype.setEvent=function(j){this.$UFICommentTypedLogger1.event=j;return this;};h.prototype.setHasPhoto=function(j){this.$UFICommentTypedLogger1.has_photo=j;return this;};h.prototype.setHasSticker=function(j){this.$UFICommentTypedLogger1.has_sticker=j;return this;};h.prototype.setIsReply=function(j){this.$UFICommentTypedLogger1.is_reply=j;return this;};h.prototype.setRequestLength=function(j){this.$UFICommentTypedLogger1.request_length=j;return this;};h.prototype.setVC=function(j){this.$UFICommentTypedLogger1.vc=j;return this;};var i={duration:true,event:true,has_photo:true,has_sticker:true,is_reply:true,request_length:true,vc:true};f.exports=h;}),null);
__d('UFICommentLogger',['UFICommentTypedLogger'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$UFICommentLogger1={};this.$UFICommentLogger2={};}h.prototype.logNewCommentPost=function(i,j,k){this.$UFICommentLogger2[i]=babelHelpers['extends']({timestamp:j},k);new (c('UFICommentTypedLogger'))().setEvent('new_comment_post').setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log();};h.prototype.logNewCommentReceived=function(i,j){var k=this.$UFICommentLogger2[i];if(k){var l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('new_comment_received').setDuration(l).setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log();}delete this.$UFICommentLogger2[i];};h.prototype.logCommentFetch=function(i,j,k){var l=babelHelpers['extends']({timestamp:j},k);if(this.$UFICommentLogger1[i]===undefined){this.$UFICommentLogger1[i]=[l];}else this.$UFICommentLogger1[i].push(l);new (c('UFICommentTypedLogger'))().setEvent('fetch_comment').setIsReply(k.is_reply).setRequestLength(k.request_length).log();};h.prototype.logCommentFetchReceived=function(i,j){if(this.$UFICommentLogger1[i]){var k=this.$UFICommentLogger1[i].shift(),l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('fetch_comment_received').setDuration(l).setIsReply(k.is_reply).setRequestLength(k.request_length).log();if(this.$UFICommentLogger1[i].length===0)delete this.$UFICommentLogger1[i];}};f.exports=new h();}),null);
__d('UFIDispatcherBase',['invariant','ReactDispatcher_DEPRECATED','UFICommentActionType'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;function k(n,o){return Object.values(o).indexOf(n)>=0;}function l(n,o,p){n[o]||h(0);}i=babelHelpers.inherits(m,c('ReactDispatcher_DEPRECATED'));j=i&&i.prototype;m.prototype.dispatch=function(n){l(n,'instanceID','contextArgs.instanceid');l(n,'ftentidentifier','contextArgs.ftentidentifier');if(k(n.type,c('UFICommentActionType')))l(n,'fbid','comment.fbid');j.dispatch.call(this,n);};function m(){i.apply(this,arguments);}f.exports=new m();}),null);
__d('UFICommentEditIDStore',['FluxReduceStore','UFIAddCommentActionType','UFICentralUpdates','UFICommentActionType','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);c('UFICentralUpdates').subscribe('actor-changed',function(l,m){c('UFIDispatcherBase').dispatch({type:'PRIVATE_ACTOR_CHANGED',instanceID:true,ftentidentifier:true});});}j.prototype.getInitialState=function(){return {};};j.prototype.getForInstance=function(k){return this.getState()[k]||null;};j.prototype.reduce=function(k,l){var m;switch(l.type){case 'PRIVATE_ACTOR_CHANGED':return {};case c('UFIAddCommentActionType').CANCEL:case c('UFIAddCommentActionType').SUBMIT_EDIT:var n=k[l.instanceID],o=babelHelpers.objectWithoutProperties(k,[l.instanceID]);return o;case c('UFICommentActionType').EDIT:return babelHelpers['extends']({},k,(m={},m[l.instanceID]=l.comment.id,m));}return k;};f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFIComments',['invariant','ClientIDs','ImmutableObject','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIConstants','UFIInstanceState','randomInt'],(function a(b,c,d,e,f,g,h){'use strict';var i={},j={},k={};function l(ca){return ca in j?j[ca]:ca;}function m(ca,da){ca.forEach(function(ea){var fa=ea.ftentidentifier,ga=c('UFIConstants').UFIPayloadSourceType,ha=ea.clientid,ia=false,ja=babelHelpers['extends']({},ea);if(ha){delete ja.clientid;ia=c('ClientIDs').isExistingClientID(ha);if(ia&&j[ha]){new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment').setOriginatedLocally(true).setCommentID(ea.id).log();return;}}if(da===ga.LIVE_SEND||da===c('UFIConstants').UFIPayloadSourceType.STREAMING||da===ga.USER_ACTION||da===ga.ENDPOINT_ADD_COMMENT||da===ga.ENDPOINT_EDIT_COMMENT)ja.isunseen=true;if(da===c('UFIConstants').UFIPayloadSourceType.LIVE_SEND||da===c('UFIConstants').UFIPayloadSourceType.STREAMING)ja.islive=true;if(da===ga.ENDPOINT_COMMENT_FETCH||da===ga.ENDPOINT_ID_COMMENT_FETCH)ja.fromfetch=true;if(ia&&i[ha]){if(i[ha].ufiinstanceid)c('UFIInstanceState').updateStateField(i[ha].ufiinstanceid,'locallycomposed',ea.id,true);ja.ufiinstanceid=i[ha].ufiinstanceid;j[ha]=ea.id;k[ea.id]=ha;i[ea.id]=i[ha];delete i[ha];c('UFICentralUpdates').didUpdateComment(ha);}ba.setComment(ea.id,new (c('ImmutableObject'))(ja));c('UFICentralUpdates').didUpdateComment(ea.id);c('UFICentralUpdates').didUpdateFeedback(fa);});}function n(ca,da){for(var ea=0;ea<ca.length;ea++){var fa=ca[ea];switch(fa.actiontype){case c('UFIConstants').UFIActionType.LIKE_ACTION:if(ba.getComment(fa.entidentifier))o(fa.clientid,fa.entidentifier,fa.hasviewerliked,fa.likecount,fa.reactiondata,da);break;case c('UFIConstants').UFIActionType.COMMENT_LIKE:o(fa.clientid,fa.commentid,fa.viewerliked,fa.likecount,fa.reactiondata,da);break;case c('UFIConstants').UFIActionType.COMMENT_REACTION:p(fa);break;case c('UFIConstants').UFIActionType.DELETE_COMMENT:t(fa);break;case c('UFIConstants').UFIActionType.LIVE_DELETE_COMMENT:u(fa);break;case c('UFIConstants').UFIActionType.REMOVE_PREVIEW:v(fa);break;case c('UFIConstants').UFIActionType.COMMENT_SET_SPAM:w(fa);break;case c('UFIConstants').UFIActionType.CONFIRM_COMMENT_REMOVAL:x(fa);break;case c('UFIConstants').UFIActionType.TRANSLATE_COMMENT:r(fa);break;case c('UFIConstants').UFIActionType.COMMENT_LIKECOUNT_UPDATE:q(fa);break;case c('UFIConstants').UFIActionType.UPDATE_CONSTITUENT_TITLE:z(fa);break;}}}function o(ca,da,ea,fa,ga,ha){var ia=ba.getComment(da);if(ia){var ja={},ka=ca&&c('ClientIDs').isExistingClientID(ca);if(!ka){ja.hasviewerliked=ea;ja.likecount=fa;if(ga){ja.reactioncount=ga.reactioncount;ja.reactioncountmap=ga.reactioncountmap;ja.reactioncountreduced=ga.reactioncountreduced;ja.viewerreaction=ga.viewerreaction;}}if(ha===c('UFIConstants').UFIPayloadSourceType.LIVE_SEND||ha===c('UFIConstants').UFIPayloadSourceType.STREAMING)new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment_like').setOriginatedLocally(ka).setCommentID(da).log();ja.likeconfirmhash=c('randomInt')(0,1024);aa(da,ja);}}function p(ca){var da=ba.getComment(ca.commentid);if(da){var ea={};if(ca.clientid&&c('ClientIDs').isExistingClientID(ca.clientid)&&ca.viewerreaction!==da.viewerreaction)return;ea.hasviewerliked=ca.hasviewerliked;ea.likecount=ca.likecount;ea.reactioncount=ca.reactioncount;ea.reactioncountmap=ca.reactioncountmap;ea.reactioncountreduced=ca.reactioncountreduced;ea.viewerreaction=ca.viewerreaction;aa(ca.commentid,ea);}}function q(ca){var da=ba.getComment(ca.commentid);if(da&&ca.hasviewerliked===da.hasviewerliked){var ea={likecount:ca.likecount,likeconfirmhash:c('randomInt')(0,1024)};aa(ca.commentid,ea);}}function r(ca){var da=ca.commentid,ea=ba.getComment(da);if(ea){var fa={translationdata:ca.translationdata};aa(da,fa);}}function s(ca){var da={reportLink:ca.reportLink,commenterIsFOF:ca.commenterIsFOF,userIsMinor:ca.userIsMinor,giveFeedbackLink:ca.giveFeedbackLink,reportGroupAdminLink:ca.reportGroupAdminLink};return da;}function t(ca){var da=ba.getComment(ca.commentid);y(da,c('UFIConstants').UFIStatus.DELETED);}function u(ca){var da=ba.getComment(ca.commentid);if(da&&da.status!==c('UFIConstants').UFIStatus.DELETED)y(da,c('UFIConstants').UFIStatus.LIVE_DELETED);}function v(ca){aa(ca.commentid,{attachment:null});}function w(ca){var da=ba.getComment(ca.commentid),ea=ca.shouldHideAsSpam?c('UFIConstants').UFIStatus.SPAM_DISPLAY:null;y(da,ea);}function x(ca){aa(ca.commentid,s(ca));}function y(ca,da){aa(ca.id,{priorstatus:ca.status,status:da});}function z(ca){var da=ba.getComment(ca.commentid);if(da){var ea={constituentTitle:ca.constituentTitle};aa(ca.commentid,ea);}}function aa(ca,da){var ea=ba.getComment(ca)||new (c('ImmutableObject'))({});ba.setComment(ca,c('ImmutableObject').set(ea,da));c('UFICentralUpdates').didUpdateComment(ea.id);c('UFICentralUpdates').didUpdateFeedback(ea.ftentidentifier);}var ba={getRenderKey:function ca(da){return 'comment'+(da in k?k[da]:da);},getComment:function ca(da){if(da===c('UFIConstants').unavailableCommentKey)return null;return i[l(da)];},setComment:function ca(da,ea){ea instanceof c('ImmutableObject')||h(0);i[l(da)]=ea;},resetComments:function ca(da){for(var ea in da)delete i[l(ea)];},getCommentsForFTEntIdentifier:function ca(da){return Object.values(i).filter(function(ea){return ea.ftentidentifier==da;});}};c('UFICentralUpdates').subscribe('update-comments',function(ca,da){if(da.comments&&da.comments.length)m(da.comments,da.payloadsource);if(da.pinnedcomments&&da.pinnedcomments.length)m(da.pinnedcomments,da.payloadsource);});c('UFICentralUpdates').subscribe('update-actions',function(ca,da){if(da.actions&&da.actions.length)n(da.actions,da.payloadsource);});f.exports=ba;}),6);
__d('UFILivePinnedCommentStore',['FluxReduceStore','UFIComments','UFIFeedbackTargets','UFIDispatcherBase','UFIStoryActionType','areEqual'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {};};j.prototype.reduce=function(k,l){var m;switch(l.type){case c('UFIStoryActionType').LIVE_PIN_COMMENT:case c('UFIStoryActionType').LIVE_UNPIN_COMMENT:var n=l.commentID,o=l.pinEventID;return babelHelpers['extends']({},k,(m={},m[l.ftentidentifier]={commentID:n,pinEventID:o},m));default:return k;}};j.prototype.areEqual=function(k,l){return c('areEqual')(k,l);};j.prototype.getPinnedCommentID=function(k){var l=this.getState()[k];if(!l){var m=c('UFIFeedbackTargets').getFeedbackTargetIfExists(k);if(!m)return null;return m.livepinnedcommentid||null;}return l.commentID||null;};j.prototype.getPinEventID=function(k){var l=this.getState()[k];if(!l)return null;return l.pinEventID||null;};j.prototype.getPinnedCommentAuthorID=function(k){var l=this.getPinnedCommentID(k);if(l===null)return null;return c('UFIComments').getComment(l).author||null;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFIVisibility',[],(function a(b,c,d,e,f,g){'use strict';var h={VISIBLE:'visible',HIDDEN:'hidden'};f.exports=h;}),null);
__d('UFICommentVisibilityStore',['invariant','FluxReduceStore','UFICommentActionType','UFIComments','UFIDispatcherBase','UFIInstanceActionType','UFILivePinnedCommentStore','UFIRootRegistry','UFIVisibility','filterObject'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;function k(p){var q=arguments.length<=1||arguments[1]===undefined?null:arguments[1],r=arguments.length<=2||arguments[2]===undefined?null:arguments[2];q===null&&r===null||q!==null&&r!==null||h(0);if(q)return p+'-'+q+(r?'-P':'');return p;}function l(p,q){return p===q||p.startsWith(q+'-');}function m(p){var q=c('UFIRootRegistry').getInstanceIDFromFTEntIdentifier(p);return q?q:[];}function n(p){return {instanceid:p};}i=babelHelpers.inherits(o,c('FluxReduceStore'));j=i&&i.prototype;o.prototype.getInitialState=function(){return {};};o.prototype.getVisibility=function(p,q){var r=arguments.length<=2||arguments[2]===undefined?null:arguments[2],s=r?k(q.instanceid,r.comment.fbid,r.isLivePinnedComment):k(q.instanceid);if(p.hasOwnProperty(s))return p[s];return c('UFIVisibility').HIDDEN;};o.prototype.$UFICommentVisibilityStore1=function(p){var q=n(p);return (this.getVisibility(this.getState(),q)===c('UFIVisibility').VISIBLE);};o.prototype.isFeedbackTargetVisible=function(p){var q=m(p);return q.some(function(r){return this.$UFICommentVisibilityStore1(r);}.bind(this));};o.prototype.reduce=function(p,q){var r,s;switch(q.type){case c('UFICommentActionType').UNMOUNTED:var t=babelHelpers['extends']({},p);delete t[k(q.instanceID,q.renderedComment.comment.fbid,q.renderedComment.isLivePinnedComment)];return t;case c('UFICommentActionType').CHANGE_VISIBILITY:return babelHelpers['extends']({},p,(r={},r[k(q.instanceID,q.renderedComment.comment.fbid,q.renderedComment.isLivePinnedComment)]=q.visibility,r));case c('UFIInstanceActionType').CHANGE_VISIBILITY:var u=c('UFIRootRegistry').getFTEntIdentifierFromInstanceID(q.instanceID),v=c('UFIComments').getCommentsForFTEntIdentifier(u);q.type===c('UFIInstanceActionType').CHANGE_VISIBILITY||h(0);var w=q.visibility,x=v.reduce(function(ca,da){ca[k(q.instanceID,da.fbid,da.fbid?false:null)]=w;return ca;},{});if(u){var y=c('UFILivePinnedCommentStore').getPinnedCommentID(u);if(y!==null){var z=c('UFIComments').getComment(y);x[k(q.instanceID,z.fbid,true)]=w;}}return babelHelpers['extends']({},p,(s={},s[k(q.instanceID)]=q.visibility,s),x);case c('UFIInstanceActionType').REMOVE:var aa=q.instanceID,ba=k(aa);return c('filterObject')(p,function(ca,da){return (da!==ba&&!l(da,aa));});}return p;};function o(){i.apply(this,arguments);}f.exports=new o(c('UFIDispatcherBase'));}),null);
__d('UFIKeyValueStore',['FluxReduceStore','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {};};j.prototype.getValueFor=function(k){return this.getState()[k]||null;};j.prototype.getStateKey=function(k){return k.instanceID;};j.prototype.getStateValue=function(k){return c('abstractMethod')('UFIKeyValueStore','getStateValue');};j.prototype.reduce=function(k,l){var m=this.getStateKey(l),n=this.getStateValue(l);if(n!==null){var o;return babelHelpers['extends']({},k,(o={},o[m]=n,o));}return k;};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('UFICommercialBreakStore',['UFIKeyValueStore','UFIInstanceActionType','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getValueFor=function(k){return !!i.getValueFor.call(this,k);};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIInstanceActionType').TOGGLE_COMMERCIAL_BREAK:return k.inCommercial;}return null;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFIComposerIsTypingStore',['UFIKeyValueStore','UFIAddCommentActionType','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getStateKey=function(k){return k.ftentidentifier;};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIAddCommentActionType').SUBMIT_EDIT:return false;case c('UFIAddCommentActionType').SUBMIT_NEW:return false;case c('UFIAddCommentActionType').CHANGE_CONTENT:var l=k.text.trim().length;return l>0;}return null;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFIFeedbackStore',['FluxReduceStore','UFIDispatcherBase','UFIInstanceActionType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {};};j.prototype.reduce=function(k,l){var m;switch(l.type){case c('UFIInstanceActionType').INIT:var n=l.payload,o=n.feedbacktarget?n.feedbacktarget:n.feedbacktargets&&n.feedbacktargets[0];if(!o)return k;return babelHelpers['extends']({},k,(m={},m[l.ftentidentifier]=babelHelpers['extends']({orderingmodes:[],defaultcommentorderingmode:''},o),m));}return k;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFIInteractionStore',['UFIAddCommentActionType','UFICommentActionType','UFIDispatcherBase','UFIInstanceActionType','UFIKeyValueStore','UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getValueFor=function(k){return !!i.getValueFor.call(this,k);};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIAddCommentActionType').CHANGE_CONTENT:case c('UFIAddCommentActionType').SUBMIT_EDIT:case c('UFIAddCommentActionType').SUBMIT_NEW:case c('UFICommentActionType').CHANGE_REACTION:case c('UFICommentActionType').EDIT:case c('UFICommentActionType').REMOVE:case c('UFICommentActionType').TOGGLE_LIKE:case c('UFICommentActionType').TOGGLE_MARK_AS_SPAM:case c('UFICommentActionType').TRANSLATE:case c('UFIInstanceActionType').CHANGE_ORDER_MODE:case c('UFIInstanceActionType').TOGGLE_COMMENTS:case c('UFIStoryActionType').PAGE_IN_COMMENTS:case c('UFIStoryActionType').SHOW_REPLIES:case c('UFIStoryActionType').TOGGLE_REPLIES:return true;}return null;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFILiveTypingStore',['FluxReduceStore','UFIDispatcherBase','UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.getNewFeedbackState=function(k){switch(k){case c('UFIStoryActionType').FRIEND_TYPING:return 'friend';case c('UFIStoryActionType').SOMEONE_TYPING:return 'someone';case c('UFIStoryActionType').TYPING_STOPPED:return false;default:return null;}};j.prototype.getInitialState=function(){return {};};j.prototype.reduce=function(k,l){var m=j.getNewFeedbackState(l.type);if(m!==null){var n;k=babelHelpers['extends']({},k,(n={},n[l.ftentidentifier]=m,n));}return k;};j.prototype.isFriendTyping=function(k){return this.getState()[k]==='friend';};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFIOrderingModeStore',['invariant','FluxReduceStore','Map','UFIDispatcherBase','UFIFeedbackStore','UFIInstanceActionType','WebCommentViewOption'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;function k(m,n){return m.filter(function(o){return o.selected;}).map(function(o){return o.value;}).pop()||n;}i=babelHelpers.inherits(l,c('FluxReduceStore'));j=i&&i.prototype;l.prototype.getInitialState=function(){return new (c('Map'))();};l.prototype.areEqual=function(m,n){return m===n;};l.prototype.isLiveStreaming=function(m){return (this.getState().get(m)==c('WebCommentViewOption').LIVE_STREAMING);};l.prototype.getOrderingMode=function(m){var n=this.getState().get(m);n!==undefined||h(0);return n;};l.prototype.reduce=function(m,n){switch(n.type){case c('UFIInstanceActionType').INIT:if(m.has(n.instanceID))return m;c('UFIDispatcherBase').waitFor([c('UFIFeedbackStore').getDispatchToken()]);var o=c('UFIFeedbackStore').getState()[n.ftentidentifier];m=new (c('Map'))(m);return m.set(n.instanceID,k(o.orderingmodes,o.defaultcommentorderingmode));case c('UFIInstanceActionType').CHANGE_ORDER_MODE:if(!m.has(n.instanceID)||m.get(n.instanceID)!==n.mode){m=new (c('Map'))(m);m.set(n.instanceID,n.mode);}return m;}return m;};function l(){i.apply(this,arguments);}f.exports=new l(c('UFIDispatcherBase'));}),null);
__d('UFIActionTypes',['UFIInstanceActionType','UFIStoryActionType','UFIAddCommentActionType','UFICommentActionType'],(function a(b,c,d,e,f,g){'use strict';var h={INSTANCE:c('UFIInstanceActionType'),STORY:c('UFIStoryActionType'),ADD_COMMENT:c('UFIAddCommentActionType'),COMMENT:c('UFICommentActionType')};f.exports=h;}),null);
__d('UFIReactionPendingRequestsStore',['FluxReduceStore','UFIActionTypes','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;function j(o){return o+'-comment';}function k(o){return o+'-story';}function l(o,p){var q;return babelHelpers['extends']({},o,(q={},q[p]=(o[p]||0)+1,q));}function m(o,p){var q;return babelHelpers['extends']({},o,(q={},q[p]=(o[p]||0)-1,q));}h=babelHelpers.inherits(n,c('FluxReduceStore'));i=h&&h.prototype;n.prototype.getInitialState=function(){return {};};n.prototype.reduce=function(o,p){switch(p.type){case c('UFIActionTypes').STORY.CHANGE_REACTION:return l(o,k(p.ftentidentifier));case c('UFIActionTypes').COMMENT.CHANGE_REACTION:return l(o,j(p.fbid));case c('UFIActionTypes').STORY.CHANGE_REACTION_SUCCESS:case c('UFIActionTypes').STORY.CHANGE_REACTION_FAILURE:return m(o,k(p.ftentidentifier));case c('UFIActionTypes').COMMENT.CHANGE_REACTION_FAILURE:case c('UFIActionTypes').COMMENT.CHANGE_REACTION_SUCCESS:return m(o,j(p.fbid));}return o;};n.prototype.getPendingRequestsForComment=function(o){return this.getState()[j(o)]||0;};n.prototype.getPendingRequests=function(o){return this.getState()[k(o)]||0;};function n(){h.apply(this,arguments);}f.exports=new n(c('UFIDispatcherBase'));}),null);
__d('UFIReactionSyncStore',['FluxReduceStore','UFIActionTypes','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;function j(m){return m+'-comment';}function k(m){return m+'-story';}h=babelHelpers.inherits(l,c('FluxReduceStore'));i=h&&h.prototype;l.prototype.getInitialState=function(){return {};};l.prototype.reduce=function(m,n){var o,p,q;switch(n.type){case c('UFIActionTypes').INSTANCE.INIT:var r=n.payload,s=r.feedbacktarget?r.feedbacktarget:r.feedbacktargets&&r.feedbacktargets[0];if(!s)return m;var t=n.payload.comments.reduce(function(u,v){u[j(v.fbid)]=v.viewerreaction;return u;},{});return babelHelpers['extends']({},m,t,(o={},o[k(n.ftentidentifier)]=s.viewerreaction,o));case c('UFIActionTypes').STORY.CHANGE_REACTION_SUCCESS:return babelHelpers['extends']({},m,(p={},p[k(n.ftentidentifier)]=n.reactionType,p));case c('UFIActionTypes').COMMENT.CHANGE_REACTION_SUCCESS:return babelHelpers['extends']({},m,(q={},q[j(n.fbid)]=n.reactionType,q));default:return m;}};l.prototype.getLastKnownCommentReaction=function(m){return this.getState()[j(m)];};l.prototype.getLastKnownReaction=function(m){return this.getState()[k(m)];};function l(){h.apply(this,arguments);}f.exports=new l(c('UFIDispatcherBase'));}),null);
__d('UFISharedDispatcher',['UFIDispatcherBase','UFIFeedbackStore','UFICommentEditIDStore','UFICommentVisibilityStore','UFICommercialBreakStore','UFIComposerIsTypingStore','UFIInteractionStore','UFILivePinnedCommentStore','UFILiveTypingStore','UFIOrderingModeStore','UFIReactionPendingRequestsStore','UFIReactionSyncStore','UFISpamStore'],(function a(b,c,d,e,f,g){'use strict';c('UFIFeedbackStore');c('UFICommentEditIDStore');c('UFICommentVisibilityStore');c('UFICommercialBreakStore');c('UFIComposerIsTypingStore');c('UFIFeedbackStore');c('UFIInteractionStore');c('UFILivePinnedCommentStore');c('UFILiveTypingStore');c('UFIOrderingModeStore');c('UFIReactionPendingRequestsStore');c('UFIReactionSyncStore');c('UFISpamStore');f.exports=c('UFIDispatcherBase');}),null);
__d('UFICommentAction',['UFICommentActionType'],(function a(b,c,d,e,f,g){'use strict';var h={changeReaction:function i(j,k,l,m){return {type:c('UFICommentActionType').CHANGE_REACTION,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l,target:m};},changeReactionSuccess:function i(j,k,l){return {type:c('UFICommentActionType').CHANGE_REACTION_SUCCESS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l};},changeReactionFailure:function i(j,k,l){return {type:c('UFICommentActionType').CHANGE_REACTION_FAILURE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l};},mounted:function i(j,k){return {type:c('UFICommentActionType').MOUNTED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j};},unmounted:function i(j,k){return {type:c('UFICommentActionType').UNMOUNTED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j};},changeVisibility:function i(j,k,l){return {type:c('UFICommentActionType').CHANGE_VISIBILITY,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j,visibility:l};},edit:function i(j,k){return {type:c('UFICommentActionType').EDIT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k};},remove:function i(j,k,l,m){return {type:c('UFICommentActionType').REMOVE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l,onConfirm:m};},removePreview:function i(j,k,l){return {type:c('UFICommentActionType').REMOVE_PREVIEW,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l};},toggleLike:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_LIKE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,like:!k.hasviewerliked,target:l};},translate:function i(j,k,l){return {type:c('UFICommentActionType').TRANSLATE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,trigger:l};},markAsSpam:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_MARK_AS_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_spam:true,target:l};},markAsNotSpam:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_MARK_AS_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_spam:false,target:l};},inlineBan:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_INLINE_BAN,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_banned:true,ownerid:m,target:l};},undoInlineBan:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_INLINE_BAN,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_banned:false,ownerid:m,target:l};},embed:function i(j,k){return {type:c('UFICommentActionType').EMBED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k};},showConstituentTitle:function i(j,k){return {type:c('UFICommentActionType').SHOW_CONSTITUENT_TITLE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k};},hideConstituentTitle:function i(j,k){return {type:c('UFICommentActionType').HIDE_CONSTITUENT_TITLE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k};}};f.exports=h;}),null);
__d('UFIReactionsUtils',[],(function a(b,c,d,e,f,g){var h={getReactionData:function i(j,k,l,m,n){k=parseInt(k,10);var o=!!k,p=j.reactorids?j.reactorids.slice(0):[],q=p.indexOf(l),r=0;if(o){if(q<0){p.unshift(l);r=1;}}else if(q>-1){p.splice(q,1);r=-1;}var s=Math.max(j.reactioncount+r,0),t=j.reactioncountreduced;if(t&&!isNaN(t))if(m){t=m(s,n);}else t=s.toString();var u=j.reactioncountmap||{},v,w=j.viewerreaction;if(w&&u[w]){u[w]['default']=Math.max((u[w]['default']||0)-1,0);v=u[w].reduced;if(v&&!isNaN(v))u[w].reduced=u[w]['default'].toString();}if(o&&u[k]){u[k]['default']=(u[k]['default']||0)+1;v=u[k].reduced;if(v&&!isNaN(v))u[k].reduced=u[k]['default'].toString();}var x=j.userreactions;if(!x||Array.isArray(x))x={};if(o){x[l]=k;}else delete x[l];var y=j.importantreactorids||[],z=y.indexOf(l);if(o&&z===-1){y.unshift(l);}else if(!o&&z!==-1)y.splice(z,1);var aa=null;if(j.reactionsentences){var ba=!(w&&k);aa={current:j.reactionsentences[ba?'alternate':'current'],alternate:j.reactionsentences[ba?'current':'alternate']};}return {importantreactorids:y,reactioncount:s,reactioncountmap:u,reactioncountreduced:t,reactionsentences:aa,reactorids:p,userreactions:x,viewerreaction:k};},getReactionCountMapFromSummary:function i(j){var k={};if(!j)return k;for(var l=0;l<j.length;l++){var m=j[l],n=m.feedback_reaction.key;k[n]={'default':m.reactors&&m.reactors.count,reduced:m.reactors&&m.reactors.display_count};}return k;}};f.exports=h;}),null);
__d('UFIStoryAction',['UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h={commentsArrived:function i(j,k,l,m){return {type:c('UFIStoryActionType').COMMENTS_ARRIVED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,newOffset:k,newLength:l,source:m};},pageInComments:function i(j,k,l,m){return {type:c('UFIStoryActionType').PAGE_IN_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,direction:l,nextRange:m};},showComments:function i(j){return {type:c('UFIStoryActionType').SHOW_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},showReplies:function i(j,k,l){return {type:c('UFIStoryActionType').SHOW_REPLIES,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,initiatorComment:l};},spamFetched:function i(j,k,l,m){return {type:c('UFIStoryActionType').SPAM_FETCHED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,viewas:k,commentIDs:l,parentCommentID:m};},changeReaction:function i(j,k,l){return {type:c('UFIStoryActionType').CHANGE_REACTION,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,contextArgs:j,reactionType:k,target:l};},changeReactionSuccess:function i(j,k){return {type:c('UFIStoryActionType').CHANGE_REACTION_SUCCESS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,reactionType:k};},changeReactionFailure:function i(j,k){return {type:c('UFIStoryActionType').CHANGE_REACTION_FAILURE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,reactionType:k};},toggleReplies:function i(j,k){return {type:c('UFIStoryActionType').TOGGLE_REPLIES,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k};},friendTyping:function i(j){return {type:c('UFIStoryActionType').FRIEND_TYPING,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},someoneTyping:function i(j){return {type:c('UFIStoryActionType').SOMEONE_TYPING,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},typingStopped:function i(j){return {type:c('UFIStoryActionType').TYPING_STOPPED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},pinComment:function i(j,k){var l=arguments.length<=2||arguments[2]===undefined?null:arguments[2];return {type:c('UFIStoryActionType').LIVE_PIN_COMMENT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,pinEventID:l};},unpinComment:function i(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1];return {type:c('UFIStoryActionType').LIVE_UNPIN_COMMENT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:null,pinEventID:k};}};f.exports=h;}),null);
__d('UFIUserActionUtils',['Nectar','collectDataAttributes'],(function a(b,c,d,e,f,g){var h={trackingData:function i(j){if(!j)return {ft:{}};var i={ft:c('collectDataAttributes')(j,['ft']).ft};c('Nectar').addModuleData(i,j);return i;}};f.exports=h;}),null);
__d("XUFICommentReactionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/reaction\/",{reaction_type:{type:"Enum",enumType:0}});}),null);
__d("XUFIReactionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/reaction\/",{client_id:{type:"String"},ft_ent_identifier:{type:"String"},reaction_type:{type:"Enum",enumType:0},story_render_location:{type:"Enum",enumType:1},feedback_source:{type:"Int"},feedback_referrer:{type:"String"},basic_origin_uri:{type:"String"},basic_reload:{type:"Exists",defaultValue:false},on_demand_content_time_offset:{type:"Int"},live_content_time_offset:{type:"Int"},aftercursor:{type:"String"},tab:{type:"String"},av:{type:"Int"},_ft_:{type:"String"}});}),null);
__d('UFIReactionUserActions',['ActorURI','AsyncResponse','AsyncRequest','ClientIDs','ChannelClientID','NumberFormat','MercuryServerDispatcher','UFICentralUpdates','UFICommentAction','UFIComments','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIReactionPendingRequestsStore','UFIReactionSyncStore','UFIReactionTypes','UFISharedDispatcher','UFIStoryAction','UFIReactionsUtils','UFIUserActionUtils','UFIVideoPlayerRegistry','XUFIReactionController','XUFICommentReactionController','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h={changeReaction:function x(y,z,aa,ba){c('UFIFeedbackTargets').getFeedbackTarget(y,function(ca){var da=u(ca,z);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:da});var ea=c('UFIUserActionUtils').trackingData(ba),fa={};fa[c('ActorURI').PARAMETER_ACTOR]=ca.actorforpost;var ga=babelHelpers['extends']({client_id:c('ClientIDs').getNewClientID(),ft_ent_identifier:y,reaction_type:z,root_id:aa.rootid,session_id:c('ChannelClientID').getID(),source:aa.source,feedback_referrer:aa.feedbackReferrer,instance_id:aa.instanceid},fa,ea);if(aa.fluentContentToken)if(aa.isLiveVOD){ga.on_demand_content_time_offset=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(ba,aa.fluentContentToken);}else if(aa.islivestreaming)ga.live_content_time_offset=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(ba,aa.fluentContentToken);c('MercuryServerDispatcher').trySend(c('XUFIReactionController').getURIBuilder().getURI(),ga);});},changeCommentReaction:function x(y,z,aa,ba){var ca=c('UFIComments').getComment(y);if(ca.viewerreaction!=z)c('UFIFeedbackTargets').getFeedbackTarget(ca.ftentidentifier,function(da){var ea=c('UFIUserActionUtils').trackingData(ba),fa=t(ca,da,z);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:fa});var ga={};ga[c('ActorURI').PARAMETER_ACTOR]=da.actorforpost;c('MercuryServerDispatcher').trySend(c('XUFICommentReactionController').getURIBuilder().getURI(),babelHelpers['extends']({comment_id:y,legacy_id:ca.legacyid,reaction_type:z,ft_ent_identifier:ca.ftentidentifier,source:aa.source,instance_id:aa.instanceid,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},ea,ga));});}},i={},j=c('XUFIReactionController').getURIBuilder().getURI();i[j]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:p,handler:o};var k=c('XUFICommentReactionController').getURIBuilder().getURI();i[k]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,batch_if:l,batch_function:m,error_handler:s,handler:r};c('MercuryServerDispatcher').registerEndpoints(i);function l(x,y){return x&&x.ft_ent_identifier==y.ft_ent_identifier&&x.comment_id==y.comment_id;}function m(x,y){return y;}function n(x,y){var z=c('UFIReactionPendingRequestsStore').getPendingRequests(x);if(z>0)return;var aa=c('UFIReactionSyncStore').getLastKnownReaction(x);if(y===aa)return;c('UFIFeedbackTargets').getFeedbackTarget(x,function(ba){var ca=u(ba,aa);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ca});});}function o(x,y){var z=y.data,aa=z.ft_ent_identifier,ba=z.reaction_type;c('UFISharedDispatcher').dispatch(c('UFIStoryAction').changeReactionSuccess({instanceid:z.instance_id,ftentidentifier:aa},ba));c('setImmediate')(function(){return n(aa,ba);});}function p(x){var y=x.request.data,z=y.ft_ent_identifier,aa=y.reaction_type;if(!y.retry_attempt){c('MercuryServerDispatcher').trySend(c('XUFIReactionController').getURIBuilder().getURI(),babelHelpers['extends']({},y,{retry_attempt:1}));return;}c('UFISharedDispatcher').dispatch(c('UFIStoryAction').changeReactionFailure({instanceid:y.instance_id,ftentidentifier:z},aa));c('setImmediate')(function(){return n(z,aa);});c('AsyncResponse').defaultErrorHandler(x);}function q(x,y,z){var aa=c('UFIReactionPendingRequestsStore').getPendingRequestsForComment(y.fbid);if(aa>0)return;var ba=c('UFIReactionSyncStore').getLastKnownCommentReaction(y.fbid);if(z===ba)return;c('UFIFeedbackTargets').getFeedbackTarget(x,function(ca){var da=t(y,ca,ba);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:da});});}function r(x,y){var z=y.data,aa=z.ft_ent_identifier,ba=z.reaction_type,ca=c('UFIComments').getComment(z.comment_id);if(!ca)return;c('UFISharedDispatcher').dispatch(c('UFICommentAction').changeReactionSuccess({instanceid:z.instance_id,ftentidentifier:aa},ca,ba));c('setImmediate')(function(){return q(aa,ca,ba);});}function s(x){var y=x.request.data,z=y.ft_ent_identifier,aa=y.reaction_type,ba=c('UFIComments').getComment(y.comment_id);if(!ba)return;if(!y.retry_attempt){c('MercuryServerDispatcher').trySend(c('XUFICommentReactionController').getURIBuilder().getURI(),babelHelpers['extends']({},y,{retry_attempt:1}));return;}c('UFISharedDispatcher').dispatch(c('UFICommentAction').changeReactionFailure({instanceid:y.instance_id,ftentidentifier:z},ba,aa));c('setImmediate')(function(){return q(z,ba,aa);});c('AsyncResponse').defaultErrorHandler(x);}function t(x,y,z){var aa=x.id,ba=[w(x,z,aa,y.supportedreactions||[],y.actorforpost)],ca=z===c('UFIReactionTypes').LIKE;if(y.hasviewerliked!==ca){var da=ca?1:-1;ba.push({commentid:aa,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:ca,likecount:(x.likecount||0)+da});}return ba;}function u(x,y){var z=[v(x,y)],aa=y!==c('UFIReactionTypes').NONE;if(x.hasviewerliked!==aa){var ba=aa?1:-1;z.push({actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:x.actorforpost,hasviewerliked:aa,likecount:(x.likecount||0)+ba,entidentifier:x.entidentifier,likesentences:{current:x.likesentences.alternate,alternate:x.likesentences.current}});}return z;}function v(x,y){return Object.assign({actiontype:c('UFIConstants').UFIActionType.REACTION,actorid:x.actorforpost,entidentifier:x.entidentifier},c('UFIReactionsUtils').getReactionData(x,y,x.actorforpost,c('NumberFormat').formatIntegerWithDelimiter,c('UFIConfig').numberDelimiter));}function w(x,y,z,aa,ba){var ca={};for(var da=0;da<aa.length;da++){var ea=aa[da],fa=x.reactioncountmap?x.reactioncountmap[ea]:null;ca[ea]={'default':fa?fa['default']:0,reduced:fa?fa.reduced:'0'};}var ga=c('UFIReactionsUtils').getReactionData({viewerreaction:x.viewerreaction,reactioncount:x.reactioncount,reactioncountreduced:x.reactioncountreduced,reactioncountmap:ca,reactorids:x.viewerreaction?[ba]:[]},y,ba);return {actiontype:c('UFIConstants').UFIActionType.COMMENT_REACTION,commentid:z,hasviewerliked:!!y,likecount:ga.reactioncountmap[1]['default'],reactioncount:ga.reactioncount,reactioncountmap:ga.reactioncountmap,reactioncountreduced:ga.reactioncountreduced,viewerreaction:y};}f.exports=h;}),null);
__d('UFIPagedCommentListImpl',['ClientIDs','KeyedCallbackManager','UFICentralUpdates','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets'],(function a(b,c,d,e,f,g){'use strict';function h(i){this.actorID=null;this.basePermalink=null;this.commentPermalinks=Object.create(null);this.count=0;this.dataSource=new (c('KeyedCallbackManager'))();this.deletedComments=Object.create(null);this.deletedCount=0;this.lastRequestedLength=0;this.lastRequestedOffset=0;this.feedbackTargetID=i;c('UFIFeedbackTargets').getFeedbackTarget(this.feedbackTargetID,function(j){this.actorID=j.actorforpost;this.basePermalink=j.permalink;}.bind(this));}h.prototype.setClientHasAll=function(i){};h.prototype.addOrUpdateComment=function(i){if(i.islocal){this.$UFIPagedCommentListImpl1(i.id);}else this.$UFIPagedCommentListImpl2(i.id,i.clientid,i.legacyid);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);};h.prototype.$UFIPagedCommentListImpl1=function(i){this.dataSource.setResource(this.count,i);this.count++;};h.prototype.$UFIPagedCommentListImpl2=function(i,j,k){var l=j&&c('ClientIDs').isExistingClientID(j),m=this.dataSource.getAllResources(),n={};for(var o in m){var p=m[o];n[p]=o;}if(l&&j&&j in n){n[i]=n[j];var q=n[j];this.dataSource.setResource(q,i);if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentReceived(j,Date.now());}else if(!n[i]&&j)this.$UFIPagedCommentListImpl1(i);if(k&&i in n)this.commentPermalinks[i]=this.buildCommentPermalink(i,k,n[i]);};h.prototype.addCommentIDs=function(i,j,k){var l={};for(var m=0;m<j;m++)l[i+m]=k[m]||c('UFIConstants').unavailableCommentKey;this.dataSource.addResourcesAndExecute(l);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);};h.prototype.getComments=function(i,j,k,l){var m=new Array(j).fill().map(function(s,t){return t+i;}),n=this.dataSource.getUnavailableResourcesFromRequest(m);if(n.length){var o=Math.min.apply(Math,n),p=Math.max.apply(Math,n),q=o,r=p-o+1;if(q<this.lastRequestedOffset||q+r>this.lastRequestedOffset+this.lastRequestedLength){this.lastRequestedOffset=q;this.lastRequestedLength=r;this.fetchComments(q,r,k);}}else this.dataSource.executeOrEnqueue(m,function(s){return l(this.commentsFromCommentIDs(s,i,j));}.bind(this));};h.prototype.getCommentsOrThrow=function(i){var j=i.getLength(),k=i.getOffset(),l={};new Array(j).fill().forEach(function(m,n){var o=n+k,p=this.dataSource.getResource(o);if(!p)throw new Error('Tried to get nonexistent comment');l[o]=p;}.bind(this));return this.commentsFromCommentIDs(l,k,j);};h.prototype.fetchComments=function(i,j,k){};h.prototype.commentsFromCommentIDs=function(i,j,k){return {};};h.prototype.reset=function(){var i=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return i;};h.prototype.deleteComment=function(i){if(!(i in this.deletedComments)){this.deletedComments[i]=true;this.deletedCount++;}};h.prototype.updateCommentCount=function(i){this.count=i;this.deletedCount=0;};h.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};h.prototype.getCommentCount=function(){return this.count;};h.prototype.getDeletedCount=function(){return this.deletedCount;};h.prototype.getDisplayedCommentCount=function(){return this.count-this.deletedCount;};h.prototype.getBasePermalink=function(){return this.basePermalink;};h.prototype.buildCommentPermalink=function(i,j,k){return null;};h.prototype.getPermalinkForComment=function(i){return this.commentPermalinks[i];};f.exports=h;}),null);
__d('UFIReplyCommentListImpl',['ActorURI','JSLogger','MercuryServerDispatcher','UFICommentLogger','UFIComments','UFIConfig','UFIPagedCommentListImpl','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('JSLogger').create('ufi_reply_comment_list');h=babelHelpers.inherits(k,c('UFIPagedCommentListImpl'));i=h&&h.prototype;function k(l,m,n){i.constructor.call(this,l);this.parentCommentID=m;this.containerOrderingMode=n;}k.prototype.fetchComments=function(l,m,n){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:m,is_reply:true});var o={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[l],lengths:[m],feed_context:n?n.feedContext:null,numpagerclicks:n?n.numPagerClicks:null,containerorderingmode:this.containerOrderingMode,translate_all:n?n.translateAll:null};if(!n||!n.viewAs)o[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/reply_fetch.php',o);};k.prototype.commentsFromCommentIDs=function(l,m,n){var o={};for(var p=0;p<n;p++){var q=c('UFIComments').getComment(l[m+p]);if(q)o[m+p]=q;}return o;};k.prototype.reset=function(){var l=i.reset.call(this),m={};for(var n in l){var o=l[n];m[o]=true;}c('UFIComments').resetComments(m);return l;};k.prototype.getParentCommentID=function(){return this.parentCommentID;};k.prototype.buildCommentPermalink=function(l,m,n){if(!this.basePermalink)return null;var o=this.getParentCommentID().split('_'),p=m;if(o.length===2){p=o[1];}else j.error('Bad reply comment ID: '+this.getParentCommentID());return (new (c('URI'))(this.basePermalink).addQueryData({comment_id:p,reply_comment_id:m}).toString());};f.exports=k;}),null);
__d('UFIReplyCommentList',['getObjectValues','MercuryServerDispatcher','UFICentralUpdates','UFIComments','UFIConstants','UFIReplyCommentListImpl'],(function a(b,c,d,e,f,g){'use strict';var h={},i={getCommentList:function k(l,m,n){if(!h[m])h[m]={};if(!h[m][n]){var o=new (c('UFIReplyCommentListImpl'))(l,m,n),p=i.getReplyListsForParentCommentID(String(m));if(p.length)o.updateCommentCount(p[0].getCommentCount());h[m][n]=o;}return h[m][n];},getReplyListsForParentCommentID:function k(l){return c('getObjectValues')(h[l]||{});},resetWithContext:function k(l,m,n,o){var p=h[m][o];if(!p)return;p.reset();p.actorID=n;}};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/reply_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});function j(k){var l=c('UFIComments').getComment(k.commentid),m=l.id,n=l.parentcommentid;if(!n)return;if(l.status!==c('UFIConstants').UFIStatus.DELETED&&l.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getReplyListsForParentCommentID(n).forEach(function(o){o.deleteComment(m);});}c('UFICentralUpdates').subscribe('update-actions',function(k,l){if(l.actions&&l.actions.length)for(var m=0;m<l.actions.length;m++){var n=l.actions[m];switch(n.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:j(n);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(k,l){var m=l.commentlists;if(m&&m.replies&&Object.keys(m).length)for(var n in m.replies){var o=m.replies[n],p=o.ftentidentifier,q=o.containerorderingmode,r=i.getCommentList(String(p),String(n),q);r.addCommentIDs(o.range.offset,o.range.length,o.values);r.updateCommentCount(o.count);}});c('UFICentralUpdates').subscribe('update-comments',function(k,l){if(l.comments&&l.comments.length)l.comments.forEach(function(m){var n=m.parentcommentid;if(!n)return;i.getReplyListsForParentCommentID(String(n)).forEach(function(o){o.addOrUpdateComment(m);});});});f.exports=i;}),6);
__d('UFICommentOrdering',['WebCommentViewOption'],(function a(b,c,d,e,f,g){'use strict';var h={inverted:function i(j){switch(j){case c('WebCommentViewOption').RECENT_ACTIVITY:case c('WebCommentViewOption').RANKED_THREADED:case c('WebCommentViewOption').FILTERED:case c('WebCommentViewOption').LIVE_STREAMING:return true;}return false;}};f.exports=h;}),null);
__d('UFIToplevelPagedCommentListImpl',['ActorURI','MercuryServerDispatcher','UFICommentLogger','UFICommentOrdering','UFIComments','UFIConfig','UFIPagedCommentListImpl','URI','WebCommentViewOption'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIPagedCommentListImpl'));i=h&&h.prototype;function j(k,l){i.constructor.call(this,k);this.clientHasAll=false;this.orderReversed=c('UFICommentOrdering').inverted(l);this.orderingMode=l;this.clientHasAll=false;}j.prototype.fetchComments=function(k,l,m){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:l,is_reply:false});var n={ft_ent_identifier:this.feedbackTargetID,viewas:m&&m.viewAs?m.viewAs+'':null,source:m&&m.feedbackSource,offset:k,length:l,orderingmode:this.orderingMode,feed_context:m?m.feedContext:null,numpagerclicks:m?m.numPagerClicks:null,translate_all:m?m.translateAll:null,clientcommentcount:this.count};if(this.orderingMode!==c('WebCommentViewOption').RECENT_ACTIVITY||this.orderingMode!==c('WebCommentViewOption').RANKED_THREADED||this.orderingMode!==c('WebCommentViewOption').FILTERED)delete n.clientcommentcount;if(!m||!m.viewAs)n[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/comment_fetch.php',n);};j.prototype.commentsFromCommentIDs=function(k,l,m){var n={},o=l,p=l+m-1;for(var q=0;q<m;q++){var r=this.orderReversed?p-q:o+q,s=c('UFIComments').getComment(k[r]);if(s)n[l+q]=s;}return n;};j.prototype.getOrderingMode=function(){return this.orderingMode;};j.prototype.setClientHasAll=function(k){this.clientHasAll=k;};j.prototype.getClientHasAll=function(){return this.clientHasAll;};j.prototype.buildCommentPermalink=function(k,l,m){if(!this.basePermalink)return null;return (new (c('URI'))(this.basePermalink).addQueryData({comment_id:l}).toString());};f.exports=j;}),null);
__d('UFIRange',[],(function a(b,c,d,e,f,g){'use strict';function h(){var i=arguments.length<=0||arguments[0]===undefined?0:arguments[0],j=arguments.length<=1||arguments[1]===undefined?0:arguments[1];this.offset=i;this.length=j;this.requestedOffset=this.offset;this.requestedLength=this.length;}h.prototype.getOffset=function(){return this.offset;};h.prototype.getLength=function(){return this.length;};h.prototype.getRequestedOffset=function(){return this.requestedOffset;};h.prototype.getRequestedLength=function(){return this.requestedLength;};h.prototype.updateRequestedRange=function(i,j){this.requestedOffset=i;this.requestedLength=j;return this;};h.prototype.isLoadingNext=function(){var i=this.requestedOffset+this.requestedLength,j=this.offset+this.length;return i>j;};h.prototype.isLoadingPrev=function(){return this.requestedOffset<this.offset;};h.combine=function(i,j){if(!j)return i;var k=Math.min(i.getOffset(),j.getOffset()),l=Math.max(i.getLength(),j.getLength()),m=new h(k,l);if(j.getRequestedLength()>0){var n=Math.min(k,j.getRequestedOffset()),o=Math.max(k+l,j.getRequestedOffset()+j.getRequestedLength());m.updateRequestedRange(n,o-n);}return m;};f.exports=h;}),null);
__d('UFIToplevelStreamedCommentList',['invariant','ClientIDs','Map','UFICentralUpdates','UFICommentLogger','UFIConfig','UFIComments','UFIConstants','UFIRange'],(function a(b,c,d,e,f,g,h){'use strict';function i(j){this.feedbackTargetID=j;this.commentIDs=[];this.deletedCount=0;this.totalCommentCount=0;}i.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};i.prototype.getClientHasAll=function(){return false;};i.prototype.getActualCommentCount=function(){return this.commentIDs.length;};i.prototype.getCommentCount=function(){return this.totalCommentCount;};i.prototype.getDisplayedCommentCount=function(){return this.getCommentCount()-this.getDeletedCount();};i.prototype.getDeletedCount=function(){return this.deletedCount;};i.prototype.getPermalinkForComment=function(j){return '';};i.prototype.getComments=function(j,k,l,m){m(this.getCommentsOrThrow(new (c('UFIRange'))(j,k),l));};i.prototype.getCommentsOrThrow=function(j,k){var l=j.getLength(),m=j.getOffset();m===0||h(0);var n=k.streamingOrderReversed,o={};for(var p=0;p<Math.min(l,this.commentIDs.length);++p){var q=n?this.commentIDs.length-1-p:p,r=c('UFIComments').getComment(this.commentIDs[q]);if(r)o[p]=r;}return o;};i.prototype.$UFIToplevelStreamedCommentList3=function(){var j=this.commentIDs;this.commentIDs=[];return j;};i.prototype.hasComment=function(j){for(var k=0;k<this.commentIDs.length;++k)if(this.commentIDs[k]===j.id)return true;return false;};i.prototype.addCommentIDs=function(j,k,l){};i.prototype.setClientHasAll=function(j){};i.prototype.addOrUpdateComment=function(j){var k=arguments.length<=1||arguments[1]===undefined?false:arguments[1],l=j.clientid;if(l&&c('ClientIDs').isExistingClientID(l)){for(var m=0;m<this.commentIDs.length;++m)if(this.commentIDs[m]===l){this.commentIDs[m]=j.id;if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentReceived(l,Date.now());}}else if(k||j.islocal){if(this.hasComment(j))return;this.commentIDs.push(j.id);this.totalCommentCount+=1;}if(this.commentIDs.length>50)this.commentIDs.shift();c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);};i.prototype.deleteComment=function(j){var k=[];for(var l=0;l<this.commentIDs.length;++l){var m=this.commentIDs[l];if(m===j){this.deletedCount+=1;}else k.push(m);}this.commentIDs=k;};i.prototype.updateCommentCount=function(j){this.totalCommentCount=j;};i.getCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l){l=new (c('Map'))();i.$UFIToplevelStreamedCommentList1.set(j,l);}var m=l.get(k);if(!m){m=new i(j);l.set(k,m);}return m;};i.getExistingCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l)return null;return l.get(k);};i.getAllExistingCommentLists=function(j){var k=i.$UFIToplevelStreamedCommentList1.get(j);if(!k)return [];return Array.from(k.values());};i.$UFIToplevelStreamedCommentList4=function(j,k){var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){k.forEach(function(n){l[n]=true;});return;}var m={};k.forEach(function(n){m[n]=true;});i.$UFIToplevelStreamedCommentList2.set(j,m);};i.resetCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.getExistingCommentList(j,k);if(!l)return;i.$UFIToplevelStreamedCommentList4(j,l.$UFIToplevelStreamedCommentList3());};i.resetAllCommentLists=function(j){var k=i.getAllExistingCommentLists(j);if(k.length===0)return;k.forEach(function(m){i.$UFIToplevelStreamedCommentList4(j,m.$UFIToplevelStreamedCommentList3());});var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){i.$UFIToplevelStreamedCommentList2['delete'](j);c('UFIComments').resetComments(l);}};i.GLOBAL_ID='GLOBAL_ID';i.$UFIToplevelStreamedCommentList1=new (c('Map'))();i.$UFIToplevelStreamedCommentList2=new (c('Map'))();c('UFICentralUpdates').subscribe('update-actions',function(j,k){if(!k.actions)return;k.actions.forEach(function(l){if(l.actiontype!==c('UFIConstants').UFIActionType.DELETE_COMMENT)return;var m=c('UFIComments').getComment(l.commentid),n=m.id,o=m.ftentidentifier,p=m.parentcommentid;if(p)return;if(l.islocal||m.status!==c('UFIConstants').UFIStatus.DELETED&&m.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getCommentList(o).deleteComment(n);});});c('UFICentralUpdates').subscribe('update-comments',function(j,k){if(!k.comments)return;var l=k.targetufiinstanceid;k.comments.forEach(function(m){if(m.parentcommentid)return;if(l){i.getCommentList(m.ftentidentifier,l).addOrUpdateComment(m,!!k.isstreaming);}else i.getAllExistingCommentLists(m.ftentidentifier).forEach(function(n){n.addOrUpdateComment(m,!!k.isstreaming);});});});f.exports=i;}),6);
__d('UFIToplevelPagedCommentList',['MercuryServerDispatcher','UFICentralUpdates','UFIComments','UFIConstants','UFIReplyCommentList','UFIToplevelPagedCommentListImpl','UFIToplevelStreamedCommentList','WebCommentViewOption'],(function a(b,c,d,e,f,g){'use strict';var h={},i={getCommentList:function k(l,m){if(!h[l])h[l]={};if(!h[l][m]){var n=new (c('UFIToplevelPagedCommentListImpl'))(l,m),o=i.getCommentListsForFeedbackTargetID(l);if(o.length)n.updateCommentCount(o[0].getCommentCount());h[l][m]=n;}return h[l][m];},getCommentListsForFeedbackTargetID:function k(l){var m=[],n=h[l]||{};for(var o in n)m.push(n[o]);return m;},getDisplayedCommentCountForFeedbackTargetID_UNSAFE:function k(l){var m=i.getCommentListsForFeedbackTargetID(l),n=m.length?m[0].getDisplayedCommentCount():null,o=c('UFIToplevelStreamedCommentList').getAllExistingCommentLists(l),p=o.length?o[0].getDisplayedCommentCount():null;if(n===null&&p===null)return null;return Math.max(n||0,p||0);},resetCommentListsForFeedbackTargetID:function k(l){if(!h[l])return;var m={};for(var n in h[l]){var o=h[l][n],p=o.reset();for(var q in p){var r=p[q];m[r]=true;}}c('UFIComments').resetComments(m);},resetCommentListsWithContext:function k(l,m){var n=h[l];if(!n)return;var o={};for(var p in n){var q=n[p];q.actorID=m;var r=q.reset();for(var s in r){var t=r[s];o[t]=true;c('UFIReplyCommentList').resetWithContext(l,t,m,p);}}c('UFIComments').resetComments(o);}};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});function j(k){var l=c('UFIComments').getComment(k.commentid),m=l.id,n=l.ftentidentifier,o=l.parentcommentid;if(o)return;if(k.islocal||l.status!==c('UFIConstants').UFIStatus.DELETED&&l.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getCommentListsForFeedbackTargetID(n).forEach(function(p){p.deleteComment(m);});}c('UFICentralUpdates').subscribe('update-actions',function(k,l){if(l.actions&&l.actions.length)for(var m=0;m<l.actions.length;m++){var n=l.actions[m];switch(n.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:j(n);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(k,l){var m=l.commentlists;if(m&&m.comments&&Object.keys(m).length)for(var n in m.comments)for(var o in m.comments[n]){var p=m.comments[n][o],q=i.getCommentList(String(n),o);q.addCommentIDs(p.range.offset,p.range.length,p.values);q.setClientHasAll(!!p.forcenotpageable);}});c('UFICentralUpdates').subscribe('update-comments',function(k,l){if(l.comments&&l.comments.length)l.comments.forEach(function(m){if(m.parentcommentid)return;var n=m.ftentidentifier;i.getCommentListsForFeedbackTargetID(String(n)).forEach(function(o){o.addOrUpdateComment(m);});});});c('UFICentralUpdates').subscribe('update-feedback',function(k,l){var m,n=l.feedbacktarget?l.feedbacktarget:l.feedbacktargets&&l.feedbacktargets[0];if(n)(function(){var o=n.entidentifier,p=n.defaultcommentorderingmode,q={};if(p)q[p]=true;if(n.orderingmodes)n.orderingmodes.forEach(function(s){if(s.value===c('WebCommentViewOption').LIVE_STREAMING)return;q[s.value]=true;});for(var r in q)i.getCommentList(String(o),String(r)).updateCommentCount(n.commentcount);})();});f.exports=i;}),6);
__d("XConstituencyTitleEditVisibilityDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/constituency_title\/edit_comment_visibility\/",{ft_id:{type:"FBID",required:true},action_type:{type:"Enum",required:true,enumType:1},source:{type:"Enum",required:true,enumType:1},comment_id:{type:"String"},__asyncDialog:{type:"Int"}});}),null);
__d("XConstituencyTitleEnableController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/constituency_title\/enable\/",{});}),null);
__d("XUFIActorChangeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/actor\/change\/",{});}),null);
__d("XUFIAddCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/add\/comment\/",{});}),null);
__d("XUFICommentLikeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/like\/",{});}),null);
__d("XUFIDeleteCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/delete\/comment\/",{});}),null);
__d("XUFIEditCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/edit\/comment\/",{});}),null);
__d("XUFIHideCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/hide\/comment\/",{});}),null);
__d("XUFILikeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/like\/",{});}),null);
__d("XUFITranslateCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/translate\/comment\/",{});}),null);
__d('UFIUserActions',['errorCode','fbt','ActorURI','AsyncRequest','AsyncResponse','ChannelClientID','ClientIDs','CommentPostedLiveState','ImmutableObject','NYE2017TextHandler','UFICentralUpdates','UFIToplevelPagedCommentList','UFIToplevelStreamedCommentList','UFIComments','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIReactionUserActions','UFIUserActionUtils','UFIVideoPlayerRegistry','MercuryServerDispatcher','UnicodeBidi','XConstituencyTitleEditVisibilityDialogController','XConstituencyTitleEnableController','XUFIActorChangeController','XUFIAddCommentController','XUFICommentLikeController','XUFIDeleteCommentController','XUFIEditCommentController','XUFIHideCommentController','XUFILikeController','XUFITranslateCommentController','ifRequired'],(function a(b,c,d,e,f,g,h,i){'use strict';var j={BAN:'ban',UNDO_BAN:'undo_ban'},k={changeActor:function fa(ga,ha){c('UFIFeedbackTargets').getFeedbackTarget(ga,function(ia){c('UFIToplevelPagedCommentList').resetCommentListsWithContext(ga,ha);c('UFIToplevelStreamedCommentList').resetAllCommentLists(ga);c('UFICentralUpdates').inform('actor-changed',{actorID:ha});var ja={from_actor_id:ia.actorforpost,ft_ent_identifier:ga};ja[c('ActorURI').PARAMETER_ACTOR]=ha;var ka=c('XUFIActorChangeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ka,ja);});},changeCommentLike:function fa(ga,ha,ia){var ja=c('UFIComments').getComment(ga);if(ja.hasviewerliked!=ha){var ka=c('UFIUserActionUtils').trackingData(ia.target),la=ha?1:-1,ma={commentid:ga,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:ha,likecount:(ja.likecount||0)+la};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ma]});c('UFIFeedbackTargets').getFeedbackTarget(ja.ftentidentifier,function(na){var oa={};oa[c('ActorURI').PARAMETER_ACTOR]=na.actorforpost;var pa=c('XUFICommentLikeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(pa,babelHelpers['extends']({comment_id:ga,legacy_id:ja.legacyid,like_action:ha,ft_ent_identifier:ja.ftentidentifier,source:ia.source,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},ka,oa));});}},_getAttachment:function fa(ga){return ga;},_getLocalComment:function fa(ga,ha,ia,ja,ka,la){var ma=c('ClientIDs').getNewClientID(),na=c('UnicodeBidi').isDirectionLTR(ia)?'ltr':'rtl',oa=this._getAttachment(ka.attachedsticker);return {ftentidentifier:ha,body:{text:ia,dir:na},author:ga.actorforpost,id:ma,islocal:true,ufiinstanceid:ka.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:ka.replyid,replycommentparentid:ka.replycommentparentid,attachment:oa,photo_comment:ka.attachedphoto,video_comment:ka.attachedvideo,timestamp:{time:Math.floor(Date.now()/1000),text:i._("a few seconds ago")},photoTextTagID:ka.photoTextTagID,isPhotoTag:ka.isPhotoTag,photoTagX:ka.photoTagX,photoTagY:ka.photoTagY,videoTimeOffset:la,postedLiveState:ka.islivestreaming?c('CommentPostedLiveState').LIVE:c('CommentPostedLiveState').ON_DEMAND};},addComment:function fa(ga,ha,ia,ja){c('UFIFeedbackTargets').getFeedbackTarget(ga,function(ka){var la=this.createComment(ga,ha,ia,ja);if(!la)return;c('NYE2017TextHandler').playCommentAnimationIfMatchesAndAllowed(ha);var ma={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:ka.actorforpost,hasviewersubscribed:true,entidentifier:ka.entidentifier},na={actiontype:c('UFIConstants').UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:ka.targetfbid};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[la],actions:[ma,na]});}.bind(this));},createComment:function fa(ga,ha,ia,ja){var ka=c('UFIFeedbackTargets').getFeedbackTargetIfExists(ga);if(!ka.actorforpost)return null;var la=null;if(ja.isBroadcasterUFI){la=c('ifRequired')('LiveVideoBroadcastBroadcastStore',function(na){return (na.getCurrentBroadcastTime());});}else if(ja.fluentContentToken&&(ja.isLiveVOD||ja.islivestreaming))la=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(ja.target,ja.fluentContentToken);var ma=this._getLocalComment(ka,ga,ha,ia,ja,la);this._sendCommentToServer(ga,ka.actorforpost,ha,ia,ja,ma.id,la);return ma;},_sendCommentToServer:function fa(ga,ha,ia,ja,ka,la,ma){var na=null;if(ka.reply_fbid){na=ka.reply_fbid;}else if(ka.replyid)na=c('UFIComments').getComment(ka.replyid).fbid;var oa;if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentPost(la,ka.timestamp,{has_photo:!!ka.attachedphoto,has_video:!!ka.attachedvideo,has_sticker:!!ka.attachedsticker,is_reply:!!ka.replyid});var pa={};pa[c('ActorURI').PARAMETER_ACTOR]=ha;var qa=c('XUFIAddCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(qa,babelHelpers['extends']({ft_ent_identifier:ga,comment_text:ja,source:ka.source,client_id:la,session_id:c('ChannelClientID').getID(),reply_fbid:na,parent_comment_id:ka.parent_comment_id||ka.replyid,reply_comment_parent_id:ka.replycommentparentid,rootid:ka.rootid,clp:oa,attached_sticker_fbid:ka.attachedsticker?ka.attachedsticker.fbid:0,attached_photo_fbid:ka.attachedphoto?ka.attachedphoto.fbid:0,attached_video_fbid:ka.attachedvideo?ka.attachedvideo.fbid:0,attached_share_url:ka.attachedshareurl,feedback_referrer:ka.feedbackReferrer,feed_context:ka.feedcontext,video_time_offset:ma,is_live_streaming:ka.islivestreaming,is_markdown:ka.isMarkdown},c('UFIUserActionUtils').trackingData(ka.target),pa,{photo_text_tag_id:ka.photoTextTagID,is_private:ka.isPrivate,is_photo_tag:ka.isPhotoTag,photo_fbid:ka.photoFBID,photo_tag_x:ka.photoTagX,photo_tag_y:ka.photoTagY}));},_hasCommentTextChanged:function fa(ga,ha){return ga.body&&ga.body.text!=ha;},_hasCommentPhotoChanged:function fa(ga,ha){return (ga||ha)&&!(ga&&ha)||ga&&ha&&ga.fbid!=ha.fbid;},_hasCommentVideoChanged:function fa(ga,ha){return (ga||ha)&&!(ga&&ha)||ga&&ha&&ga.fbid!=ha.fbid;},_hasCommentStickerChanged:function fa(ga,ha){return (ga||ha)&&!(ga&&ha)||ga&&ga.type=="sticker"&&ha&&ga.fbid!=ha.fbid;},editComment:function fa(ga,ha,ia,ja){var ka=c('UFIUserActionUtils').trackingData(ja.target),la=c('UFIComments').getComment(ga),ma=this._hasCommentTextChanged(la,ha)||this._hasCommentPhotoChanged(la.photo_comment,ja.attachedPhoto)||this._hasCommentStickerChanged(la.attachment,ja.attachedSticker)||this._hasCommentVideoChanged(la.video_comment,ja.attachedVideo);la=c('ImmutableObject').set(la,{status:c('UFIConstants').UFIStatus.PENDING_EDIT,body:{text:ha},editnux:null,attachment:ja.attachedSticker,photo_comment:ja.attachedPhoto,video_comment:ja.attachedVideo});if(ma)la=c('ImmutableObject').set(la,{originalTimestamp:la.timestamp.time,timestamp:{time:Math.floor(Date.now()/1000),text:i._("a few seconds ago")}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[la]});c('UFIFeedbackTargets').getFeedbackTarget(la.ftentidentifier,function(na){var oa={};oa[c('ActorURI').PARAMETER_ACTOR]=na.actorforpost;var pa=c('XUFIEditCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(pa,babelHelpers['extends']({ft_ent_identifier:la.ftentidentifier,comment_text:ia,source:ja.source,comment_id:la.id,parent_comment_id:la.parentcommentid,attached_sticker_fbid:ja.attachedSticker?ja.attachedSticker.fbid:0,attached_photo_fbid:ja.attachedPhoto?ja.attachedPhoto.fbid:0,attached_video_fbid:ja.attachedVideo?ja.attachedVideo.fbid:0},ka,oa));});},translateComments:function fa(ga,ha,ia,ja){var ka=c('XUFITranslateCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ka,{ft_ent_identifier:ga,comment_ids:ha,source:ja.source,trigger:ia});},setHideAsSpam:function fa(ga,ha,ia){var ja=c('UFIUserActionUtils').trackingData(ia.target),ka=c('UFIComments').getComment(ga),la={commentid:ga,actiontype:c('UFIConstants').UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:ha};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[la]});c('UFIFeedbackTargets').getFeedbackTarget(ka.ftentidentifier,function(ma){var na={};na[c('ActorURI').PARAMETER_ACTOR]=ma.actorforpost;var oa=c('XUFIHideCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(oa,babelHelpers['extends']({comment_id:ga,spam_action:ha,ft_ent_identifier:ka.ftentidentifier,source:ia.source},ja,na));});},removeComment:function fa(ga,ha){var ia=c('UFIUserActionUtils').trackingData(ha.target),ja=c('UFIComments').getComment(ga),ka={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:ga,islocal:true,oneclick:ha.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ka]});c('UFIFeedbackTargets').getFeedbackTarget(ja.ftentidentifier,function(la){var ma={};ma[c('ActorURI').PARAMETER_ACTOR]=la.actorforpost;var na=c('XUFIDeleteCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(na,babelHelpers['extends']({comment_id:ja.id,comment_legacyid:ja.legacyid,ft_ent_identifier:ja.ftentidentifier,one_click:ha.oneclick,source:ha.source,client_id:c('ClientIDs').getNewClientID()},ia,ma));});},banUser:function fa(ga,ha,ia,ja){var ka=ia?j.BAN:j.UNDO_BAN;c('MercuryServerDispatcher').trySend('/ajax/ufi/ban_user.php',{page_id:ha,commenter_id:ga.author,action:ka,comment_id:ga.id,client_side:true});},changeSubscribe:function fa(ga,ha,ia){c('UFIFeedbackTargets').getFeedbackTarget(ga,function(ja){var ka=c('UFIUserActionUtils').trackingData(ia.target);if(ja.hasviewersubscribed!==ha){var la={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:ja.actorforpost,hasviewersubscribed:ha,entidentifier:ga};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[la]});var ma={};ma[c('ActorURI').PARAMETER_ACTOR]=ja.actorforpost;c('MercuryServerDispatcher').trySend('/ajax/ufi/subscribe.php',babelHelpers['extends']({subscribe_action:ha,ft_ent_identifier:ga,source:ia.source,client_id:c('ClientIDs').getNewClientID(),rootid:ia.rootid,comment_expand_mode:ia.commentexpandmode},ka,ma));}});},fetchSpamComments:function fa(ga,ha,ia,ja){c('MercuryServerDispatcher').trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:ga,viewas:ja,comment_ids:ha,parent_comment_id:ia,source:null});},hideConstituentTitle:function fa(ga){var ha=c('XConstituencyTitleEnableController').getURIBuilder().getURI();new (c('AsyncRequest'))(ha).setMethod('POST').setData({ft_id:ga.ftentidentifier,enable:false,source:'comment_edit_menu',comment_id:ga.id}).send();},showConstituentTitle:function fa(ga){var ha=c('XConstituencyTitleEditVisibilityDialogController').getURIBuilder().setFBID('ft_id',ga.ftentidentifier).setEnum('action_type','comment_show_constituent_title').setEnum('source','comment_edit_menu').setString('comment_id',ga.id).getURI();new (c('AsyncRequest'))(ha).send();},removePreview:function fa(ga,ha){var ia=c('UFIUserActionUtils').trackingData(ha.target),ja={commentid:ga.id,actiontype:c('UFIConstants').UFIActionType.REMOVE_PREVIEW};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ja]});c('MercuryServerDispatcher').trySend('/ajax/ufi/remove_preview.php',babelHelpers['extends']({comment_id:ga.id,ft_ent_identifier:ga.ftentidentifier,source:ha.source},ia));}};function l(fa){c('AsyncResponse').defaultErrorHandler(fa);}function m(fa){var ga=fa.request.data;c('AsyncResponse').defaultErrorHandler(fa);var ha=ga.client_id||ga.comment_id,ia=c('UFIComments').getComment(ha),ja=ia.status===c('UFIConstants').UFIStatus.PENDING_EDIT?c('UFIConstants').UFIStatus.FAILED_EDIT:c('UFIConstants').UFIStatus.FAILED_ADD;ia=c('ImmutableObject').setDeep(ia,{status:ja,allowRetry:n(fa),body:{mentionstext:ga.comment_text,mentionsphoto:ia.photo_comment,mentionsvideo:ia.video_comment}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ia]});}function n(fa){var ga=fa.getError();if(fa.isBlockedAction())return false;if(fa.silentError)return true;if(ga===1357012||ga===1357006)return false;return true;}function o(fa){var ga=fa.request.data,ha=ga.comment_id,ia=c('UFIComments').getComment(ha);ia=c('ImmutableObject').set(ia,{status:ia.priorstatus||null,priorstatus:undefined});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ia]});}function p(fa){var ga=fa.request.data,ha=ga.comment_id,ia=c('UFIComments').getComment(ha);if(ga.like_action===ia.hasviewerliked){var ja=ia.hasviewerliked?-1:1,ka={commentid:ha,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:!ia.hasviewerliked,likecount:(ia.likecount||0)+ja};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ka]});}c('AsyncResponse').defaultErrorHandler(fa);}function q(fa){var ga=fa.request.data,ha=ga.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(ha,function(ia){if(ia.hasviewerliked===ga.like_action){var ja=ia.hasviewerliked?-1:1,ka={actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:ia.actorforpost,hasviewerliked:!ia.hasviewerliked,likecount:(ia.likecount||0)+ja,entidentifier:ha,likesentences:{current:ia.likesentences.alternate,alternate:ia.likesentences.current}};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ka]});}});c('AsyncResponse').defaultErrorHandler(fa);}function r(fa){var ga=fa.request.data,ha=ga.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(ha,function(ia){if(ia.hasviewersubscribed===ga.subscribe_action){var ja={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:ia.actorforpost,hasviewersubscribed:!ia.hasviewersubscribed,entidentifier:ha};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ja]});}});c('AsyncResponse').defaultErrorHandler(fa);}var s={'/ajax/ufi/ban_user.php':{mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:l},'/ajax/ufi/subscribe.php':{mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:r,batch_if:da,batch_function:ea},'/ajax/ufi/id_comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:c('MercuryServerDispatcher').IMMEDIATE}},t=c('XUFIAddCommentController').getURIBuilder().getURI();s[t]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:m};var u=c('XUFIDeleteCommentController').getURIBuilder().getURI();s[u]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:o};var v=c('XUFICommentLikeController').getURIBuilder().getURI();s[v]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:p,batch_if:ba,batch_function:ea};var w=c('XUFIHideCommentController').getURIBuilder().getURI();s[w]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:o};var x=c('XUFILikeController').getURIBuilder().getURI();s[x]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:q,batch_if:ca,batch_function:ea};var y=c('XUFIEditCommentController').getURIBuilder().getURI();s[y]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:m};var z=c('XUFITranslateCommentController').getURIBuilder().getURI();s[z]={mode:c('MercuryServerDispatcher').IMMEDIATE};var aa=c('XUFIActorChangeController').getURIBuilder().getURI();s[aa]={mode:c('MercuryServerDispatcher').IMMEDIATE};c('MercuryServerDispatcher').registerEndpoints(s);function ba(fa,ga){return fa&&fa.ft_ent_identifier==ga.ft_ent_identifier&&fa.comment_id==ga.comment_id;}function ca(fa,ga){return fa&&fa.ft_ent_identifier==ga.ft_ent_identifier;}function da(fa,ga){return fa&&fa.ft_ent_identifier==ga.ft_ent_identifier;}function ea(fa,ga){return ga;}f.exports=babelHelpers['extends']({},k,c('UFIReactionUserActions'));}),null);
__d('UFISpamStore',['FluxReduceStore','UFIDispatcherBase','UFIStoryActionType','UFIUserActions'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {};};j.prototype.areEqual=function(k,l){return Object.keys(k).length===Object.keys(l).length;};j.prototype.reduce=function(k,l){switch(l.type){case c('UFIStoryActionType').SPAM_FETCHED:k=babelHelpers['extends']({},k);l.commentIDs.forEach(function(m){return (k[m]=true);});c('UFIUserActions').fetchSpamComments(l.ftentidentifier,l.commentIDs,l.parentCommentID,l.viewas);break;}return k;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFIDispatcher',['ReactDispatcher_DEPRECATED','UFISharedDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ReactDispatcher_DEPRECATED'));i=h&&h.prototype;j.prototype.dispatch=function(k){i.dispatch.call(this,k);c('UFISharedDispatcher').dispatch(k);};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('UFIInstanceAction',['UFIInstanceActionType'],(function a(b,c,d,e,f,g){'use strict';var h={changeOrderingMode:function i(j,k){return {type:c('UFIInstanceActionType').CHANGE_ORDER_MODE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,mode:k};},toggleComments:function i(j){return {type:c('UFIInstanceActionType').TOGGLE_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},changeCommentListVisibility:function i(j,k){return {type:c('UFIInstanceActionType').CHANGE_VISIBILITY,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,visibility:k};},init:function i(j,k){return {type:c('UFIInstanceActionType').INIT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,payload:k};},didRequestVODComments:function i(j){return {type:c('UFIInstanceActionType').REQUESTED_VOD_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},didReceiveVODComments:function i(j){return {type:c('UFIInstanceActionType').RECEIVED_VOD_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},remove:function i(j){return {type:c('UFIInstanceActionType').REMOVE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},toggleCommercialBreak:function i(j,k){return {type:c('UFIInstanceActionType').TOGGLE_COMMERCIAL_BREAK,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,inCommercial:k};},translateAll:function i(j){return {type:c('UFIInstanceActionType').TRANSLATE_ALL,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};}};f.exports=h;}),null);
__d('UFIReactionStore',['Arbiter','FluxStore','UFIReactionTypes','UFIStoryActionType','UFIUIEvents','UFIUserActions'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;j.prototype.__onDispatch=function(k){switch(k.type){case c('UFIStoryActionType').CHANGE_REACTION:c('UFIUserActions').changeReaction(k.contextArgs.ftentidentifier,k.reactionType,{rootid:k.contextArgs.rootid,source:k.contextArgs.source,feedbackReferrer:k.contextArgs.feedbackReferrer,fluentContentToken:k.contextArgs.fluentContentToken,isLiveVOD:k.contextArgs.isLiveVOD,islivestreaming:k.contextArgs.islivestreaming,instanceid:k.contextArgs.instanceid},k.target);c('Arbiter').inform(c('UFIUIEvents').ReactionButtonClicked,{ft_id:k.contextArgs.ftentidentifier,like_action:k.reactionType===c('UFIReactionTypes').LIKE,reaction_type:k.reactionType,target:k.target});break;}};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('UFICommentLink.react',['cx','fbt','React','TrackingNodes','emptyFunction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=i._("Comment"),o=i._("Leave a comment"),p='{ "tn": "'+c('TrackingNodes').encodeTN(c('TrackingNodes').types.COMMENT_LINK)+'", "type": 24 }';return (c('React').createElement('a',{className:"comment_link _5yxe",role:'button',href:this.props.href?this.props.href:'#',title:o,ajaxify:this.props.ajaxify,rel:this.props.rel,onClick:this.props.onClick,'data-ft':p},n));};function m(){j.apply(this,arguments);}m.propTypes={onClick:l.func,href:l.string,ajaxify:l.string,rel:l.string};m.defaultProps={onClick:c('emptyFunction')};f.exports=m;}),null);
__d('UFIDispatcherContext.react',['React','UFIDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.getChildContext=function(){return {dispatch:this.props.dispatcher.dispatch.bind(this.props.dispatcher),stores:this.props.stores};};k.prototype.render=function(){return this.props.children;};function k(){h.apply(this,arguments);}k.propTypes={dispatcher:j.instanceOf(c('UFIDispatcher')).isRequired,stores:j.object.isRequired};k.childContextTypes={dispatch:j.func,stores:j.object};f.exports=k;}),null);