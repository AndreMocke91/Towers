if (self.CavalryLogger) { CavalryLogger.start_js(["Fn8LB"]); }

__d("XReactFeedComposerXBootloadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/react_composer\/feedx\/bootload\/",{composer_id:{type:"String",required:true},composer_type:{type:"Enum",required:true,enumType:1},friend_list_id:{type:"String"},section_id:{type:"String"},target_id:{type:"String",required:true}});}),null);
__d('ReactFeedComposerX',['csx','cx','fbt','invariant','ReactComposerAttachmentType','ReactComposerDraftTypes','ReactComposerEvents','ReactComposerFocusInit','ReactComposerLoggingName','ReactComposerLoggingActions','Arbiter','AsyncRequest','Bootloader','ComposerEntryPointRef','CSS','DOM','Event','FeedComposerIDStore','Run','SubscriptionsHandler','XReactComposerLoggingODSController','XReactFeedComposerXBootloadController','$','requestAnimationFrame'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';function l(m){this.$ReactFeedComposerX1=m.actorID;this.$ReactFeedComposerX8=m.root;this.$ReactFeedComposerX3=m.composerID;this.$ReactFeedComposerX12=m.targetID;this.$ReactFeedComposerX4=m.composerType;this.$ReactFeedComposerX6=m.friendListID;this.$ReactFeedComposerX9=m.sectionID;this.$ReactFeedComposerX7=m.gks;this.$ReactFeedComposerX14=m.largeTextThreshold;this.$ReactFeedComposerX2=false;this.$ReactFeedComposerX5=c('DOM').find(this.$ReactFeedComposerX8,'form');this.$ReactFeedComposerX13=c('DOM').find(this.$ReactFeedComposerX8,"._3en1");this.$ReactFeedComposerX11=new (c('SubscriptionsHandler'))();this.$ReactFeedComposerX11.addSubscriptions(c('Event').listen(this.$ReactFeedComposerX8,'click',this.$ReactFeedComposerX15.bind(this)),c('Event').listen(this.$ReactFeedComposerX13,'focus',this.$ReactFeedComposerX15.bind(this)),c('Event').listen(this.$ReactFeedComposerX5,'success',this.$ReactFeedComposerX16.bind(this)),c('Arbiter').subscribeOnce('ReactFeedComposerXBootloader/bootload/'+this.$ReactFeedComposerX3,this.$ReactFeedComposerX17.bind(this)),c('Arbiter').subscribeOnce('ReactFeedComposerXBootloader/selectcomposer/'+this.$ReactFeedComposerX3,this.$ReactFeedComposerX15.bind(this)),c('Arbiter').subscribe('ReactComposerFocus/reset/'+this.$ReactFeedComposerX3,function(){this.$ReactFeedComposerX13.value='';}.bind(this)),c('Arbiter').subscribe(c('ReactComposerEvents').TEXT_PREFILL_BEFORE_BOOTLOAD+this.$ReactFeedComposerX3,function(p,q){this.$ReactFeedComposerX13.value=q;this.$ReactFeedComposerX13.selectionEnd=0;}.bind(this)));if(this.$ReactFeedComposerX14)this.$ReactFeedComposerX11.addSubscriptions(c('Event').listen(this.$ReactFeedComposerX13,'keydown',this.$ReactFeedComposerX18.bind(this)));if(this.$ReactFeedComposerX7&&!this.$ReactFeedComposerX7.shouldRedirectOnClickingProfilePic)this.$ReactFeedComposerX11.addSubscriptions(c('Arbiter').subscribe(c('ReactComposerEvents').ACTIVATE_ATTACHMENT+this.$ReactFeedComposerX3,function(){this.$ReactFeedComposerX13.focus();}.bind(this)));if(this.$ReactFeedComposerX7&&(this.$ReactFeedComposerX7.draftType===c('ReactComposerDraftTypes').AUTO||this.$ReactFeedComposerX7.draftType===c('ReactComposerDraftTypes').AUTOMSG))c('Bootloader').loadModules(["ReactComposerDraftGet"],function(p){var q=p.getDraft(this.$ReactFeedComposerX1);if(q){var r=q.prefillConfig.mentionsInput.textWithEntities.text;if(this.$ReactFeedComposerX14&&r.length>this.$ReactFeedComposerX14)c('CSS').removeClass(this.$ReactFeedComposerX13,"_480e");this.$ReactFeedComposerX13.value=r;this.$ReactFeedComposerX13.placeholder=j._("Continue creating your post...");}}.bind(this),'ReactFeedComposerX');c('FeedComposerIDStore').set(this.$ReactFeedComposerX3);var n=c('DOM').find(this.$ReactFeedComposerX8,"._4d6h"),o=c('DOM').scry(n,'input[name="composer_photo[]"]')[0];if(o){this.$ReactFeedComposerX11.addSubscriptions(c('Event').listen(o,'click',this.$ReactFeedComposerX15.bind(this)),c('Event').listen(o,'change',this.$ReactFeedComposerX15.bind(this)));if(o.files&&o.files.length>0)this.$ReactFeedComposerX15();}this.$ReactFeedComposerX10=c('DOM').scry(this.$ReactFeedComposerX8,"._4-h7");this.$ReactFeedComposerX10.forEach(function(p){return this.$ReactFeedComposerX11.addSubscriptions(c('Event').listen(p,'click',this.$ReactFeedComposerX19.bind(this)));}.bind(this));if(m.jsModules&&m.jsModules.composerFocus&&m.gks&&m.gks.focusExperiment)c('ReactComposerFocusInit').handler(c('$')('feedx_container'),this.$ReactFeedComposerX3,this.$ReactFeedComposerX1,this.$ReactFeedComposerX7,m.jsModules.composerFocus);c('Run').onLeave(this.$ReactFeedComposerX17.bind(this));}l.prototype.$ReactFeedComposerX18=function(m){if(this.$ReactFeedComposerX13.value.length<this.$ReactFeedComposerX14){c('CSS').addClass(this.$ReactFeedComposerX13,"_480e");}else c('CSS').removeClass(this.$ReactFeedComposerX13,"_480e");};l.prototype.$ReactFeedComposerX19=function(m){var n=m.getTarget(),o=null;while(n){if(n.nodeType===1&&n.nodeName==='A'){o=n;break;}n=n.parentNode;}o!==null||k(0);this.$ReactFeedComposerX20(o);var p=c('CSS').hasClass(o,"._5qtn");if(p)return;this.$ReactFeedComposerX10.forEach(function(s){return c('CSS').removeClass(s,"_5qtn");});c('CSS').addClass(o,"_5qtn");var q=c('DOM').find(this.$ReactFeedComposerX8,"._559p"),r=c('DOM').find(this.$ReactFeedComposerX8,"._559q");switch(o.getAttribute('data-attachment-type')){case c('ReactComposerAttachmentType').STATUS:c('CSS').hide(r);c('CSS').show(q);break;case c('ReactComposerAttachmentType').MEDIA:case c('ReactComposerAttachmentType').QANDA:case c('ReactComposerAttachmentType').LIVE_VIDEO:c('CSS').show(r);c('CSS').hide(q);break;}};l.prototype.$ReactFeedComposerX15=function(m){if(this.$ReactFeedComposerX2)return;if(this.$ReactFeedComposerX7&&!this.$ReactFeedComposerX7.shouldRedirectOnClickingProfilePic)c('Arbiter').inform(c('ReactComposerEvents').ACTIVATE_ATTACHMENT+this.$ReactFeedComposerX3);this.$ReactFeedComposerX2=true;this.$ReactFeedComposerX21();var n=c('XReactFeedComposerXBootloadController').getURIBuilder().setString('composer_id',this.$ReactFeedComposerX3).setString('target_id',this.$ReactFeedComposerX12).setEnum('composer_type',this.$ReactFeedComposerX4).setString('friend_list_id',this.$ReactFeedComposerX6).setString('section_id',this.$ReactFeedComposerX9).getURI();new (c('AsyncRequest'))(n).send();var o=c('XReactComposerLoggingODSController').getURIBuilder().setString('event','bootload_start').setEnum('composer_type',c('ComposerEntryPointRef').FEEDX).getURI();new (c('AsyncRequest'))(o).send();};l.prototype.$ReactFeedComposerX20=function(m){var n=c('ReactComposerLoggingName').INLINE_COMPOSER;switch(m.getAttribute('data-attachment-type')){case c('ReactComposerAttachmentType').STATUS:n=c('ReactComposerLoggingName').STATUS_TAB_SELECTOR;break;case c('ReactComposerAttachmentType').MEDIA:n=c('ReactComposerLoggingName').MEDIA_TAB_SELECTOR;break;case c('ReactComposerAttachmentType').LIVE_VIDEO:n=c('ReactComposerLoggingName').LIVE_VIDEO_TAB_SELECTOR;break;case c('ReactComposerAttachmentType').ALBUM:n=c('ReactComposerLoggingName').ALBUM_TAB_SELECTOR;break;case c('ReactComposerAttachmentType').NOTES:n=c('ReactComposerLoggingName').NOTES_TAB_SELECTOR;break;case c('ReactComposerAttachmentType').QANDA:n=c('ReactComposerLoggingName').QANDA_TAB_SELECTOR;break;}c('ReactComposerLoggingActions').composerEntry(this.$ReactFeedComposerX3,n);};l.prototype.$ReactFeedComposerX21=function(){c('ReactComposerLoggingActions').composerEntry(this.$ReactFeedComposerX3,c('ReactComposerLoggingName').INLINE_COMPOSER);};l.prototype.$ReactFeedComposerX17=function(){this.$ReactFeedComposerX11.release();};l.prototype.$ReactFeedComposerX16=function(){this.$ReactFeedComposerX13.value='';c('Arbiter').inform(c('ReactComposerEvents').POST_SUCCEEDED+this.$ReactFeedComposerX3);this.$ReactFeedComposerX17();};f.exports=l;}),null);
__d('ReactComposerFocusScrollLockUtils',['csx','cx','CSS','DOMQuery','ModalLayer','Style','getDocumentScrollElement','getElementRect','getUnboundedScrollPosition','getViewportDimensions','requestAnimationFrame','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=300,k=400,l=84,m={_interval:0,_pageRoot:null,_hasStickyComposer:false,_originalScrollPos:0,enable:function n(o,p){var q=c('getUnboundedScrollPosition')(c('getDocumentScrollElement')());if(c('CSS').matchesSelector(this._getPageRoot(),"._ihc"))return;c('CSS').addClass(this._getPageRoot(),"_ihc");c('ModalLayer').setPageRootAdjusted(true);this._hasStickyComposer=p;if(p){this._originalScrollPos=q.y;var r=Math.min(-this._originalScrollPos+l,0);c('Style').set(this._getPageRoot(),'margin-top',r+'px');}var s=c('getElementRect')(o),t=s.top,u=function(){var v=t+o.offsetHeight+k,w=Math.max(c('getViewportDimensions')().height,v)+this._originalScrollPos+'px';if(c('Style').get(this._getPageRoot(),'height')!==w)c('Style').set(this._getPageRoot(),'height',w);}.bind(this);this._interval=setInterval(u,j);u();c('requestAnimationFrame')(function(){window.scrollTo(q.x,0);});},disable:function n(){var o,p=this;c('CSS').removeClass(this._getPageRoot(),"_ihc");c('ModalLayer').setPageRootAdjusted(false);c('Style').set(this._getPageRoot(),'height',null);if(this._hasStickyComposer)(function(){var q=c('getUnboundedScrollPosition')(c('getDocumentScrollElement')());c('setTimeoutAcrossTransitions')(function(){c('Style').set(this._getPageRoot(),'margin-top',null);window.scrollTo(q.x,this._originalScrollPos);}.bind(p),450);})();clearInterval(this._interval);},_getPageRoot:function n(){if(!this._pageRoot)this._pageRoot=c('DOMQuery').scry(document.body,"._li")[0];return this._pageRoot;}};f.exports=m;}),null);
__d('ReactComposerFocusModal.react',['ReactComposerDraftTypes','ReactComposerFocusScrollLockUtils','ReactComposerFocusWrapperCore.react','ReactComposerLoggingActions','Arbiter','Bootloader','React','ReactDOM'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes,k=null,l=null,m=null;h=babelHelpers.inherits(n,c('React').PureComponent);i=h&&h.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=i.constructor).call.apply(o,[this].concat(r)),this.state={focused:false,showDiscardDialog:false},this.$ReactComposerFocusModal2=function(){if(this.props.gks.draftType==c('ReactComposerDraftTypes').AUTO||this.props.gks.draftType==c('ReactComposerDraftTypes').AUTOMSG){c('Bootloader').loadModules(["ReactComposerHandleUnsavedChanges","ReactComposerFocusSaveAsDraftDialog.react","ReactComposerInit"],function(t,u,v){m=t;l=u;k=v;},'ReactComposerFocusModal.react');}else c('Bootloader').loadModules(["ReactComposerHandleUnsavedChanges","ReactComposerFocusDiscardDialog.react","ReactComposerInit"],function(t,u,v){m=t;l=u;k=v;},'ReactComposerFocusModal.react');}.bind(this),this.$ReactComposerFocusModal4=function(t){if(t)return this.$ReactComposerFocusModal1();if(l&&m&&m.hasUnsavedChanges(this.$ReactComposerFocusModal6())){this.$ReactComposerFocusModal7();}else this.$ReactComposerFocusModal8();}.bind(this),this.$ReactComposerFocusModal8=function(){c('ReactComposerLoggingActions').composerCancel(this.$ReactComposerFocusModal6());this.$ReactComposerFocusModal9();try{if(k)k.resetComposer(this.$ReactComposerFocusModal6());}catch(t){}c('Arbiter').inform('ReactComposerFocus/reset/'+this.$ReactComposerFocusModal6());this.$ReactComposerFocusModal1();}.bind(this),this.$ReactComposerFocusModal3=function(){var t=c('ReactDOM').findDOMNode(this.refs.focus.getComposer());c('ReactComposerFocusScrollLockUtils').enable(t,this.props.gks.hasStickyComposer);this.setState({focused:true});}.bind(this),this.$ReactComposerFocusModal1=function(){c('ReactComposerFocusScrollLockUtils').disable();this.setState({focused:false});}.bind(this),this.$ReactComposerFocusModal7=function(){this.setState({showDiscardDialog:true});}.bind(this),this.$ReactComposerFocusModal9=function(){this.setState({showDiscardDialog:false});}.bind(this),this.$ReactComposerFocusModal6=function(){return this.refs.focus.getComposerID();}.bind(this),p;}n.prototype.componentWillUnmount=function(){'use strict';this.$ReactComposerFocusModal1();};n.prototype.render=function(){'use strict';return c('React').createElement('div',null,c('React').createElement(c('ReactComposerFocusWrapperCore.react'),{composerID:this.props.composerID,focused:this.state.focused,fixHeight:true,onFirstFocus:this.$ReactComposerFocusModal2,onFocus:this.$ReactComposerFocusModal3,onDismiss:this.$ReactComposerFocusModal4,gks:this.props.gks,ref:'focus'},this.props.children),this.$ReactComposerFocusModal5());};n.prototype.$ReactComposerFocusModal5=function(){'use strict';var o=null;if(this.state.showDiscardDialog&&l)if(this.props.gks.draftType==c('ReactComposerDraftTypes').AUTO||this.props.gks.draftType==c('ReactComposerDraftTypes').AUTOMSG){o=c('React').createElement(l,{getComposerID:this.$ReactComposerFocusModal6,actorID:this.props.actorID,gks:this.props.gks,onResetComposer:this.$ReactComposerFocusModal8,onCancel:this.$ReactComposerFocusModal9});}else o=c('React').createElement(l,{onConfirm:this.$ReactComposerFocusModal8,onCancel:this.$ReactComposerFocusModal9});return o;};n.propTypes={composerID:j.string.isRequired,actorID:j.string.isRequired,gks:j.object.isRequired};f.exports=n;}),null);
__d("XReactFeedSproutsComposerXBootloadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/react_composer\/feedx_sprouts\/bootload\/",{composer_id:{type:"String",required:true},composer_type:{type:"Enum",required:true,enumType:1},friend_list_id:{type:"String"},target_id:{type:"String",required:true}});}),null);
__d('ReactFeedSproutsComposerX',['cx','csx','fbt','ReactComposerDraftTypes','ReactComposerEvents','ReactComposerFocusInit','ReactComposerFocusModal.react','Arbiter','AsyncRequest','Bootloader','CSS','DOM','Event','FeedComposerIDStore','Run','SubscriptionsHandler','XReactFeedSproutsComposerXBootloadController','$'],(function a(b,c,d,e,f,g,h,i,j){'use strict';function k(l){this.$ReactFeedSproutsComposerX1=l.actorID;this.$ReactFeedSproutsComposerX8=l.root;this.$ReactFeedSproutsComposerX3=l.composerID;this.$ReactFeedSproutsComposerX11=l.targetID;this.$ReactFeedSproutsComposerX4=l.composerType;this.$ReactFeedSproutsComposerX6=l.friendListID;this.$ReactFeedSproutsComposerX7=l.gks;this.$ReactFeedSproutsComposerX2=false;this.$ReactFeedSproutsComposerX5=c('DOM').find(this.$ReactFeedSproutsComposerX8,'form');this.$ReactFeedSproutsComposerX12=c('DOM').find(this.$ReactFeedSproutsComposerX8,"._3en1");this.$ReactFeedSproutsComposerX9=c('DOM').find(this.$ReactFeedSproutsComposerX8,"._16ve");c('FeedComposerIDStore').set(this.$ReactFeedSproutsComposerX3);this.$ReactFeedSproutsComposerX10=new (c('SubscriptionsHandler'))();this.$ReactFeedSproutsComposerX10.addSubscriptions(c('Event').listen(this.$ReactFeedSproutsComposerX12,'focus',this.$ReactFeedSproutsComposerX13.bind(this)),c('Event').listen(this.$ReactFeedSproutsComposerX8,'click',this.$ReactFeedSproutsComposerX13.bind(this)),c('Event').listen(this.$ReactFeedSproutsComposerX5,'success',this.$ReactFeedSproutsComposerX14.bind(this)),c('Arbiter').subscribeOnce('ReactFeedComposerXBootloader/bootload/'+this.$ReactFeedSproutsComposerX3,this.$ReactFeedSproutsComposerX15.bind(this)),c('Arbiter').subscribeOnce('ReactFeedComposerXBootloader/selectcomposer/'+this.$ReactFeedSproutsComposerX3,this.$ReactFeedSproutsComposerX13.bind(this)),c('Arbiter').subscribe('ReactComposerFocus/reset/'+this.$ReactFeedSproutsComposerX3,this.$ReactFeedSproutsComposerX16.bind(this)),c('Arbiter').subscribe(c('ReactComposerEvents').TEXT_PREFILL_BEFORE_BOOTLOAD+this.$ReactFeedSproutsComposerX3,function(m,n){this.$ReactFeedSproutsComposerX12.value=n;this.$ReactFeedSproutsComposerX12.selectionEnd=0;}.bind(this)));if(this.$ReactFeedSproutsComposerX7.lazySproutsExpand)this.$ReactFeedSproutsComposerX10.addSubscriptions(c('Event').listen(this.$ReactFeedSproutsComposerX9,'click',this.$ReactFeedSproutsComposerX17.bind(this)));if(this.$ReactFeedSproutsComposerX7&&(this.$ReactFeedSproutsComposerX7.draftType===c('ReactComposerDraftTypes').AUTO||this.$ReactFeedSproutsComposerX7.draftType===c('ReactComposerDraftTypes').AUTOMSG))c('Bootloader').loadModules(["ReactComposerDraftGet"],function(m){var n=m.getDraft(this.$ReactFeedSproutsComposerX1);if(n){var o=n.prefillConfig.mentionsInput.textWithEntities.text;if(this.$ReactFeedSproutsComposerX7.largeTextThreshold&&o.length>this.$ReactFeedSproutsComposerX7.largeTextThreshold)c('CSS').removeClass(this.$ReactFeedSproutsComposerX12,"_480e");this.$ReactFeedSproutsComposerX12.value=o;this.$ReactFeedSproutsComposerX12.placeholder=j._("Continue creating your post...");}}.bind(this),'ReactFeedSproutsComposerX');c('ReactComposerFocusInit').handler(c('$')('feedx_sprouts_container'),this.$ReactFeedSproutsComposerX3,this.$ReactFeedSproutsComposerX1,this.$ReactFeedSproutsComposerX7,c('ReactComposerFocusModal.react'));c('Run').onLeave(this.$ReactFeedSproutsComposerX15.bind(this));}k.prototype.$ReactFeedSproutsComposerX13=function(l){if(!this.$ReactFeedSproutsComposerX7.lazySproutsExpand)this.$ReactFeedSproutsComposerX17();if(this.$ReactFeedSproutsComposerX2)return;this.$ReactFeedSproutsComposerX2=true;var m=c('XReactFeedSproutsComposerXBootloadController').getURIBuilder().setString('composer_id',this.$ReactFeedSproutsComposerX3).setString('target_id',this.$ReactFeedSproutsComposerX11).setEnum('composer_type',this.$ReactFeedSproutsComposerX4).setString('friend_list_id',this.$ReactFeedSproutsComposerX6).getURI();new (c('AsyncRequest'))(m).send();};k.prototype.$ReactFeedSproutsComposerX17=function(){c('CSS').addClass(this.$ReactFeedSproutsComposerX8,"_4qr4");c('CSS').removeClass(this.$ReactFeedSproutsComposerX8,"_4a8c");};k.prototype.$ReactFeedSproutsComposerX18=function(){c('CSS').removeClass(this.$ReactFeedSproutsComposerX8,"_4qr4");c('CSS').addClass(this.$ReactFeedSproutsComposerX8,"_4a8c");};k.prototype.$ReactFeedSproutsComposerX16=function(){this.$ReactFeedSproutsComposerX18();this.$ReactFeedSproutsComposerX12.value='';};k.prototype.$ReactFeedSproutsComposerX15=function(){this.$ReactFeedSproutsComposerX10.release();};k.prototype.$ReactFeedSproutsComposerX14=function(){c('Arbiter').inform(c('ReactComposerEvents').POST_SUCCEEDED+this.$ReactFeedSproutsComposerX3);this.$ReactFeedSproutsComposerX16();};f.exports=k;}),null);