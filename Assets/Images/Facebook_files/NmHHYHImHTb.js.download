if (self.CavalryLogger) { CavalryLogger.start_js(["r3H5I"]); }

__d('HovercardLinkInterpolator',['cx','fbt','Badge.react','HovercardLink','Link.react','React','URI','isFacebookURI','isRTL'],(function a(b,c,d,e,f,g,h,i){function j(k,l,m,n,o){var p=arguments.length<=5||arguments[5]===undefined?null:arguments[5],q=l.entity,r=m||(q.external?'_blank':null),s,t=(!q.external?"profileLink":'')+(q.weakreference?' '+"weakReference":''),u,v=q.hashtag?k.substring(1):k;u=c('isRTL')(v)?'rtl':'ltr';var w=new (c('URI'))(q.url);if(c('isFacebookURI')(w))w.addQueryData({hc_location:o});var x=q.shimhash?q.shimhash:null,y=!q.external&&!q.hashtag&&!q.photo&&!q.note&&!q.video,z=y?{'data-hovercard':c('HovercardLink').constructEndpointWithGroupLocationAndExtraParams(q,n,o,null,p).toString()}:{};if(q.hashtag){s=c('React').createElement('a',babelHelpers['extends']({},z,{className:"_58cn",dir:u,href:w.toString(),target:r}),c('React').createElement('span',{'aria-label':i._("hashtag"),className:"_58cl"},k.substring(0,1)),c('React').createElement('span',{className:"_58cm"},k.substring(1)));}else{var aa=[];if(q.weakreference)aa.push(c('React').createElement('i',{key:'weakreference',className:'UFIWeakReferenceIcon'}));aa.push(k);if(q.noncoworker)aa.push(c('React').createElement(c('Badge.react'),{key:'noncoworker',type:'work_non_coworker'}));s=c('React').createElement(c('Link.react'),babelHelpers['extends']({},z,{className:t,dir:u,href:{url:w.toString(),shimhash:x},target:r}),aa);}return s;}f.exports=j;}),null);
__d('NYE2017Dispatcher',['Bootloader','Event'],(function a(b,c,d,e,f,g){var h,i={registerPostElem:function j(k){c('Event').listen(k,'click',i.playPostAnimationOnTap);},registerCommentElem:function j(k){c('Event').listen(k,'click',i.playCommentAnimationOnTap);},playPostAnimationOnSubmit:function j(){if(!h)h=setTimeout(i._playPostAnimationOnSubmit,1);},_playPostAnimationOnSubmit:function j(){h=null;c('Bootloader').loadModules(["NYE2017Animation","FactoryDelightsFireworksTypedLogger"],function(k,l){new l().setEvent('factory_delights_nye_2017_post_submitted').log();k.playPostAnimation();},'NYE2017Dispatcher');},playPostAnimationOnTap:function j(){c('Bootloader').loadModules(["NYE2017Animation","FactoryDelightsFireworksTypedLogger"],function(k,l){new l().setEvent('factory_delights_nye_2017_post_tapped').log();k.playPostAnimation();},'NYE2017Dispatcher');},playCommentAnimationOnSubmit:function j(){c('Bootloader').loadModules(["NYE2017Animation","FactoryDelightsFireworksTypedLogger"],function(k,l){new l().setEvent('factory_delights_nye_2017_comment_submitted').log();k.playCommentAnimation();},'NYE2017Dispatcher');},playCommentAnimationOnTap:function j(){c('Bootloader').loadModules(["NYE2017Animation","FactoryDelightsFireworksTypedLogger"],function(k,l){new l().setEvent('factory_delights_nye_2017_comment_tapped').log();k.playCommentAnimation();},'NYE2017Dispatcher');}};f.exports=i;}),null);
__d('VideoTimestampsClicksWWWTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:VideoTimestampsClicksWWWLoggerConfig',this.$VideoTimestampsClicksWWWTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:VideoTimestampsClicksWWWLoggerConfig',this.$VideoTimestampsClicksWWWTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$VideoTimestampsClicksWWWTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$VideoTimestampsClicksWWWTypedLogger1=babelHelpers['extends']({},this.$VideoTimestampsClicksWWWTypedLogger1,j);return this;};h.prototype.setCommentID=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.comment_id=j;return this;};h.prototype.setIsContentTimestamp=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.is_content_timestamp=j;return this;};h.prototype.setLocalCommentFeedbackID=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.local_comment_feedback_id=j;return this;};h.prototype.setVC=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.vc=j;return this;};h.prototype.setVideoTimestamp=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.video_timestamp=j;return this;};var i={comment_id:true,is_content_timestamp:true,local_comment_feedback_id:true,vc:true,video_timestamp:true};f.exports=h;}),null);
__d('transformTextRanges',['UnicodeUtils'],(function a(b,c,d,e,f,g){var h=function i(j,k,l){if(!j||!k||!l)return j;k.sort(function(s,t){return s.offset-t.offset;});var m=0;for(var n=0;n<k.length;n++){k[n].offset+=m;var o=c('UnicodeUtils').substr(j,k[n].offset,k[n].length),p=c('UnicodeUtils').strlen(o),q=l(o,k[n]),r=c('UnicodeUtils').strlen(q);if(o!==q){j=c('UnicodeUtils').substr(j,0,k[n].offset)+q+c('UnicodeUtils').substr(j,k[n].offset+k[n].length);k[n].length=r;m+=r-p;}}return j;};f.exports=h;}),null);
__d('UFICommentUtils',['cx','HovercardLinkInterpolator','NYE2017CommentSettings','NYE2017Dispatcher','React','UFIConstants','UFIVideoPlayerRegistry','URI','URITruncator','VideoTimestampsClicksWWWTypedLogger','transformTextRanges'],(function a(b,c,d,e,f,g,h){'use strict';var i={timeToTimestamp:function j(k){var l=Math.floor(k/3600),m=l?l+':':'';m+=((l?'0':'')+Math.floor(k%3600/60)).slice(-2)+':';return m+('0'+k%60).slice(-2);},getCommentTextWithTruncatedURIs:function j(k,l){if(c('UFIConstants').commentURLTruncationLength)if(k&&k.length>0)l=c('transformTextRanges')(l,k,function(m,n){var o=n.entity.external||n.entity.__type__&&n.entity.__type__.name==='ExternalUrl';return o?c('URITruncator')(m,c('UFIConstants').commentURLTruncationLength):m;});return l;},getCommentBodyInterpolator:function j(k,l,m,n){return function(o,p){if(p.videoTimestamp){if(n)return c('React').createElement('span',null,p.entity);var q=function v(w){w.preventDefault();new (c('VideoTimestampsClicksWWWTypedLogger'))().setVideoTimestamp(p.integerTimestamp).setCommentID(m).setIsContentTimestamp(false).log();if(l){c('UFIVideoPlayerRegistry').seekAvailableVideoPlayerController(l,p.integerTimestamp);c('UFIVideoPlayerRegistry').scrollToAvailableVideo(l);}return false;};return c('React').createElement('a',{className:"TimestampLink",onClick:q,href:'#'},p.entity);}else if(p.sphericalViewport){var r=function v(w){w.preventDefault();if(l)c('UFIVideoPlayerRegistry').setAvailableVideoPlayerControllerSphericalViewport(l,{yaw:p.yaw,pitch:p.pitch});return false;};return (c('React').createElement('a',{onClick:r,href:'#'},p.entity));}else if(p.sphericalViewportAndTimestamp){var s=function v(w){w.preventDefault();if(l){c('UFIVideoPlayerRegistry').setAvailableVideoPlayerControllerSphericalViewport(l,{yaw:p.yaw,pitch:p.pitch});c('UFIVideoPlayerRegistry').seekAvailableVideoPlayerController(l,p.integerTimestamp);}return false;};return (c('React').createElement('a',{onClick:s,href:'#'},p.entity));}else if(p.entity.id==1668451680112934){var t=null,u=null;if(c('NYE2017CommentSettings').shouldHighlight){u="_2aun";if(c('NYE2017CommentSettings').shouldAnimate)t=c('NYE2017Dispatcher').playCommentAnimationOnTap;}return (c('React').createElement('span',{onClick:t,role:'button',className:u},o));}else return c('HovercardLinkInterpolator')(o,p,'_blank',k,'ufi');};},shallowCopyRanges:function j(k){if(!k)return k;var l=[];k.forEach(function(m){l.push(babelHelpers['extends']({},m));});return l;},annotateProfileURIIfPublic:function j(k,l){if(!k)return l;return new (c('URI'))(l).addQueryData('rc','p').toString();},shouldShowTranslateAll:function j(k,l,m,n){if(!k)return false;var o=0,p=void 0,q=void 0;for(var r=0;r<k.length;r++){p=k[r];if(p.istranslatable&&!p.translationdata&&!n[p.id])o++;if(o>1)return true;if(m[p.id]){q=l?l[p.id]:[];for(var s=0;s<q.length;s++){p=q[s];if(p.istranslatable&&!p.translationdata&&!n[p.id])o++;if(o>1)return true;}}}return false;}};f.exports=i;}),null);
__d('UFICommentMetadata.react',['cx','fbt','Bootloader','BootloadedComponent.react','FBCollapsibleList.react','JSResource','React','ReactDOM','Timestamp.react','TrackingNodes','UFIConstants','Middot.react','URI','XUISpinner.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=c('UFIConstants').UFIStatus,n='ufi_comment_timestamp',o="UFIFailureMessageIcon",p="UFIFailureMessage",q="uiLinkSubtle",r=function t(u){var v=u.status;return v===m.FAILED_ADD||v===m.FAILED_EDIT;};j=babelHelpers.inherits(s,c('React').Component);k=j&&j.prototype;s.prototype.render=function(){var t=this.props,u=t.comment,v=t.onRetrySubmit,w=void 0,x=void 0;if(r(u)){w=[c('React').createElement('span',{key:'failure',className:p},c('React').createElement('i',{className:o}),i._("Unable to post comment.")),u.allowRetry&&v?[' ',c('React').createElement('a',{key:'rety-submit',onClick:v,href:'#',role:'button'},i._("Try Again"))]:null];}else{var y=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.SOURCE);x=c('React').createElement(c('Timestamp.react'),{shorten:this.props.shortenTimestamp,time:u.timestamp.time,text:u.timestamp.text,verbose:u.timestamp.verbose});if(this.props.showPermalink)x=c('React').createElement('a',{key:'timestamp-message',className:q,href:this.props.permalink,'data-ft':y,'data-testid':n,target:this.props.permalinkTarget},x);}var z=null;if(u.originalTimestamp){var aa=new (c('URI'))('/ajax/edits/browser/comment').addQueryData({comment_token:u.id}).toString();z=[c('React').createElement(c('Middot.react'),{key:'middot-editNote'}),c('React').createElement('a',{ajaxify:aa,className:'uiLinkSubtle','data-hover':'tooltip','data-tooltip-content':i._("Show edit history"),href:'#',key:'edit-link',ref:'EditLink',rel:'dialog',role:'button',title:i._("Show edit history")},i._("Edited"))];}var ba=null;if(u.creator_data)ba=[c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement(c('XUISpinner.react'),{size:'small'}),bootloadLoader:c('JSResource')('UFICreatorInfo.react').__setRef('UFICommentMetadata.react'),creatorID:u.creator_data.creatorID,creatorType:u.creator_data.creatorType,creatorName:u.creator_data.creatorName,labelType:u.creator_data.labelType,pageID:u.creator_data.pageID,profileURI:u.creator_data.profileURI}),c('React').createElement(c('Middot.react'),{key:'middot-creator'})];var ca=null;if(u.body&&u.body.markdown_enabled&&u.body.markup)ca=[c('React').createElement(c('Middot.react'),{key:'middot-markdownNote'}),c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('a',{className:'uiLinkSubtle'},i._("Formatted")),bootloadLoader:c('JSResource')('UFICommentMarkdownFormattedLink.react').__setRef('UFICommentMetadata.react'),comment:u,key:'markdown-link'})];var da=u.reportedBy,ea=null;if(da&&da.length>0)ea=[c('React').createElement(c('Middot.react'),{key:'middot-reportedByMessage'}),c('React').createElement('span',{key:'reportedByMessage'},i._("Reported by {Comma-separated list of names}",[i.param('Comma-separated list of names',c('React').createElement(c('FBCollapsibleList.react'),{numVisible:2,showLessLink:true,display:'inline',delimiter:'comma'},da))]))];return (c('React').createElement('span',null,ba,x,w,z,ca,ea));};s.prototype.componentWillUpdate=function(t){var u=this.props.comment,v=t.comment;if(!u.editnux&&!!v.editnux)c('Bootloader').loadModules(["LegacyContextualDialog"],function(w){var x=new w();x.init(v.editnux).setContext(c('ReactDOM').findDOMNode(this.refs.EditLink)).setWidth(300).setPosition('below').show();}.bind(this),'UFICommentMetadata.react');};function s(){j.apply(this,arguments);}s.propTypes={comment:l.object.isRequired,contextArgs:l.object,onRetrySubmit:l.func,permalink:l.string,shortenTimestamp:l.bool,showPermalink:l.bool,permalinkTarget:l.string};f.exports=s;}),null);
__d('NYE2017TextHandler',['Bootloader','NYE2017AnimationTriggerSettings'],(function a(b,c,d,e,f,g){var h={playPostAnimationIfMatchesAndAllowed:function i(j){if(c('NYE2017AnimationTriggerSettings').shouldTriggerOnPost)h.playPostAnimationIfMatches(j);},playPostAnimationIfMatches:function i(j){c('Bootloader').loadModules(["NYE2017Dispatcher"],function(k){h.runFunctionIfMatches(j,k.playPostAnimationOnSubmit);},'NYE2017TextHandler');},playCommentAnimationIfMatchesAndAllowed:function i(j){if(c('NYE2017AnimationTriggerSettings').shouldTriggerOnComment)h.playCommentAnimationIfMatches(j);},playCommentAnimationIfMatches:function i(j){c('Bootloader').loadModules(["NYE2017Dispatcher"],function(k){h.runFunctionIfMatches(j,k.playCommentAnimationOnSubmit);},'NYE2017TextHandler');},runFunctionIfMatches:function i(j,k){c('Bootloader').loadModules(["NYE2017TriggerStrings"],function(l){if(j&&new RegExp(l.regex,'i').test(j))k();},'NYE2017TextHandler');}};f.exports=h;}),null);
__d('ReactComposerActionStore',['errorCode','ReactComposerActionTypes','ReactComposerEvents','ReactComposerStoreBase','Arbiter','AsyncResponse','NYE2017TextHandler','Set','requireWeak'],(function a(b,c,d,e,f,g,h){var i,j,k=void 0;c('requireWeak')('ReactComposerStatusStore',function(m){return k=m;});i=babelHelpers.inherits(l,c('ReactComposerStoreBase'));j=i&&i.prototype;function l(m,n){'use strict';m=m?m:function(){return null;};var o;j.constructor.call(this,m,function(p){if(!(o&&o.__shouldIgnoreAction(p)))switch(p.type){case c('ReactComposerActionTypes').POST_STARTED:o&&o.$ReactComposerActionStore2(p);break;case c('ReactComposerActionTypes').POST_INTENDED:o&&o.$ReactComposerActionStore3(p);break;case c('ReactComposerActionTypes').POST_SUCCEEDED:o&&o.$ReactComposerActionStore4(p);break;case c('ReactComposerActionTypes').POST_ERROR:o&&o.$ReactComposerActionStore5(p);break;case c('ReactComposerActionTypes').POST_FINALLY:o&&o.$ReactComposerActionStore6(p);break;default:}n&&n(p);});o=this;this.$ReactComposerActionStore1=new (c('Set'))();}l.prototype.registerComposerID=function(m){'use strict';this.$ReactComposerActionStore1.add(m);};l.prototype.$ReactComposerActionStore2=function(m){'use strict';var n=this.validateAction(m,'composerID');this.__onPostStarted&&this.__onPostStarted(m);c('Arbiter').inform(c('ReactComposerEvents').POST_STARTED+n);};l.prototype.$ReactComposerActionStore3=function(m){'use strict';this.validateAction(m,['composerID','actorID','config','targetID']);if(!this.__canPost||this.__canPost(m))this.$ReactComposerActionStore2(m);};l.prototype.$ReactComposerActionStore4=function(m){'use strict';var n=this.validateAction(m,'composerID');if(k){var o=k.getMessage(n);c('NYE2017TextHandler').playPostAnimationIfMatchesAndAllowed(o);}this.__onPostSucceeded&&this.__onPostSucceeded(m);c('Arbiter').inform(c('ReactComposerEvents').POST_SUCCEEDED+n);};l.prototype.$ReactComposerActionStore5=function(m){'use strict';if(this.__onPostError)return this.__onPostError(m);if(m.response){var n=m.response.getError&&m.response.getError()==1455004;if(n)return;c('AsyncResponse').defaultErrorHandler(m.response);}};l.prototype.$ReactComposerActionStore6=function(m){'use strict';this.__onPostFinally&&this.__onPostFinally(m);};l.prototype.__shouldIgnoreAction=function(m){'use strict';var n=this.validateAction(m,'composerID');return !this.$ReactComposerActionStore1.has(n);};f.exports=l;}),null);
__d('ReactDispatcher_DEPRECATED',['Dispatcher_DEPRECATED','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('Dispatcher_DEPRECATED'));i=h&&h.prototype;j.prototype.dispatch=function(k){c('ReactDOM').unstable_batchedUpdates(function(){i.dispatch.call(this,k);}.bind(this));};function j(){h.apply(this,arguments);}f.exports=j;}),null);